{"version":3,"sources":["features/search/searchSlice.js","features/auth/authSlice.js","components/search/SearchBar.js","features/compare/compareSlice.js","components/search/SearchFacetSettings.js","components/compare/CompareAppTopBar.js","components/compare/CompareAppMenuSettings.js","features/app/appSlice.js","features/view/viewSlice.js","components/search/QueryResultDropdownData.js","components/search/QueryResult.js","components/search/CrystalList.js","features/create/createSlice.js","components/compare/CompareAppMenuGraphSelectionButton.js","components/compare/CompareAppMenuGraphSelection.js","components/compare/views/Panel.tsx","components/compare/views/ClustersPanel.js","components/compare/CompareAppMenuClusterSelection.js","components/compare/CompareAppMenu.js","Loading.js","components/compare/CirclePacking.js","components/compare/Sunburst.js","components/compare/canvas-utils.ts","components/compare/use-debounce.ts","components/compare/views/GraphSettingsController.tsx","features/preview/previewSlice.js","components/compare/views/GraphEventsController.tsx","components/compare/views/GraphDataController.tsx","components/compare/views/SearchField.js","components/base/geometry.js","components/PreviewPanel.js","components/compare/views/Root.js","components/compare/ForceDirectedGraph.js","components/compare/CompareAppPlot.js","components/search/SearchResults.js","components/search/SearchSettings.js","components/search/SearchPanel.js","components/compare/PreviewList.js","components/compare/CompareAppMain.js","components/compare/CompareApp.js","components/view/ViewAppPlaceholder.js","components/view/PeriodicTable.js","components/view/ViewAppElementSettings.js","components/view/ViewAppCanvas.js","components/view/ViewAppMain.js","components/view/ViewAppTopBar.js","components/view/ViewApp.js","components/create/CreateAppTopBar.js","components/base/InputField.js","components/create/CreateAppCoordinateSwitch.js","components/home/CIFHelpers.js","components/create/CreateAppMainCrystal.js","components/create/CreateAppMainSubset.js","components/create/CreateAppMainSource.js","components/create/CreateAppMain.js","components/create/CreateApp.js","components/home/AtomTable.js","components/home/BondTable.js","components/home/UnitCellTable.js","components/home/SymmetryTable.js","components/home/AMDTable.js","components/home/PDDTable.js","components/home/CrystalAccordionBody.js","features/home/homeSlice.js","components/home/CrystalAccordion.js","components/home/SimilarCrystalsTable.js","components/home/CrystalCreateAccordion.js","components/home/RecentCrystalAccordionList.js","components/home/SearchAccordion.js","components/home/HomeAppTopBar.js","components/home/CrystalAccordionList.js","components/home/SourceAccordion.js","components/home/SourceCreateAccordion.js","components/home/SourceAccordionList.js","components/home/CrystalTable.js","components/home/SubsetAccordion.js","components/home/SubsetCreateAccordion.js","components/home/SubsetAccordionList.js","components/home/HomeAppMain.js","components/home/HomeApp.js","components/ApplicationBay.js","features/settings/settingsFooterSlice.js","components/LeftSideBarButton.js","Logo.js","components/SideBarLogo.js","components/LeftSideBar.js","components/Dashboard.js","components/create/CreateModal.js","components/SettingsModal.js","components/AppHeader.js","App.js","reportWebVitals.js","features/options/optionsSlice.js","store.js","components/TabSelector.js","Login.js","index.js","useToken.js"],"names":["searchPanelSlice","createSlice","name","initialState","searchPanelOpened","currentContent","resultSize","facet","k","n","results","match","searchFor","reducers","openSearchPanel","state","action","console","log","closeSearchPanel","toggleSearchPanel","changeContent","payload","change","actions","getSearchPanelOpened","createSelector","p","getContent","getK","getFacet","getResultSize","getResults","getNorm","getCompType","getMatch","authSlice","addAccessToken","sessionStorage","setItem","addRefreshToken","addUser","setLoggedIn","getAccessToken","getRefreshToken","getCurrentUser","SearchBar","dispatch","useDispatch","useState","query","setQuery","useSelector","token","resSize","compType","refreshToken","user","matchType","search","a","fetch","method","headers","body","JSON","stringify","then","resp","status","clear","undefined","window","location","reload","json","r","jwt","access","refresh","data","fetchResults","e","preventDefault","res","className","onSubmit","placeholder","onChange","target","value","onFocus","compareSlice","addComp","newState","includes","concat","addComps","i","length","removeComp","filter","x","clearComp","setGraphType","gt","setMeasure","setK","Number","setKx","setKy","setThreshold","setFiltered","setMaxThreshold","setThresholds","setKs","setLinkage","setRendering","setCamera","setBox","setMenuOpen","toggleMenu","togglePreviewList","openPreviewList","toggleCrystalList","addToPreviewList","removeFromPreviewList","toggleSearchField","toggleClusterPanel","setBreakout","getComp","getGraphType","getKx","getKy","getMeasure","getThreshold","getMaxThreshold","getThresholds","getKs","getLinkage","getBox","getMenuOpen","getPreviewList","getPreviewListOpen","getSearchFieldOpen","getClusterPanelOpen","getCrystalListOpen","getBreakout","SearchFacetSettings","changeFacet","CompareAppTopBar","OverlayTrigger","placement","overlay","Tooltip","id","onClick","GraphControls","threshold","measure","maxThresh","type","min","max","step","toFixed","toUpperCase","ButtonGroup","style","Button","CircleControls","ks","thresholds","replaceKs","val","ind","kscopy","replaceThresholds","thresholds_copy","AMDControls","k_x","k_y","CircleSettings","settingsMap","CompareAppMenuSettings","plotType","appSlice","openViewApp","openCompareApp","openCreateApp","setSize","width","height","openHomeApp","getOpenApp","getWidth","getHeight","currentObject","menuOpen","viewSlice","addView","getViewObject","QueryResultDropdownData","label","value_result","getFamily","replace","getSubset","QueryResult","currentApp","addCrystal","addSubset","open","setOpen","addFamily","dis","addButton","dropdown","cx","AddedQueryResult","cname","addToComparison","CrystalList","currentComp","endRef","useRef","setFilter","filtered","str","output","toLowerCase","indexOf","numberOfResults","Math","resultsToRender","slice","useEffect","current","scrollIntoView","behavior","scrollToBottom","map","ref","readingFile","createModalOpened","currentTab","newSubsetName","newSubsetItems","crystal","atoms","bonds","setSymmetry","unitCell","setIsDisordered","currentMessage","source","coordinateSystem","sourceStatus","subsetStatus","sourceMessage","subsetMessage","createModalSlice","openCreateModal","toggleCreateModal","closeCreateModal","setTab","setReadingFile","setCurrentMessage","setAtoms","setBonds","setUnitCell","setCrystal","setSource","setCoordinateSystem","setStatus","setSubsetStatus","setSourceStatus","setSourceMessage","setSubsetMessage","getCreateModalOpened","getCurrentTab","getCurrentMessage","getSource","getCoordinateSystem","getStatus","getSubsetStatus","getSourceStatus","getSourceMessage","getSubsetMessage","CompareAppMenuGraphSelectionButton","text","icon","graphType","CompareAppMenuGraphSelection","Panel","title","initiallyDeployed","children","vis","isDeployed","setIsDeployed","dom","setTimeout","parentElement","scrollTo","top","offsetTop","v","duration","ClustersPanel","clusters","filters","toggleCluster","setClusters","graph","useSigma","getGraph","nodesPerCluster","useMemo","index","forEachNode","_","cluster","maxNodesPerCluster","values","visibleClustersCount","Object","keys","visibleNodesPerCluster","setVisibleNodesPerCluster","requestAnimationFrame","hidden","c","key","sortedClusters","sortBy","mapValues","keyBy","nodesCount","visibleNodesCount","checked","htmlFor","background","color","borderColor","clusterLabel","CompareAppMenuClusterSelection","breakout","changeBreakout","CompareAppMenu","Loading","props","xmlns","viewBox","preserveAspectRatio","transform","cy","fill","attributeName","begin","calcMode","keySplines","keyTimes","dur","repeatCount","LoadingCustom","innerHeight","innerWidth","MyResponsiveCirclePacking","zoomedId","setZoomedId","setDataReady","dataset","setDataset","linkage","names","loading","setLoading","d","join","url","margin","right","bottom","left","colors","scheme","childColor","from","modifiers","padding","enableLabels","labelsFilter","node","depth","labelsSkipRadius","labelTextColor","borderWidth","defs","rotation","lineWidth","spacing","motionConfig","flatten","reduce","acc","item","MyResponsiveSunburst","cornerRadius","theme","enableArcLabels","arcLabelsSkipAngle","arcLabelsTextColor","transitionMode","clickedData","foundObject","find","searchedName","TEXT_COLOR","drawLabel","context","settings","size","labelSize","font","labelFont","weight","labelWeight","measureText","fillStyle","fillRect","y","fillText","useDebounce","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","GraphSettingsController","hoveredNode","hoveredEdge","sigma","debouncedHoveredNode","setSetting","subLabelSize","subLabel","tag","beginPath","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","labelWidth","subLabelWidth","clusterLabelWidth","textWidth","round","w","hLabel","hSubLabel","ctx","radius","moveTo","lineTo","quadraticCurveTo","closePath","drawRoundRect","drawHover","getNodeDisplayData","hoveredColor","hasEdge","zIndex","image","highlighted","edge","hasExtremity","previewSlice","previewOpened","openPreview","closePreview","changeObject","getPreviewOpened","getObject","getX","getY","getMouseLayer","document","querySelector","GraphEventsController","setHoveredNode","setHoveredEdge","registerEvents","useRegisterEvents","clickNode","event","getNodeAttribute","clientX","clientY","enterNode","mouseLayer","classList","add","leaveNode","remove","cameraUpdated","point01","viewportToGraph","dims","getDimensions","point00","point11","box","enterEdge","leaveEdge","GraphDataController","nodes","forEach","addNode","omit","edges","addEdge","scores","setNodeAttribute","filterEdges","edgeAttributes","sourceId","targetId","sourcePosition","targetPosition","SearchField","setSearch","setValues","selected","setSelected","newValues","lcSearch","attributes","push","nodeDisplayData","getCamera","animate","ratio","hasNode","list","searchString","valueItem","onKeyPress","toCartesian","point","m1","m2","result","j","sum","multiplyMatrices","addVecs","b","cellParamsToMatrix","alpha","beta","gamma","volume","sqrt","cos","cellVolume","PI","sin","H_SIZE","ELEMENT_SIZE","getSize","sym","s","CPK","h","he","li","be","o","f","ne","na","mg","al","si","cl","ar","ca","sc","ti","cr","mn","fe","co","ni","cu","zn","ga","ge","as","se","br","kr","rb","sr","zr","nb","mo","tc","ru","rh","pd","ag","cd","in","sn","sb","te","xe","cs","ba","la","ce","pr","nd","pm","sm","eu","gd","tb","dy","ho","er","tm","yb","lu","hf","ta","re","os","ir","pt","au","hg","tl","pb","bi","po","at","rn","fr","ra","ac","th","pa","u","np","pu","am","cm","bk","cf","es","fm","md","no","lr","rf","db","sg","bh","hs","mt","ds","rg","cn","uut","uuq","uup","uuh","uus","uuo","modes","proxy","mode","ViewPanelSettings","getElementColor","g","rgb","toString","Atom","hover","clicked","click","scale","onPointerOver","onPointerOut","args","wireframe","Line","start","end","useLayoutEffect","geometry","setFromPoints","THREE","Controls","snap","useSnapshot","scene","useThree","TransformControls","object","getObjectByName","OrbitControls","makeDefault","minPolarAngle","maxPolarAngle","UnitCell","uc","Molecule","rotX","rotY","center","bondLocations","useFrame","delta","atomSet","mp","position","symbol","bondSet","Label1","Label2","MoleculeView","camera","fov","PreviewListItem","href","fontSize","PreviewPanel","modalOpened","content","XYAxis","amdx","amdy","xlab","ylab","Root","showContents","setShowContents","dataReady","tags","filtersState","setFiltersState","constant","graphOptions","initialSettings","nodeProgramClasses","getNodeProgramImage","labelRenderer","defaultNodeType","defaultEdgeType","labelDensity","labelGridCellSize","labelRenderedSizeThreshold","minCameraRatio","maxCameraRatio","renderEdgeLabels","ForceWrapper","graphData","nodeAutoColorBy","nodeLabel","ForceDirectedGraph","setData","Set","hoverNode","useCallback","arc","NODE_R","filteredLinks","links","link","filteredData","CompareAppPlotPlaceHolder","CompareAppPlot","comp","SearchResults","SearchSettings","SearchPanel","PreviewList","pl","previews","CompareAppMain","monitorHeight","refreshRate","render","CompareApp","openApp","Plane","gridHelper","MeshBasicMaterial","ViewAppPlaceHolder","PeriodicTable","ViewAppElementSettings","ViewAppCanvas","ViewAppMain","ViewAppTopBar","ViewApp","CreateAppTopBar","tab","getClass","currTab","thisTab","InputField","ph","required","CreateAppCoordinateSwitch","useFract","useCart","active","gcd","prime_comp","composition","counts","matchAll","elems","elem_counts","parseInt","gcd_counts","arr","findGCD","prime_counts","extractCrystalMetaData","cifAsJson","removeTrailing","safeParse","split","extractAtoms","atom","extractBonds","bond","parseFloat","extractUnitCell","symm","_space_group_symop_operation_xyz","total","_symmetry_equiv_pos","_symmetry_equiv_pos_as_xyz","final_symm","InputItem","DataItem","check","AtomRow","_atom_site_label","_atom_site_type_symbol","BondRow","_geom_bond_atom_site_label_1","_geom_bond_atom_site_label_2","_geom_bond_distance","SymmetryRow","_symmetry_equiv_pos_site_id","SymmetryRow2","CreationProgress","message","CreateAppMainCrystal","isFilePicked","setIsFilePicked","isParsed","setIsParsed","setCifAsJson","refCode","setRefCode","polymorph","setPolymorph","disabled","setDisabled","family","setFamily","parseCIF","fileContents","cifParser","changeHandler","file","files","parsed","createCrystal","String","colSpan","_atom_site","_geom_bond","CreateAppMainSubset","setName","refCodes","setRefCodes","refCodeText","setRefCodeText","createSubset","trim","CreateAppMainSource","urlRef","setURLRef","createSource","CreateAppMain","currentlyOpen","CreateApp","AtomTable","Distance","BondTable","UnitCellRow","A","B","C","Alpha","Beta","Gamma","CellVolume","UnitCellTable","SymmetryTable","splitSym","replaceAll","AMDRow","amd","AMDTable","PDDRow","pdd","PDDTable","CrystalAccordionBody","setActive","metricsLoaded","setMetricsLoaded","AMDs","setAMDs","PDDs","setPDDs","getMetrics","ID","charAt","SymmetryOperators","homeSlice","setCreatePanel","handleTickBox","setActiveAccordion","openCrystalCreate","openSubsetCreate","openSourceCreate","closeCrystalCreate","closeSubsetCreate","closeSourceCreate","setCrystalSearchResults","setSourceSearchResults","setSubsetSearchResults","flushCreateCrystal","flushCreateSubset","flushCreateSource","getSelected","getActiveAccordion","getCreateCrystalOpen","getCreateSubsetOpen","getCreateSourceOpen","getCrystalSearchResults","getSubsetSearchResults","getSourceSearchResults","CrystalAccordion","loaded","setLoaded","Form","Check","CreatedAt","SimilarCrystalRow","datum","Polymorph","Source","SimilarCrystalsTable","CrystalCreateAccordion","bodyOpen","setBodyOpen","pickedFile","setPickedFile","setValidRefCode","setMessage","sourceOptions","setSourceOptions","similarCrystals","setSimilarCrystals","getSources","Badge","bg","Group","controlId","Label","Control","variant","SelectedCount","RecentCrystalAccordionList","activeAccordion","CrystalFacetOptions","SourceFacetOptions","SubsetFacetOptions","SearchAccordion","setFacet","setMatchType","orderBy","setOrderBy","aa","inline","HomeAppTopBar","Breadcrumb","Item","CrystalAccordionList","SourceAccordion","SourceCreateAccordion","setType","SourceAccordionList","CrystalRow","Composition","CrystalTable","SubsetAccordion","Name","Crystals","SubsetCreateAccordion","previewData","setPreviewData","rows","SubsetAccordionList","HomeAppMain","HomeApp","ApplicationBay","settingsModalSlice","settingsModalOpened","potentialBackend","backend","openSettingsModal","closeSettingsModal","changePotentialBackend","setNewBackend","getSettingsModalOpened","getPotentialBackend","LeftSideBarButton","buttonIcon","show","hide","Ball","LeftSideBar","Dashboard","CreateCrystalPanel","CreateSourcePanel","CreateSubsetPanel","CreateModal","SettingsModal","potentialEndpoint","handleURLChange","healthCheck","response","ok","error","statusText","Promise","reject","catch","AppHeader","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","openOptionsPanelSlice","viewToggled","compareToggled","databaseToggled","settingsToggled","store","configureStore","reducer","optionsReducer","settingsReducer","authReducer","compareReducer","createReducer","searchReducer","previewReducer","appReducer","viewReducer","homeReducer","TabSelector","isActive","loginUser","credentials","createUser","LoginPage","setToken","useTabs","selectedTab","setSelectedTab","username","setUserName","password","setPassword","newusername","setNewUserName","newpassword","setNewPassword","email","setEmail","handleSubmit","handleCreation","Index","tokenString","getItem","parse","getToken","userToken","clearToken","removeItem","useToken","tokenChecked","setTokenChecked","path","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.46c50475.chunk.js","sourcesContent":["import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    searchPanelOpened: false,\n    currentContent: \"results\",\n    resultSize: 100,\n    facet: \"name\",\n    k: 100,\n    n: 2,\n    results: {\n        \"data\": [],\n        \"loading\": false,\n    },\n    \"compType\": \"standard\",\n    match: \"partial\",\n    searchFor: \"crystal\",\n};\n\nconst searchPanelSlice = createSlice({\n    name: 'searchPanelOpened',\n    initialState,\n    reducers: {\n        openSearchPanel(state, action) {\n            console.log(\"Opening modal\")\n            state[\"searchPanelOpened\"] = true;\n            return state;\n        },\n        closeSearchPanel(state, action) {\n            console.log(\"Closing modal\")\n            state[\"searchPanelOpened\"] = false;\n            return state;\n        },\n        toggleSearchPanel(state, action) {\n          state[\"searchPanelOpened\"] = !state[\"searchPanelOpened\"];\n          return state\n        },\n        changeContent(state, action){\n            console.log(\"Changing content\");\n            state[\"currentContent\"] = action.payload;\n            return state;\n        },\n        change(state, action){\n            return {\n                ...state,\n                ...action.payload\n            };\n        },\n    }\n})\n\nexport const { openSearchPanel, closeSearchPanel, changeContent, change, toggleSearchPanel } = searchPanelSlice.actions\n\nexport default searchPanelSlice.reducer\n\nexport const getSearchPanelOpened = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"searchPanelOpened\"]\n)\n\nexport const getContent = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"currentContent\"]\n)\n\nexport const getK = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"k\"]\n)\nexport const getFacet = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"facet\"]\n)\nexport const getResultSize = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"resultSize\"]\n)\n\nexport const getResults = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"results\"]\n)\n\nexport const getNorm = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"n\"]\n)\n\nexport const getCompType = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"compType\"]\n)\n\nexport const getMatch = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"match\"]\n)\n\nexport const getSearchFor = createSelector((state) => state.searchPanelSlice, (p) =>\n    p[\"searchFor\"]\n)\n","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    \"access\": null,\n    \"refresh\": null,\n    \"user\": null,\n    \"email\": null,\n    \"loggedIn\": false,\n}\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        addAccessToken(state, action) {\n            sessionStorage.setItem('access', action.payload);\n            return {\n                ...state,\n                \"access\": action.payload,\n            };\n        },\n        addRefreshToken(state, action) {\n            sessionStorage.setItem('refresh', action.payload);\n            return {\n                ...state,\n                \"refresh\": action.payload,\n            };\n        },\n        addUser(state, action) {\n            return {\n                ...state,\n                \"user\": action.payload,\n            }\n        },\n        setLoggedIn(state, action) {\n            return {\n                ...state,\n                ...action.payload\n            }\n        }\n    }\n})\n\nexport const { setLoggedIn, addUser, addAccessToken, addRefreshToken } = authSlice.actions\n\nexport default authSlice.reducer\n\nexport const getAccessToken = createSelector((state) => state.authSlice, (p) => {\n    return p['access']\n})\n\nexport const getRefreshToken = createSelector((state) => state.authSlice, (p) => {\n    return p['refresh']\n})\n\nexport const getCurrentUser = createSelector((state) => state.authSlice, (p) =>\n    p[\"user\"]\n)\n\nexport const getLoggedIn = createSelector((state) => state.authSlice, (p) =>\n    p[\"loggedIn\"]\n)","import {useDispatch, useSelector} from \"react-redux\";\nimport React, {useState} from \"react\";\nimport {\n    change,\n    changeContent,\n    getCompType,\n    getFacet,\n    getK, getMatch,\n    getNorm,\n    getResultSize,\n    openSearchPanel\n} from \"../../features/search/searchSlice\";\nimport {\n    addAccessToken,\n    addRefreshToken,\n    getAccessToken,\n    getCurrentUser,\n    getRefreshToken\n} from \"../../features/auth/authSlice\";\nimport {FaSearch} from \"react-icons/fa\";\nimport \"./search.scss\"\n\nexport const SearchBar = () => {\n    const dispatch = useDispatch()\n    const [query, setQuery] = useState('')\n\n    let facet = useSelector(getFacet)\n    let token = useSelector(getAccessToken)\n    let k = useSelector(getK)\n    let resSize = useSelector(getResultSize)\n    let n = useSelector(getNorm)\n    let compType = useSelector(getCompType)\n    let refreshToken = useSelector(getRefreshToken)\n    let user = useSelector(getCurrentUser)\n    let matchType = useSelector(getMatch)\n    console.log(`Match is ${matchType}`)\n\n    async function search() {\n        console.log(\"doing something\")\n        fetch(\"/api/token/refresh\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\"refresh\": refreshToken})\n        })\n            .then((resp) => {\n                if (resp.status !== 200) {\n                    sessionStorage.clear()\n                    dispatch(addAccessToken(undefined))\n                    dispatch(addRefreshToken(undefined))\n                    window.location.reload()\n                } else {\n                    resp.json()\n                        .then((r) => {\n                            console.log(r)\n                            let jwt = {\n                                \"access\": r.access,\n                                \"refresh\": r.refresh,\n                                \"user\": user\n                            }\n                            sessionStorage.setItem('token', JSON.stringify(jwt))\n                            dispatch(addAccessToken(jwt[\"access\"]))\n                            dispatch(addRefreshToken(jwt[\"refresh\"]))\n                        })\n                }\n            })\n\n        return fetch(`/api/search/crystal/${facet}/${query}?match=${matchType}&result_size=${resSize}&k=${k}&n=${n}&comp=${compType}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer:${token}`,\n            },\n        })\n            .then(data => data.json())\n    }\n\n\n    const fetchResults = async(e) => {\n        e.preventDefault();\n        dispatch(change({\"results\": {'data': [], 'loading': true}}))\n        dispatch(changeContent(\"results\"))\n        const res = await search(query, facet, k, resSize, n, compType, token)\n        dispatch(change({\"results\": {'data': res.data, 'loading': false}}))\n    }\n\n    return (\n        <div className=\"search-bar\">\n            <form onSubmit={fetchResults}>\n                <input className={\"search-query\"}  placeholder={\"Search\"}\n                       onChange={e => setQuery(e.target.value)}\n                       onFocus={() => dispatch(openSearchPanel(\"\"))} />\n            </form>\n        </div>\n    )\n}","import { createSlice, createSelector, current } from '@reduxjs/toolkit'\n\nconst initialState = {\n    \"data\": [],\n    \"rendering\": false,\n    \"graphtype\": \"amd\",\n    \"k\": 100,\n    \"measure\": \"pdd\",\n    \"threshold\": 5,\n    \"filtered\": false,\n    \"k_x\": 1,\n    \"k_y\": 2,\n    \"ks\": [1,10,100,100],\n    \"thresholds\":[0.01, 0.02, 0.05, 0.1],\n    \"linkage\": \"single\",\n    \"camera\": {},\n    \"box\": {\"x0\": 0, \"x1\": 0, \"y0\": 0, \"y1\":0},\n    \"breakout\": \"family\",\n    \"menuOpen\": false,\n    \"previewListOpen\": false,\n    \"previewList\": [],\n    \"crystalListOpen\": false,\n    \"clusterPanelOpen\": true,\n    \"searchFieldOpen\": true,\n}\n\nconst compareSlice = createSlice({\n    name: 'comp',\n    initialState,\n    reducers: {\n        addComp(state, action) {\n            let newState = state[\"data\"]\n            if (!state[\"data\"].includes(action.payload))\n                newState = state[\"data\"].concat([action.payload])\n\n            return {\n                ...state,\n                \"data\": newState\n            };\n        },\n        addComps(state, action) {\n            let newState = state[\"data\"]\n            for (let i = 0; i < action.payload.length; i++) {\n                if (!state[\"data\"].includes(action.payload[i]))\n                    newState = newState.concat([action.payload[i]])\n            }\n            return {\n                ...state,\n                \"data\": newState\n            };\n        },\n        removeComp(state, action) {\n            return {\n                ...state,\n                \"data\": state[\"data\"].filter(x => x !== action.payload)\n\n            };\n        },\n        clearComp(state, action){\n            return {\n                ...state,\n                \"data\": []\n            };\n        },\n        setGraphType(state, action) {\n            const gt  = action.payload\n            return {\n              ...state,\n              \"graphtype\": gt\n            };\n        },\n        setMeasure(state, action) {\n            return {\n                ...state,\n                \"measure\": action.payload\n            }\n        },\n        setK(state, action) {\n            return {\n                ...state,\n                \"k\": Number(action.payload)\n            }\n        },\n        setKx(state, action) {\n            return {\n                ...state,\n                \"k_x\": Number(action.payload)\n            }\n        },\n        setKy(state, action) {\n            return {\n                ...state,\n                \"k_y\": Number(action.payload)\n            }\n        },\n        setThreshold(state, action) {\n            return {\n                ...state,\n                \"filtered\": false,\n                \"threshold\": Number(action.payload)\n            }\n        },\n        setFiltered(state, action) {\n            return {\n                ...state,\n                \"filtered\": true,\n            }\n        },\n        setMaxThreshold(state, action) {\n            return {\n                ...state,\n                \"max_threshold\": Number(action.payload)\n            }\n        },\n        setThresholds(state, action) {\n            return {\n                ...state,\n                \"thresholds\": action.payload\n            }\n        },\n        setKs(state, action) {\n            return {\n                ...state,\n                \"ks\": action.payload\n            }\n        },\n        setLinkage(state, action) {\n            return {\n                ...state,\n                \"linkage\": action.payload\n            }\n        },\n        setRendering(state, action) {\n            return {\n                ...state,\n                \"rendering\": action.payload\n            }\n        },\n        setCamera(state, action) {\n            return {\n                ...state,\n                \"camera\": action.payload,\n            }\n        },\n        setBox(state, action) {\n            return {\n                ...state,\n                \"box\": action.payload,\n            }\n        },\n        setMenuOpen(state, action) {\n            return {\n                ...state,\n                \"menuOpen\": action.payload,\n            }\n        },\n        toggleMenu(state, action){\n            state[\"menuOpen\"] = !state[\"menuOpen\"]\n            return state\n        },\n        togglePreviewList(state, action){\n            state[\"previewListOpen\"] = !state[\"previewListOpen\"]\n            return state\n        },\n        openPreviewList(state, action){\n            state[\"previewListOpen\"] = true\n            return state\n        },\n        toggleCrystalList(state, action){\n            state[\"crystalListOpen\"] = !state[\"crystalListOpen\"]\n            return state\n        },\n        addToPreviewList(state, action) {\n            let newState = state[\"previewList\"]\n            if (!state[\"previewList\"].includes(action.payload))\n                newState = state[\"previewList\"].concat([action.payload])\n\n            return {\n                ...state,\n                \"previewList\": newState\n            };\n        },\n        removeFromPreviewList(state, action) {\n            return {\n                ...state,\n                \"previewList\": state[\"previewList\"].filter(x => x !== action.payload)\n            };\n        },\n        toggleSearchField(state, action){\n            state[\"searchFieldOpen\"] = !state[\"searchFieldOpen\"]\n            return state\n        },\n        toggleClusterPanel(state, action){\n            state[\"clusterPanelOpen\"] = !state[\"clusterPanelOpen\"]\n            return state\n        },\n        setBreakout(state, action) {\n            state[\"breakout\"] = action.payload\n            return state\n        }\n    }\n})\n\nexport const { addComp, addComps, removeComp, setGraphType, clearComp, setK, setKx, setKy,\n            setMeasure, setThreshold, setMaxThreshold, setThresholds, setKs, setLinkage,\n            setRendering, setCamera, setBox, setMenuOpen, toggleMenu, togglePreviewList,\n            toggleCrystalList, removeFromPreviewList, addToPreviewList, openPreviewList,\n            toggleClusterPanel, toggleSearchField, setBreakout} = compareSlice.actions\n\nexport default compareSlice.reducer\n\nexport const getComp = createSelector((state) => state.compareSlice, (p) =>\n    p[\"data\"]\n)\n\nexport const isRendering = createSelector((state) => state.compareSlice, (p) => p[\"rendering\"])\n\nexport const getGraphType = createSelector((state) => state.compareSlice, (p) => p[\"graphtype\"])\n\nexport const getK = createSelector((state) => state.compareSlice, (p) => p[\"k\"])\nexport const getKx = createSelector((state) => state.compareSlice, (p) => p[\"k_x\"])\nexport const getKy = createSelector((state) => state.compareSlice, (p) => p[\"k_y\"])\nexport const getMeasure = createSelector((state) => state.compareSlice, (p) => p[\"measure\"])\nexport const getThreshold = createSelector((state) => state.compareSlice, (p) => p[\"threshold\"])\nexport const getMaxThreshold = createSelector((state) => state.compareSlice, (p) => p[\"max_threshold\"])\nexport const getThresholds = createSelector((state) => state.compareSlice, (p) => p[\"thresholds\"])\nexport const getKs = createSelector((state) => state.compareSlice, (p) => p[\"ks\"])\nexport const getLinkage = createSelector((state) => state.compareSlice, (p) => p[\"linkage\"])\nexport const getCamera = createSelector((state) => state.compareSlice, (p) => p[\"camera\"])\nexport const getBox = createSelector((state) => state.compareSlice, (p) => p[\"box\"])\nexport const getMenuOpen = createSelector((state) => state.compareSlice, (p) => p[\"menuOpen\"])\nexport const getPreviewList = createSelector((state) => state.compareSlice, (p) => p[\"previewList\"])\nexport const getPreviewListOpen = createSelector((state) => state.compareSlice, (p) => p[\"previewListOpen\"])\nexport const getSearchFieldOpen = createSelector((state) => state.compareSlice, (p) => p[\"searchFieldOpen\"])\nexport const getClusterPanelOpen = createSelector((state) => state.compareSlice, (p) => p[\"clusterPanelOpen\"])\nexport const getCrystalListOpen = createSelector((state) => state.compareSlice, (p) => p[\"crystalListOpen\"])\nexport const getBreakout = createSelector((state) => state.compareSlice, (p) => p[\"breakout\"])\n","import React from \"react\";\nimport {change, getFacet} from \"../../features/search/searchSlice\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\n\nexport const SearchFacetSettings = () => {\n    let dispatch = useDispatch()\n    let facet = useSelector(getFacet)\n\n    const changeFacet = (e) => {\n        dispatch(change({\"facet\": e.target.value}))\n        dispatch(change({\"results\": {'data': [], 'loading': false}}))\n    }\n\n    return (\n        <select name=\"By:\" className=\"search-facet\" value={facet} onChange={ e => changeFacet(e)}>\n            <option value=\"name\">Reference Code</option>\n            <option value=\"similarity\">Distance</option>\n            <option value=\"subset\">Subset</option>\n            <option value=\"composition\">Composition</option>\n        </select>\n    )\n}","import * as React from \"react\";\nimport './Compare.scss'\nimport {SearchBar} from \"../search/SearchBar\";\nimport {openSearchPanel, toggleSearchPanel} from \"../../features/search/searchSlice\";\nimport {useDispatch} from \"react-redux\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ListIcon from \"@mui/icons-material/List\";\nimport SettingsIcon from \"@mui/icons-material/Settings\";\nimport PreviewIcon from \"@mui/icons-material/Preview\";\nimport DeleteIcon from \"@mui/icons-material/Delete\"\nimport WorkspacesIcon from \"@mui/icons-material/Workspaces\"\nimport ManageSearchIcon from \"@mui/icons-material/ManageSearch\"\nimport {toggleCrystalList, toggleMenu, togglePreviewList, clearComp, toggleClusterPanel, toggleSearchField} from \"../../features/compare/compareSlice\";\nimport {SearchFacetSettings} from \"../search/SearchFacetSettings\";\nimport {OverlayTrigger, Tooltip} from \"react-bootstrap\";\n\n\nexport function CompareAppTopBar() {\n    const dispatch = useDispatch()\n\n    const testOpen = () => {\n        console.log(\"opening panel\")\n    }\n\n    return (\n        <>\n            <div className=\"compare-app-top-bar\">\n                <div className={\"left-content\"}>\n                    <OverlayTrigger\n                        key={\"search-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"search-toggle-tooltip\">\n                                Search\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(toggleSearchPanel(\"\"))}>\n                            <SearchIcon/>\n                        </button>\n                    </OverlayTrigger>\n                    <SearchBar/>\n                    <p>by:</p>\n                    <SearchFacetSettings/>\n                </div>\n                <div className={\"right-content\"}>\n                    <OverlayTrigger\n                        key={\"search-graph-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"search-graph-toggle-tooltip\">\n                                Toggle Search Panel\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(toggleSearchField(\"\"))}>\n                            <ManageSearchIcon/>\n                        </button>\n                    </OverlayTrigger>\n\n                    <OverlayTrigger\n                        key={\"clusters-graph-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"cluster-graph-toggle-tooltip\">\n                                Toggle Clusters Panel\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(toggleClusterPanel(\"\"))}>\n                            <WorkspacesIcon/>\n                        </button>\n                    </OverlayTrigger>\n                    <OverlayTrigger\n                        key={\"molview-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"molview-toggle-tooltip\">\n                                Molecule View\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(togglePreviewList(\"\"))}>\n                            <PreviewIcon/>\n                        </button>\n                    </OverlayTrigger>\n\n                    <OverlayTrigger\n                        key={\"curcomp-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"cucomp-toggle-tooltip\">\n                                Current Comparison\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(toggleCrystalList(\"\"))}>\n                            <ListIcon/>\n                        </button>\n                    </OverlayTrigger>\n\n                    <OverlayTrigger\n                        key={\"options-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"option-toggle-tooltip\">\n                                Menu\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(toggleMenu(true))}>\n                            <SettingsIcon/>\n                        </button>\n                    </OverlayTrigger>\n\n                    <OverlayTrigger\n                        key={\"trash-bottom\"}\n                        placement=\"bottom\"\n                        overlay={\n                            <Tooltip id=\"trash-tooltip\">\n                                Remove All\n                            </Tooltip>\n                        }\n                    >\n                        <button onClick={() => dispatch(clearComp(true))}>\n                            <DeleteIcon/>\n                        </button>\n                    </OverlayTrigger>\n\n                </div>\n            </div>\n        </>\n    )\n}\n","import * as React from \"react\";\nimport './Compare.scss'\nimport '../../App.scss'\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    getMeasure,\n    getThreshold,\n    setK,\n    setMeasure,\n    setThreshold,\n    getK,\n    getMaxThreshold,\n    getKx,\n    getKy,\n    setKx,\n    setKy, setLinkage, getKs, setKs, getThresholds, setThresholds, getGraphType\n} from \"../../features/compare/compareSlice\";\nimport {Button, ButtonGroup} from \"react-bootstrap\";\n\n\n\nfunction GraphControls(){\n    const dispatch = useDispatch()\n    let threshold = useSelector(getThreshold)\n    let k = useSelector(getK)\n    let measure = useSelector(getMeasure)\n    let maxThresh = useSelector(getMaxThreshold)\n\n    return (\n        <>\n            <p>{`Nearest Neighbors: ${k}`}</p>\n            <input type=\"range\" id=\"k\" name=\"k\" onChange={e => dispatch(setK(e.target.value))}\n                   min=\"1\" max=\"200\" value={k} step=\"1\" className={\"range-style\"} />\n            <p>{`Edge Threshold: ${threshold.toFixed(6)}`}</p>\n            <input type=\"range\" id=\"threshold\" name=\"threshold\"\n                   onChange={e => dispatch(setThreshold(e.target.value))}\n                   min=\"0\" max={maxThresh} value={threshold} step={maxThresh / 100} className={\"range-style\"}  />\n            <p>{`Measure: ${measure.toUpperCase()}`}</p>\n            <ButtonGroup aria-label=\"Basic example\" style={{\"width\": \"100%\"}}>\n                <Button className=\"graph-control-button\" style={{\"fontSize\": \"13px\"}}\n                        onClick={() => dispatch(setMeasure(\"pdd\"))}>PDD</Button>\n                <Button className=\"graph-control-button\" style={{\"fontSize\": \"13px\"}}\n                        onClick={() => dispatch(setMeasure(\"amd\"))}>AMD</Button>\n            </ButtonGroup>\n        </>\n    )\n}\n\nfunction ThresholdSettings() {\n    return (\n        <>\n            <GraphControls/>\n        </>\n    )\n}\n\n\nfunction MSTSettings() {\n    return (\n        <>\n            <GraphControls/>\n        </>\n    )\n}\n\nfunction DendrogramSettings() {\n    return (\n        <>\n            <p>Dendrogram</p>\n        </>\n    )\n}\n\nfunction MapSettings() {\n    return (\n        <>\n            <GraphControls/>\n\n        </>\n    )\n}\n\nfunction CircleControls() {\n    const dispatch = useDispatch()\n    let ks = useSelector(getKs)\n    let thresholds = useSelector(getThresholds)\n\n    const replaceKs = (val, ind) => {\n        let kscopy = [...ks]\n        kscopy[ind] = val\n        dispatch(setKs(kscopy))\n    }\n\n    const replaceThresholds = (val, ind) => {\n        let thresholds_copy = [...thresholds]\n        thresholds_copy[ind] = val\n        dispatch(setThresholds(thresholds_copy))\n    }\n\n    return  (\n        <>\n            <p>{`Linkage:`}</p>\n            <select name=\"Linkage:\" id=\"linkage-select\" onChange={ e => dispatch(setLinkage(e.target.value))}>\n                <option value=\"single\">Single</option>\n                <option value=\"average\">Average</option>\n                <option value=\"complete\">Complete</option>\n            </select>\n            <p>{`Layer Nearest-Neighbors: ${ks}`}</p>\n            <input type=\"range\" id=\"ks1\" name=\"ks1\" onChange={e => replaceKs(e.target.value, 0)}\n                   min=\"1\" max=\"1000\" value={ks[0]} step=\"1\" className={\"range-style\"}  />\n            <input type=\"range\" id=\"ks2\" name=\"ks2\" onChange={e => replaceKs(e.target.value, 1)}\n                   min=\"1\" max=\"1000\" value={ks[1]} step=\"1\" className={\"range-style\"} />\n            <input type=\"range\" id=\"ks3\" name=\"ks3\" onChange={e => replaceKs(e.target.value, 2)}\n                   min=\"1\" max=\"1000\" value={ks[2]} step=\"1\" className={\"range-style\"} />\n            <input type=\"range\" id=\"ks4\" name=\"ks4\" onChange={e => replaceKs(e.target.value, 3)}\n                   min=\"1\" max=\"1000\" value={ks[3]} step=\"1\" className={\"range-style\"} />\n            <p>{`Layer Distance Threshold: ${thresholds}`}</p>\n            <input type=\"range\" id=\"threshold1\" name=\"threshold1\" onChange={e => replaceThresholds(e.target.value, 0)}\n                   min=\"0.001\" max=\"1\" value={thresholds[0]} step=\"0.001\" className={\"range-style\"} />\n            <input type=\"range\" id=\"threshold2\" name=\"threshold2\" onChange={e => replaceThresholds(e.target.value, 1)}\n                   min=\"0.001\" max=\"1\" value={thresholds[1]} step=\"0.001\" className={\"range-style\"} />\n            <input type=\"range\" id=\"threshold3\" name=\"threshold3\" onChange={e => replaceThresholds(e.target.value, 2)}\n                   min=\"0.001\" max=\"1\" value={thresholds[2]} step=\"0.001\" className={\"range-style\"} />\n            <input type=\"range\" id=\"threshold4\" name=\"threshold4\" onChange={e => replaceThresholds(e.target.value, 3)}\n                   min=\"0.001\" max=\"1\" value={thresholds[3]} step=\"0.001\" className={\"range-style\"} />\n\n        </>\n    )\n}\n\nconst AMDSettings = () => {\n    return (\n        <AMDControls/>\n    )\n}\n\n\nfunction AMDControls() {\n    const dispatch = useDispatch()\n    let k_x = useSelector(getKx)\n    let k_y = useSelector(getKy)\n    let maxThresh = useSelector(getMaxThreshold)\n    let threshold = useSelector(getThreshold)\n    let k = useSelector(getK)\n\n    return  (\n        <>\n            <p>{`X-Axis: AMD ${k_x}`}</p>\n            <input type=\"range\" id=\"k_x\" name=\"k_x\" onChange={e => dispatch(setKx(e.target.value))}\n                   min=\"1\" max=\"200\" value={k_x} step=\"1\" className={\"range-style\"} />\n            <p>{`Y-Axis: AMD ${k_y}`}</p>\n            <input type=\"range\" id=\"k_y\" name=\"k_y\" onChange={e => dispatch(setKy(e.target.value))}\n                   min=\"1\" max=\"200\" value={k_y} step=\"1\" className={\"range-style\"} />\n            <p>{`Edge Nearest Neighbors: ${k}`}</p>\n            <input type=\"range\" id=\"k\" name=\"k\" onChange={e => dispatch(setK(e.target.value))}\n                   min=\"1\" max=\"200\" value={k} step=\"1\" className={\"range-style\"} />\n            <p>{`Edge Threshold: ${threshold.toFixed(6)}`}</p>\n            <input type=\"range\" id=\"threshold\" name=\"threshold\"\n                   onChange={e => dispatch(setThreshold(e.target.value))}\n                   min=\"0\" max={maxThresh} value={threshold} step={maxThresh / 100} className={\"range-style\"}  />\n        </>\n    )\n}\n\n\nconst CircleSettings = () => {\n    return (\n        <CircleControls/>\n    )\n}\n\nconst ForceSettings = () => {\n    return (\n        <GraphControls/>\n    )\n}\n\nconst PMFGSettings = () => {\n    return (\n        <GraphControls/>\n    )\n}\n\nconst KKGSettings = () => {\n    return (\n        <GraphControls/>\n    )\n}\n\nconst settingsMap = {\"mst\": MSTSettings(),\n                            \"full\": ThresholdSettings(),\n                            \"dendrogram\": DendrogramSettings(),\n                            \"map\": MapSettings(),\n                            \"amd\": AMDSettings(),\n                            \"circle\": CircleSettings(),\n                            \"sunburst\": CircleSettings(),\n                            \"force\": ForceSettings(),\n                            \"pmfg\": PMFGSettings(),\n                            \"kkg\": KKGSettings(),\n}\n\nexport const CompareAppMenuSettings = () => {\n    let plotType = useSelector(getGraphType)\n    console.log(plotType)\n    return (\n        <>\n            {settingsMap[plotType]}\n        </>\n    )\n}","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    \"openApp\": \"home\",\n    \"width\": 0,\n    \"height\": 0,\n}\n\nconst appSlice = createSlice({\n    name: 'openApplication',\n    initialState,\n    reducers: {\n        openViewApp(state, action) {\n            state[\"openApp\"] = \"view\"\n            return state;\n        },\n        openCompareApp(state, action) {\n            state[\"openApp\"] = \"compare\"\n            return state;\n        },\n        openCreateApp(state, action) {\n            state[\"openApp\"] = \"create\"\n            return state\n        },\n        setSize(state, action) {\n            state[\"width\"] = action.payload.width\n            state[\"height\"] = action.payload.height\n            return state\n        },\n        openHomeApp(state, actions) {\n            state[\"openApp\"] = \"home\"\n            return state\n        }\n    }\n})\n\nexport const { openCompareApp, openViewApp, openCreateApp, setSize, openHomeApp } = appSlice.actions\n\nexport default appSlice.reducer\n\nexport const getOpenApp = createSelector((state) => state.appSlice, (p) =>\n    p[\"openApp\"]\n)\n\nexport const getWidth = createSelector((state) => state.appSlice, (p) =>\n    p[\"width\"]\n)\n\nexport const getHeight = createSelector((state) => state.appSlice, (p) =>\n    p[\"height\"]\n)","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    currentObject: undefined,\n    menuOpen: false,\n};\n\nconst viewSlice = createSlice({\n    name: 'previewOpened',\n    initialState,\n    reducers: {\n        addView(state, action) {\n            state[\"currentObject\"] = action.payload;\n            return state;\n        },\n        change(state, action){\n            return {\n                ...state,\n                ...action.payload\n            };\n        },\n        setMenuOpen(state, action) {\n            return {\n                ...state,\n                \"menuOpen\": action.payload,\n            }\n        },\n        toggleMenu(state, action) {\n            state[\"menuOpen\"] = !state[\"menuOpen\"]\n            return state;\n        }\n    }\n})\n\nexport const { change, addView, setMenuOpen, toggleMenu } = viewSlice.actions\n\nexport default viewSlice.reducer\n\nexport const getViewObject = createSelector((state) => state.viewSlice, (p) =>\n    p[\"currentObject\"]\n)\n\nexport const getMenuOpen = createSelector((state) => state.viewSlice, (p) => p[\"menuOpen\"])\n\n\n\n","\n\n\nexport const QueryResultDropdownData = ({label, value}) => {\n    let value_result = \"N/A\"\n    if (value !== undefined)\n        value_result = value\n\n    if (value === \"\")\n        value_result = \"None\"\n\n    if (value === true)\n        value_result = \"True\"\n\n    if (value === false)\n        value_result = \"False\"\n\n    return  (\n        <div className={\"query-result-dropdown-data\"}>\n            <p className={\"query-result-dropdown-data-label\"}>{label}</p>\n            <p className={\"query-result-dropdown-data-value\"}>{value_result}</p>\n        </div>\n    )\n}","import React, {useState} from 'react'\nimport {FaPlus} from \"react-icons/fa\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {addComp, addComps} from \"../../features/compare/compareSlice\";\nimport {BsChevronRight, BsChevronDown} from \"react-icons/all\";\nimport {getCompType, getFacet} from \"../../features/search/searchSlice\";\nimport {getOpenApp} from \"../../features/app/appSlice\";\nimport {addView} from \"../../features/view/viewSlice\";\nimport {QueryResultDropdownData} from \"./QueryResultDropdownData\";\nimport BlockIcon from \"@mui/icons-material/Block\"\nimport AddIcon from \"@mui/icons-material/Add\"\nimport cx from \"classnames\"\nimport \"./search.scss\"\nimport {getAccessToken} from \"../../features/auth/authSlice\";\n\n\nasync function getFamily(e, token) {\n    let name = e.target.id.replace(\"-add-family-button\", \"\")\n    return fetch(`/api/compare/family/${name}`, {\n        headers: {\n            'Authorization': `Bearer:${token}`,\n            'Content-Type': 'application/json'\n        },\n    })\n        .then(data => data.json())\n}\n\nasync function getSubset(name, token) {\n    return fetch(`/api/subset/${name}`, {\n        headers: {\n            'Authorization': `Bearer: ${token}`,\n            'Content-Type': 'application/json'\n        },\n    })\n        .then(data => data.json())\n}\n\nexport function QueryResult({data}) {\n    let currentApp = useSelector(getOpenApp)\n    const dispatch = useDispatch()\n    const [name, setName] = useState(data[\"name\"])\n    let token = useSelector(getAccessToken)\n\n\n    const addCrystal = (e) => {\n        if (currentApp === \"compare\") {\n            if (data[\"Has3dStructure\"] && !data[\"IsDisordered\"]) {\n                dispatch(addComp(name))\n            }\n        } else if (currentApp === \"view\") {\n            if (data[\"Has3dStructure\"]) {\n                dispatch(addView(name))\n            }\n        }\n    }\n\n    const addSubset = async(name) => {\n        const res = await getSubset(name, token)\n        dispatch(addComps(res[\"names\"]))\n    }\n\n\n    const [open, setOpen] = useState(false)\n\n    const addFamily = async(e) => {\n        const res = await getFamily(e, token)\n        dispatch(addComps(res[\"names\"]))\n    }\n\n    let dis = open ? \"block\" : \"none\"\n    let type = useSelector(getFacet)\n    let compType = useSelector(getCompType)\n\n    let addButton = <button id={data[\"name\"] + \"-add-button\"} className={\"query-result-quick-add-button\"} onClick={e => addCrystal(e)}>\n        <AddIcon/>\n    </button>\n\n    if (currentApp === \"compare\") {\n        if (!data[\"Has3dStructure\"] || data[\"IsDisordered\"]){\n            addButton  = <button className={\"query-result-quick-add-button\"}>\n                <BlockIcon/>\n            </button>\n        }\n    } else if (currentApp === \"view\") {\n        if (!data[\"Has3dStructure\"]){\n            addButton  = <button className={\"query-result-quick-add-button\"}>\n                <BlockIcon/>\n            </button>\n        }\n    }\n\n\n    let dropdown =  <div id={data[\"name\"] + \"-dropdown\"} className={\"query-result-dropdown\"}  style={{'display': dis}}>\n        <QueryResultDropdownData label={\"Composition:\"} value={data[\"Composition\"]}/>\n        <QueryResultDropdownData label={\"Prime Composition:\"} value={data[\"PrimeComposition\"]}/>\n        <QueryResultDropdownData label={\"Chemical Name:\"} value={data[\"ChemicalName\"]}/>\n        <QueryResultDropdownData label={\"Polymorph:\"} value={data[\"Polymorph\"]}/>\n        <QueryResultDropdownData label={\"Has 3D Structure:\"} value={data[\"Has3dStructure\"]}/>\n        <QueryResultDropdownData label={\"Is Disordered:\"} value={data[\"IsDisordered\"]}/>\n        <div className={\"query-result-dropdown-button-row\"}>\n            <button id={data[\"name\"] + \"-add-crystal-button\"}\n                    className={cx(\"query-result-dropdown-button\", {\"disabled\": !data[\"Has3dStructure\"] || (data[\"IsDisordered\"] && currentApp === \"compare\")})}\n                    onClick={() => addCrystal()}>\n                Add Crystal\n            </button>\n            <button id={data[\"name\"] + \"-add-family-button\"} className={\"query-result-dropdown-button\"} onClick={e => addFamily(e)}>\n                Add Family\n            </button>\n        </div>\n    </div>\n\n\n    if (type === \"subset\") {\n        return (\n            <div className=\"query-result\" id={data[\"name\"] + \"-result\"} >\n                <h5 className={\"query-result-name\"} style={{\"font-size\":\"15px\"}}>{`${data[\"name\"]}`}</h5>\n                <h6 className={\"query-result-id\"}>{`Entries: ${data[\"entries\"]}`}</h6>\n                <button id={data[\"name\"] + \"-add-button\"} className={\"query-result-quick-add-button\"} onClick={() => addSubset(data[\"name\"])}>\n                    <AddIcon/>\n                </button>\n            </div>\n        )\n    } else if (type === \"name\") {\n        return (\n            <div id={data[\"name\"] + \"-accordion\"} className={\"query-result-accordion\"}>\n                <div className=\"query-result\" id={data[\"name\"] + \"-result\"} >\n                    <button id={data[\"name\"] + \"-open-button\"} className={\"query-result-open-button\"} onClick={() => setOpen(!open)}>\n                        {open ? <BsChevronDown /> : <BsChevronRight/>}\n                    </button>\n                    <h4 className={\"query-result-name\"}>{data[\"name\"]}</h4>\n                    <h6 className={\"query-result-id\"}>{data[\"family\"]}</h6>\n                    <p className={\"query-result-source\"}>{data[\"Source\"][\"name\"]}</p>\n                    {addButton}\n                </div>\n                {dropdown}\n            </div>\n        )\n    } else if (type === \"similarity\") {\n        return (\n            <div id={data[\"name\"] + \"-accordion\"} className={\"query-result-accordion\"}>\n                <div className=\"query-result\" id={data[\"name\"] + \"-result\"} >\n                    <button id={data[\"name\"] + \"-open-button\"} className={\"query-result-open-button\"} onClick={() => setOpen(!open)}>\n                        {open ? <BsChevronDown /> : <BsChevronRight/>}\n                    </button>\n                    <div className=\"query-result-name-with-sim\">\n                        <h4>{data[\"name\"]}</h4>\n                        <p>{`Distance: ${data[\"Distance\"].toFixed(6)}`}</p>\n                    </div>\n                    <h6 className={\"query-result-id\"}>{data[\"family\"]}</h6>\n                    <p className={\"query-result-source\"}>{data[\"Source\"][\"name\"]}</p>\n                    {addButton}\n                </div>\n                {dropdown}\n            </div>\n        )\n    } else if (type === \"composition\") {\n        let k = \"Composition\"\n        if (compType === \"coprime\"){\n            k = \"PrimeComposition\"\n        }\n        return (\n            <div id={data[\"name\"] + \"-accordion\"} className={\"query-result-accordion\"}>\n                <div className=\"query-result\" id={data[\"name\"] + \"-result\"} >\n                    <button id={data[\"name\"] + \"-open-button\"} className={\"query-result-open-button\"} onClick={() => setOpen(!open)}>\n                        {open ? <BsChevronDown /> : <BsChevronRight/>}\n                    </button>\n                    <div className=\"query-result-name-with-sim\">\n                        <h4>{data[\"name\"]}</h4>\n                        <p>{`${data[k]}`}</p>\n                    </div>\n                    <h6 className={\"query-result-id\"}>{data[\"family\"]}</h6>\n                    <p className={\"query-result-source\"}>{data[\"Source\"][\"name\"]}</p>\n                    {addButton}\n                </div>\n                {dropdown}\n            </div>\n        )\n    }\n\n}","import * as React from \"react\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getComp, removeComp, getCrystalListOpen} from \"../../features/compare/compareSlice\";\nimport {FaMinus} from \"react-icons/fa\";\nimport {QueryResult} from \"./QueryResult\";\nimport cx from \"classnames\"\nimport {openSearchPanel} from \"../../features/search/searchSlice\";\n\n\nexport function AddedQueryResult(cname) {\n    const dispatch = useDispatch()\n    const addToComparison = (e) => {\n        console.log(e.target.id);\n        let name = e.target.id.replace(\"-remove-button\", \"\")\n        dispatch(removeComp(name))\n    }\n\n    return (\n        <div className=\"query-result-added\" id={cname + \"-result-added\"}>\n            <h4 className={\"query-result-name\"}>{cname}</h4>\n            <button id={cname + \"-remove-button\"} className={\"query-result-remove-button\"} onClick={e => addToComparison(e)}>\n                -\n            </button>\n        </div>\n    )\n}\n\n\nexport function CrystalList({}) {\n    const currentComp = useSelector(getComp)\n    let open = useSelector(getCrystalListOpen)\n    const endRef = useRef(null)\n    const [filter, setFilter] = useState(\"\")\n\n    const scrollToBottom = () => {\n        endRef.current?.scrollIntoView({ behavior: \"smooth\" })\n    }\n\n    let filtered = currentComp\n    if (filter !== \"\"){\n        filtered = currentComp.filter(function (str) {\n            let output = str.toLowerCase().indexOf(filter.toLowerCase()) >= 0;\n            console.log(`Compare ${str} to ${filter}, result is ${output}`)\n            return output\n        });\n    }\n    const numberOfResults = Math.min(200, filtered.length)\n    let resultsToRender = filtered.slice(0, numberOfResults)\n\n    console.log(`Results: ${resultsToRender}`)\n    useEffect(() => {\n        scrollToBottom()\n    }, [currentComp]);\n\n    return (\n        <div id=\"current-crystal-list\" className={cx(\"crystal-list\", {\"open\": open})}>\n            <input className={\"top-filter\"}  placeholder={\"Filter\"}\n                   onChange={e => setFilter(e.target.value)} />\n            {resultsToRender.map(AddedQueryResult)}\n            <div ref={endRef} />\n        </div>\n    )\n}\n","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    readingFile: false,\n    createModalOpened: false,\n    currentTab: \"crystal\",\n    newSubsetName: \"\",\n    newSubsetItems: [],\n    crystal: {},\n    atoms: [],\n    bonds: [],\n    setSymmetry: \"\",\n    unitCell: {},\n    setIsDisordered: false,\n    currentMessage: \"\",\n    source: \"\",\n    status: undefined,\n    coordinateSystem: \"fract\",\n    sourceStatus: undefined,\n    subsetStatus: undefined,\n    sourceMessage: \"\",\n    subsetMessage: \"\",\n};\n\nconst createModalSlice = createSlice({\n    name: 'createModalOpened',\n    initialState,\n    reducers: {\n        openCreateModal(state, action) {\n            //  This \"mutating\" code is okay inside of createSlice!\n            state[\"createModalOpened\"] = true;\n            return state;\n        },\n        toggleCreateModal(state, action) {\n            state[\"createModalOpened\"] = !state[\"createModalOpened\"];\n            return state;\n        },\n        closeCreateModal(state, action) {\n            //  This \"mutating\" code is okay inside of createSlice!\n            state[\"createModalOpened\"] = false;\n            return state;\n        },\n        setTab(state, action) {\n            state[\"currentTab\"] = action.payload;\n            return state\n        },\n        setReadingFile(state, action) {\n            state[\"readingFile\"] = action.payload;\n            return state\n        },\n        setCurrentMessage(state, action) {\n            console.log(action.payload)\n            state[\"currentMessage\"] = action.payload\n            return state\n        },\n        setAtoms(state, action) {\n            state[\"atoms\"] = action.payload\n            return state\n        },\n        setBonds(state, action) {\n            state[\"bonds\"] = action.payload\n            return state\n        },\n        setUnitCell(state, action) {\n            state[\"unitCell\"] = action.payload\n            return state\n        },\n        setCrystal(state, action) {\n            state[\"crystal\"] = action.payload\n            return state\n        },\n        setSource(state, action) {\n            state[\"source\"] = action.payload\n            return state\n        },\n        setCoordinateSystem(state, action) {\n            state[\"coordinateSystem\"] = action.payload\n            return state\n        },\n        setStatus(state, action) {\n            state[\"status\"] = action.payload\n            return state\n        },\n        setSubsetStatus(state, action) {\n            state[\"subsetStatus\"] = action.payload\n            return state\n        },\n        setSourceStatus(state, action) {\n            state[\"sourceStatus\"] = action.payload\n            return state\n        },\n        setSourceMessage(state, action) {\n            state[\"sourceMessage\"] = action.payload\n            return state\n        },\n        setSubsetMessage(state, action) {\n            state[\"subsetMessage\"] = action.payload\n            return state\n        }\n    }\n})\n\nexport const { openCreateModal, closeCreateModal, setTab,\n                setReadingFile, setCurrentMessage, setAtoms,\n                setBonds, setCrystal, setUnitCell, setSource,\n                setCoordinateSystem, setStatus, setSourceStatus, setSubsetStatus,\n                setSourceMessage, setSubsetMessage} = createModalSlice.actions\n\nexport default createModalSlice.reducer\n\nexport const getCreateModalOpened = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"createModalOpened\"]\n)\n\nexport const getCurrentTab = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"currentTab\"]\n)\n\nexport const isReadingFile = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"readingFile\"]\n)\n\nexport const getCurrentMessage = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"currentMessage\"]\n)\n\nexport const getCrystal = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"crystal\"]\n)\n\nexport const getUnitCell = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"unitCell\"]\n)\n\nexport const getAtoms = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"atoms\"]\n)\n\nexport const getBonds = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"bonds\"]\n)\n\nexport const getSource = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"source\"]\n)\n\nexport const getCoordinateSystem = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"coordinateSystem\"]\n)\n\nexport const getStatus = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"status\"]\n)\n\nexport const getSubsetStatus = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"subsetStatus\"]\n)\n\nexport const getSourceStatus = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"sourceStatus\"]\n)\n\nexport const getSourceMessage = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"sourceMessage\"]\n)\n\n\nexport const getSubsetMessage = createSelector((state) => state.createModalSlice, (p) =>\n    p[\"subsetMessage\"]\n)\n\n\n\n","import * as React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getGraphType, setGraphType} from \"../../features/compare/compareSlice\";\nimport cx from \"classnames\"\n\nexport const CompareAppMenuGraphSelectionButton = ({text, icon, label}) => {\n    let dispatch = useDispatch()\n    let graphType = useSelector(getGraphType)\n\n    return (\n        <div className={cx(\"plot-app-menu-graph-selection-button\", {\"selected\": label === graphType})}\n             onClick={() => dispatch(setGraphType(label))}>\n            {icon}\n            {text}\n        </div>\n    )\n}","import * as React from \"react\";\nimport { CompareAppMenuGraphSelectionButton } from \"./CompareAppMenuGraphSelectionButton\"\n\nexport const CompareAppMenuGraphSelection = () =>{\n    return (\n        <div className=\"plot-app-menu-graph-selection\">\n            <CompareAppMenuGraphSelectionButton label={\"amd\"} text={\"AMD\"} />\n            <CompareAppMenuGraphSelectionButton label={\"mst\"} text={\"MST\"} />\n            <CompareAppMenuGraphSelectionButton label={\"full\"} text={\"Threshold\"} />\n            <CompareAppMenuGraphSelectionButton label={\"circle\"} text={\"Circle\"} />\n            <CompareAppMenuGraphSelectionButton label={\"sunburst\"} text={\"Sunburst\"} />\n            <CompareAppMenuGraphSelectionButton label={\"map\"} text={\"MDS\"} />\n            <CompareAppMenuGraphSelectionButton label={\"force\"} text={\"FDL\"} />\n            <CompareAppMenuGraphSelectionButton label={\"pmfg\"} text={\"PMFG\"} />\n            <CompareAppMenuGraphSelectionButton label={\"kkg\"} text={\"Kamada-Kawai\"} />\n        </div>\n    )\n}\n\n","import React, { FC, useEffect, useRef, useState } from \"react\";\nimport { MdExpandLess, MdExpandMore } from \"react-icons/md\";\nimport AnimateHeight from \"react-animate-height\";\nimport cx from \"classnames\"\n\nconst DURATION = 300;\n\nconst Panel: FC<{ title: JSX.Element | string; initiallyDeployed?: boolean; vis: boolean }> = ({\n  title,\n  initiallyDeployed,\n  children, vis\n}) => {\n  const [isDeployed, setIsDeployed] = useState(initiallyDeployed || false);\n  const dom = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isDeployed)\n      setTimeout(() => {\n        if (dom.current) dom.current.parentElement!.scrollTo({ top: dom.current.offsetTop - 5, behavior: \"smooth\" });\n      }, DURATION);\n  }, [isDeployed]);\n\n  return (\n    <div className={cx(\"panel\", {\"open\": vis})} ref={dom}>\n      <h2>\n        {title}{\" \"}\n        <button type=\"button\" onClick={() => setIsDeployed((v) => !v)}>\n          {isDeployed ? <MdExpandLess /> : <MdExpandMore />}\n        </button>\n      </h2>\n      <AnimateHeight duration={DURATION} height={isDeployed ? \"auto\" : 0}>\n        {children}\n      </AnimateHeight>\n    </div>\n  );\n};\n\nexport default Panel;\n","import React, {useEffect, useMemo, useState} from \"react\";\nimport {useSigma} from \"react-sigma-v2\";\nimport {keyBy, mapValues, sortBy, values} from \"lodash\";\n\nimport {MdGroupWork} from \"react-icons/md\";\nimport Panel from \"./Panel\";\nimport {AiOutlineCheckCircle, AiOutlineCloseCircle} from \"react-icons/all\";\nimport {useSelector} from \"react-redux\";\nimport {getClusterPanelOpen} from \"../../../features/compare/compareSlice\";\n\nconst ClustersPanel = ({ clusters, filters, toggleCluster, setClusters }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n  let vis = useSelector(getClusterPanelOpen)\n  const [filter, setFilter] = useState(\"\")\n\n  const nodesPerCluster = useMemo(() => {\n    const index = {};\n    graph.forEachNode((_, { cluster }) => (index[cluster] = (index[cluster] || 0) + 1));\n    return index;\n  }, [graph]);\n\n  const maxNodesPerCluster = useMemo(() => Math.max(...values(nodesPerCluster)), [nodesPerCluster]);\n  const visibleClustersCount = useMemo(() => Object.keys(filters.clusters).length, [filters]);\n\n  const [visibleNodesPerCluster, setVisibleNodesPerCluster] = useState(nodesPerCluster);\n  useEffect(() => {\n    // To ensure the graphology instance has up to data \"hidden\" values for\n    // nodes, we wait for next frame before reindexing. This won't matter in the\n    // UX, because of the visible nodes bar width transition.\n    requestAnimationFrame(() => {\n      const index = {};\n      graph.forEachNode((_, { cluster, hidden }) => !hidden && (index[cluster] = (index[cluster] || 0) + 1));\n      setVisibleNodesPerCluster(index);\n    });\n  }, [filters, graph]);\n\n  if (filter !== \"\"){\n    clusters = clusters.filter(function (c) {\n      return c.key.toLowerCase().indexOf(filter.toLowerCase()) >= 0\n    });\n  }\n\n  const sortedClusters = useMemo(\n    () => sortBy(clusters, (cluster) => -nodesPerCluster[cluster.key]),\n    [clusters, nodesPerCluster],\n  );\n\n  return (\n    <Panel\n      title={\n        <>\n          <MdGroupWork className=\"text-muted\" /> Clusters\n          {visibleClustersCount < clusters.length ? (\n            <span className=\"text-muted text-small\">\n              {\" \"}\n              ({visibleClustersCount} / {clusters.length})\n            </span>\n          ) : (\n            \"\"\n          )}\n        </>\n      }\n      vis={vis}\n    >\n      <p className=\"buttons\">\n        <button className=\"btn\" onClick={() => setClusters(mapValues(keyBy(clusters, \"key\"), () => true))}>\n          <AiOutlineCheckCircle /> Check all\n        </button>{\" \"}\n        <button className=\"btn\" onClick={() => setClusters({})}>\n          <AiOutlineCloseCircle /> Uncheck all\n        </button>\n      </p>\n      <input className={\"top-filter\"}  placeholder={\"Filter\"} onChange={e => setFilter(e.target.value)} />\n             <ul>\n        {sortedClusters.map((cluster) => {\n          const nodesCount = nodesPerCluster[cluster.key];\n          const visibleNodesCount = visibleNodesPerCluster[cluster.key] || 0;\n          return (\n            <li\n              className=\"caption-row\"\n              key={cluster.key}\n              title={`${nodesCount} page${nodesCount > 1 ? \"s\" : \"\"}${\n                visibleNodesCount !== nodesCount ? ` (only ${visibleNodesCount} visible)` : \"\"\n              }`}\n            >\n              <input\n                type=\"checkbox\"\n                checked={filters.clusters[cluster.key] || false}\n                onChange={() => toggleCluster(cluster.key)}\n                id={`cluster-${cluster.key}`}\n              />\n              <label htmlFor={`cluster-${cluster.key}`}>\n                <span className=\"circle\" style={{ background: cluster.color, borderColor: cluster.color }} />{\" \"}\n                <div className=\"node-label\">\n                  <span>{cluster.clusterLabel}</span>\n                  <div className=\"bar\" style={{ width: (100 * nodesCount) / maxNodesPerCluster + \"%\" }}>\n                    <div\n                      className=\"inside-bar\"\n                      style={{\n                        width: (100 * visibleNodesCount) / nodesCount + \"%\",\n                      }}\n                    />\n                  </div>\n                </div>\n              </label>\n            </li>\n          );\n        })}\n      </ul>\n    </Panel>\n  );\n};\n\nexport default ClustersPanel;\n","import * as React from \"react\";\nimport { CompareAppMenuGraphSelectionButton } from \"./CompareAppMenuGraphSelectionButton\"\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getBreakout, getGraphType, setBreakout} from \"../../features/compare/compareSlice\";\n\nexport const CompareAppMenuClusterSelection = () => {\n    let dispatch = useDispatch()\n    let breakout = useSelector(getBreakout)\n    let graphType = useSelector(getGraphType)\n\n    if (graphType === \"circle\" || graphType === \"sunburst\") {\n        return <div>\n\n        </div>\n    }\n\n    const changeBreakout = (e) => {\n        dispatch(setBreakout(e.target.value))\n    }\n\n    return (\n        <>\n            <h6>CLUSTER BY</h6>\n            <div className=\"plot-app-menu-cluster-selection\">\n                <select className={\"cluster-facet\"} value={breakout} onChange={(e) => changeBreakout(e)}>\n                    <option value={\"family\"}>Family</option>\n                    <option value={\"polymorph\"}>Polymorph</option>\n                    <option value={\"composition\"}>Composition</option>\n                    <option value={\"prime_composition\"}>Prime Composition</option>\n                </select>\n            </div>\n        </>\n    )\n}\n\n","import {BiNetworkChart, BiRefresh, BiTrash, BiChevronLeft} from \"react-icons/bi\";\nimport {\n    clearComp,\n    getComp,\n    getGraphType,\n    getMenuOpen,\n    setGraphType,\n    setMenuOpen\n} from \"../../features/compare/compareSlice\";\nimport {IoSettingsOutline} from \"react-icons/io5\";\nimport {CompareAppMenuSettings} from \"./CompareAppMenuSettings\";\nimport ListIcon from \"@mui/icons-material/List\";\nimport {CrystalList} from \"../search/CrystalList\";\nimport * as React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useState} from \"react\";\nimport cx from 'classnames';\nimport {closeCreateModal} from \"../../features/create/createSlice\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport ScienceIcon from \"@mui/icons-material/Science\";\nimport StorageIcon from \"@mui/icons-material/Storage\";\nimport {CompareAppMenuGraphSelection} from \"./CompareAppMenuGraphSelection\";\nimport ClustersPanel from \"./views/ClustersPanel\";\nimport {CompareAppMenuClusterSelection} from \"./CompareAppMenuClusterSelection\";\n\nexport const OpenCompareMenu = () => {\n    let dispatch = useDispatch()\n    let clicked = useSelector(getMenuOpen)\n\n    return (\n        <div className={cx(\"open-plot-app-menu\", {\"clicked\": clicked})}\n            onClick={() => dispatch(setMenuOpen(true))}>\n            <BiChevronLeft/>\n        </div>\n    )\n}\n\n\nexport const CompareAppMenu = () => {\n    let open = useSelector(getMenuOpen)\n    let dispatch = useDispatch()\n\n    return (\n        <div className={cx(\"compare-app-menu\", {\"open\": open})}>\n            <div className={\"app-menu-container\"}>\n                <h6>GRAPH TYPE</h6>\n                <CompareAppMenuGraphSelection/>\n                <CompareAppMenuClusterSelection/>\n                <h6>SETTINGS</h6>\n                <CompareAppMenuSettings/>\n            </div>\n        </div>\n    )\n}\n","import React from \"react\";\n\n\nexport function Loading(props) {\n    return (\n        <div className=\"inner\" style={{\"width\": \"200px\", \"height\": \"200px\", \"background\": \"transparent\"}} {...props}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\"\n                 style={{\"margin\": \"auto\", \"background\": \"transparent\", \"display\": \"block\"}}\n                 width=\"200px\" height=\"200px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\n                <g transform=\"translate(20 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#85a2b6\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.375s\" calcMode=\"spline\"\n    keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n    repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(40 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#bbcedd\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.25s\" calcMode=\"spline\"\n    keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n    repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(60 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#dce4eb\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.125s\" calcMode=\"spline\"\n    keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n    repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(80 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#fdfdfd\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"0s\" calcMode=\"spline\"\n    keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n    repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n            </svg>\n        </div>\n    )\n}\n\n\nexport function LoadingCustom({height, width, innerHeight, innerWidth}) {\n    return (\n        <div className=\"inner\" style={{\"width\": width, \"height\": height, \"background\": \"transparent\"}} >\n            <svg xmlns=\"http://www.w3.org/2000/svg\"\n                 style={{\"margin\": \"auto\", \"background\": \"transparent\", \"display\": \"block\"}}\n                 width={innerWidth} height={innerHeight} viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\n                <g transform=\"translate(20 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#85a2b6\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.375s\" calcMode=\"spline\"\n                                          keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n                                          repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(40 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#bbcedd\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.25s\" calcMode=\"spline\"\n                                          keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n                                          repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(60 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#dce4eb\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.125s\" calcMode=\"spline\"\n                                          keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n                                          repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n                <g transform=\"translate(80 50)\">\n                    <circle cx=\"0\" cy=\"0\" r=\"6\" fill=\"#fdfdfd\">\n                        <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"0s\" calcMode=\"spline\"\n                                          keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\"\n                                          repeatCount=\"indefinite\"/>\n                    </circle>\n                </g>\n            </svg>\n        </div>\n    )\n}","import {CirclePacking, ResponsiveCirclePacking} from '@nivo/circle-packing'\nimport {useEffect, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {getComp, getKs, getLinkage, getThresholds, setMaxThreshold} from \"../../features/compare/compareSlice\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {constant, keyBy, mapValues} from \"lodash\";\nimport * as React from \"react\";\nimport {CompareAppMenu} from \"./CompareAppMenu\";\nimport {Loading} from \"../../Loading\";\n\n\nexport const MyResponsiveCirclePacking = ({}) => {\n    const [zoomedId, setZoomedId] = useState(\"\")\n    const [dataReady, setDataReady] = useState(false);\n    const [dataset, setDataset] = useState(null);\n\n    let thresholds = useSelector(getThresholds)\n    let linkage = useSelector(getLinkage)\n    let ks = useSelector(getKs)\n    let token = useSelector(getAccessToken)\n    let names = useSelector(getComp)\n    const [loading, setLoading] = useState(false)\n\n\n    useEffect(() => {\n        setLoading(true)\n        fetch('/api/compare/job', {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer: ${token}`,\n                'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>',\n                'Content-Length': '<calculated when request is sent>'\n            },\n            body: JSON.stringify({\"names\": names})\n        })\n            .then((data) => data.json())\n            .then((d) => {\n                let url = `/api/compare/circle/amd/${'[' + ks.join(',') + ']'}?linkage=${linkage}&thresholds=${'[' + thresholds.join(',') + ']'}&names=${d[\"callback\"]}`\n                return url\n            })\n            .then(url => {\n                fetch(url, {\n                    headers: {\n                        'Authorization': `Bearer: ${token}`,\n                    }\n                })\n                    .then(res => res.json())\n                    .then((dataset) => {\n                        setDataset(dataset);\n                        setLoading(false)\n                        requestAnimationFrame(() => setDataReady(true));\n                    });\n            })\n    }, [ks, linkage, names, thresholds]);\n\n    if (loading)\n        return (\n            <Loading style={{\"display\": \"grid\",\n                \"justify-content\": \"center\",\n                \"align-content\": \"center\",\n                \"height\": \"100vh\",\n                \"background\": \"var(--defaultprimary)\"}}/>\n        )\n\n    if (!dataset) return null;\n\n    return (\n        <>\n            <ResponsiveCirclePacking\n                data={dataset}\n                margin={{top: 10, right: 0, bottom: 20, left: 20}}\n                id=\"name\"\n                value=\"loc\"\n                colors={{scheme: 'nivo'}}\n                childColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'brighter',\n                            0.4\n                        ]\n                    ]\n                }}\n                padding={4}\n                enableLabels={true}\n                labelsFilter={function (n) {\n                    return 2 === n.node.depth\n                }}\n                labelsSkipRadius={10}\n                labelTextColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'darker',\n                            2\n                        ]\n                    ]\n                }}\n                borderWidth={1}\n                borderColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'darker',\n                            0.5\n                        ]\n                    ]\n                }}\n                defs={[\n                    {\n                        id: 'lines',\n                        type: 'patternLines',\n                        background: 'none',\n                        color: 'inherit',\n                        rotation: -45,\n                        lineWidth: 5,\n                        spacing: 8\n                    }\n                ]}\n                fill={[\n                    {\n                        match: {\n                            depth: 1\n                        },\n                        id: 'lines'\n                    }\n                ]}\n                zoomedId={zoomedId}\n                motionConfig=\"slow\"\n                onClick={node => {\n                    console.log(node)\n                    setZoomedId(zoomedId === node.id ? null : node.id)\n                    console.log(zoomedId)\n                }}\n            />\n            <CompareAppMenu />\n        </>\n    )\n}","import { ResponsiveSunburst } from '@nivo/sunburst'\nimport React, {useEffect, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {getComp, getKs, getLinkage, getThresholds} from \"../../features/compare/compareSlice\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {CompareAppMenu} from \"./CompareAppMenu\";\nimport {Loading} from \"../../Loading\";\n\n\nconst flatten = data =>\n    data.reduce((acc, item) => {\n        if (item.children) {\n            return [...acc, item, ...flatten(item.children)]\n        }\n\n        return [...acc, item]\n    }, [])\n\nconst findObject = (data, name) => data.find(searchedName => searchedName.name === name)\n\n\nexport const MyResponsiveSunburst = () => {\n    const [dataReady, setDataReady] = useState(false);\n    const [dataset, setDataset] = useState(null);\n    const [loading, setLoading] = useState(false)\n    let thresholds = useSelector(getThresholds)\n    let linkage = useSelector(getLinkage)\n    let ks = useSelector(getKs)\n    let token = useSelector(getAccessToken)\n    let names = useSelector(getComp)\n\n    useEffect(() => {\n        setLoading(true)\n        fetch('/api/compare/job', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>',\n                'Content-Length': '<calculated when request is sent>'\n            },\n            body: JSON.stringify({\"names\": names})\n        })\n            .then((data) => data.json())\n            .then((d) => {\n                let url = `/api/compare/sunburst/amd/${'[' + ks.join(',') + ']'}?linkage=${linkage}&thresholds=${'[' + thresholds.join(',') + ']'}&names=${d[\"callback\"]}`\n                return url\n            })\n            .then(url => {\n                fetch(url)\n                    .then(res => res.json())\n                    .then((dataset) => {\n                        setDataset(dataset);\n                        setLoading(false)\n                        requestAnimationFrame(() => setDataReady(true));\n                    });\n            })\n    }, [ks, linkage, names, thresholds]);\n\n    if (loading)\n        return (\n            <Loading style={{\"display\": \"grid\",\n                \"justify-content\": \"center\",\n                \"align-content\": \"center\",\n                \"height\": \"100vh\",\n                \"background\": \"var(--defaultprimary)\"}}/>\n        )\n\n    if (!dataset) return null;\n\n\n    return (\n        <>\n            <ResponsiveSunburst\n                data={dataset}\n                margin={{top: 10, right: 10, bottom: 10, left: 10}}\n                id=\"name\"\n                value=\"loc\"\n                cornerRadius={2}\n                borderColor={{theme: 'background'}}\n                colors={{scheme: 'nivo'}}\n                childColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'brighter',\n                            0.1\n                        ]\n                    ]\n                }}\n                enableArcLabels={true}\n                arcLabelsSkipAngle={10}\n                arcLabelsTextColor={{\n                    from: 'color',\n                    modifiers: [\n                        [\n                            'darker',\n                            1.4\n                        ]\n                    ]\n                }}\n                transitionMode=\"pushIn\"\n                onClick={clickedData => {\n                    const foundObject = findObject(flatten(dataset.children), clickedData.id)\n                    if (foundObject && foundObject.children) {\n                        setDataset(foundObject)\n                    }\n                }}\n            />\n            <CompareAppMenu/>\n        </>\n    )\n}\n","import { NodeDisplayData, PartialButFor, PlainObject } from \"sigma/types\";\nimport { Settings } from \"sigma/settings\";\n\nconst TEXT_COLOR = \"#000000\";\n\n/**\n * This function draw in the input canvas 2D context a rectangle.\n * It only deals with tracing the path, and does not fill or stroke.\n */\nexport function drawRoundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n): void {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n}\n\n/**\n * Custom hover renderer\n */\nexport function drawHover(context: CanvasRenderingContext2D, data: PlainObject, settings: PlainObject) {\n  const size = settings.labelSize;\n  const font = settings.labelFont;\n  const weight = settings.labelWeight;\n  const subLabelSize = size - 2;\n\n  const label = data.label;\n  const subLabel = data.tag !== \"unknown\" ? data.tag : \"\";\n  const clusterLabel = data.clusterLabel;\n\n  // Then we draw the label background\n  context.beginPath();\n  context.fillStyle = \"#fff\";\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 2;\n  context.shadowBlur = 8;\n  context.shadowColor = \"#000\";\n\n  context.font = `${weight} ${size}px ${font}`;\n  const labelWidth = context.measureText(label).width;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  const subLabelWidth = subLabel ? context.measureText(subLabel).width : 0;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  const clusterLabelWidth = clusterLabel ? context.measureText(clusterLabel).width : 0;\n\n  const textWidth = Math.max(labelWidth, subLabelWidth, clusterLabelWidth);\n\n  const x = Math.round(data.x);\n  const y = Math.round(data.y);\n  const w = Math.round(textWidth + size / 2 + data.size + 3);\n  const hLabel = Math.round(size / 2 + 4);\n  const hSubLabel = subLabel ? Math.round(subLabelSize / 2 + 9) : 0;\n  const hClusterLabel = Math.round(subLabelSize / 2 + 9);\n\n  drawRoundRect(context, x, y - hSubLabel - 12, w, hClusterLabel + hLabel + hSubLabel + 12, 5);\n  context.closePath();\n  context.fill();\n\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 0;\n  context.shadowBlur = 0;\n\n  // And finally we draw the labels\n  context.fillStyle = TEXT_COLOR;\n  context.font = `${weight} ${size}px ${font}`;\n  context.fillText(label, data.x + data.size + 3, data.y + size / 3);\n\n  if (subLabel) {\n    context.fillStyle = TEXT_COLOR;\n    context.font = `${weight} ${subLabelSize}px ${font}`;\n    context.fillText(subLabel, data.x + data.size + 3, data.y - (2 * size) / 3 - 2);\n  }\n\n  context.fillStyle = data.color;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  context.fillText(clusterLabel, data.x + data.size + 3, data.y + size / 3 + 3 + subLabelSize);\n}\n\n/**\n * Custom label renderer\n */\nexport default function drawLabel(\n  context: CanvasRenderingContext2D,\n  data: PartialButFor<NodeDisplayData, \"x\" | \"y\" | \"size\" | \"label\" | \"color\">,\n  settings: Settings,\n): void {\n  if (!data.label) return;\n\n  const size = settings.labelSize,\n    font = settings.labelFont,\n    weight = settings.labelWeight;\n\n  context.font = `${weight} ${size}px ${font}`;\n  const width = context.measureText(data.label).width + 8;\n\n  context.fillStyle = \"#ffffffcc\";\n  context.fillRect(data.x + data.size, data.y + size / 3 - 15, width, 20);\n\n  context.fillStyle = \"#000\";\n  context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\n","import { useEffect, useState } from \"react\";\n\nfunction useDebounce<T>(value: T, delay: number): T {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        if (value !== debouncedValue) setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay], // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n\nexport default useDebounce;\n","import { useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\n\nimport { drawHover } from \"../canvas-utils\";\nimport useDebounce from \"../use-debounce\";\nimport {useDispatch} from \"react-redux\";\nimport {setCamera} from \"../../../features/compare/compareSlice\";\n\nconst NODE_FADE_COLOR = \"#bbb\";\nconst EDGE_FADE_COLOR = \"#eee\";\n\nconst GraphSettingsController: FC<{ hoveredNode: string | null, hoveredEdge: string | null }> =\n    ({ children, hoveredNode, hoveredEdge }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n  let dispatch = useDispatch();\n\n  // Here we debounce the value to avoid having too much highlights refresh when\n  // moving the mouse over the graph:\n  const debouncedHoveredNode = useDebounce(hoveredNode, 40);\n  const debouncedHoveredEdge = useDebounce(hoveredEdge, 40);\n\n  /**\n   * Initialize here settings that require to know the graph and/or the sigma\n   * instance:\n   */\n  useEffect(() => {\n    sigma.setSetting(\"hoverRenderer\", (context, data, settings) =>\n      drawHover(context, { ...sigma.getNodeDisplayData(data.key), ...data }, settings),\n    );\n  }, [sigma, graph]);\n\n  /**\n   * Update node and edge reducers when a node is hovered, to highlight its\n   * neighborhood:\n   */\n  useEffect(() => {\n    const hoveredColor: string = debouncedHoveredNode ? sigma.getNodeDisplayData(debouncedHoveredNode)!.color : \"\";\n\n    sigma.setSetting(\n      \"nodeReducer\",\n      debouncedHoveredNode\n        ? (node, data) =>\n            node === debouncedHoveredNode ||\n            graph.hasEdge(node, debouncedHoveredNode) ||\n            graph.hasEdge(debouncedHoveredNode, node)\n              ? { ...data, zIndex: 1 }\n              : { ...data, zIndex: 0, label: \"\", color: NODE_FADE_COLOR, image: null, highlighted: false }\n        : null,\n    );\n    sigma.setSetting(\n      \"edgeReducer\",\n      debouncedHoveredNode\n        ? (edge, data) =>\n            graph.hasExtremity(edge, debouncedHoveredNode)\n              ? { ...data, color: hoveredColor, size: 4 }\n              : { ...data, color: EDGE_FADE_COLOR, hidden: true }\n        : null,\n    );\n  }, [debouncedHoveredNode]);\n\n\n  return <>{children}</>;\n};\n\nexport default GraphSettingsController;\n","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    previewOpened: false,\n    currentObject: null,\n    currentContent: \"molecule\",\n    x: 0,\n    y: 0,\n};\n\nconst previewSlice = createSlice({\n    name: 'previewOpened',\n    initialState,\n    reducers: {\n        openPreview(state, action) {\n            console.log(\"Opening modal\")\n            state[\"previewOpened\"] = true;\n            return state;\n        },\n        closePreview(state, action) {\n            console.log(\"Closing modal\")\n            state[\"previewOpened\"] = false;\n            return state;\n        },\n        changeContent(state, action){\n            console.log(\"Changing content\");\n            state[\"currentContent\"] = action.payload;\n            return state;\n        },\n        changeObject(state, action) {\n            state[\"currentObject\"] = action.payload;\n            return state;\n        },\n        change(state, action){\n            return {\n                ...state,\n                ...action.payload\n            };\n        },\n    }\n})\n\nexport const { openPreview, closePreview, changeContent, change, changeObject } = previewSlice.actions\n\nexport default previewSlice.reducer\n\nexport const getPreviewOpened = createSelector((state) => state.previewSlice, (p) =>\n    p[\"previewOpened\"]\n)\n\nexport const getObject = createSelector((state) => state.previewSlice, (p) =>\n    p[\"currentObject\"]\n)\n\nexport const getContent = createSelector((state) => state.previewSlice, (p) =>\n    p[\"currentContent\"]\n)\n\nexport const getX = createSelector((state) => state.previewSlice, (p) =>\n    p[\"x\"]\n)\n\nexport const getY = createSelector((state) => state.previewSlice, (p) =>\n    p[\"y\"]\n)\n\n\n","import { useRegisterEvents, useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\nimport {useDispatch} from \"react-redux\";\nimport {change, changeObject, openPreview} from \"../../../features/preview/previewSlice\";\nimport {setBox, setCamera} from \"../../../features/compare/compareSlice\";\nimport {getPosition} from \"sigma/core/captors/captor\";\n\nfunction getMouseLayer() {\n  return document.querySelector(\".sigma-mouse\");\n}\n\nconst GraphEventsController: FC<{ setHoveredNode: (node: string | null) => void,\n                                  setHoveredEdge: (edge: string | null) => void}> = ({ setHoveredNode, children, setHoveredEdge }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n  const registerEvents = useRegisterEvents();\n  let dispatch = useDispatch();\n\n  /**\n   * Initialize here settings that require to know the graph and/or the sigma\n   * instance:\n   */\n  useEffect(() => {\n    registerEvents({\n      clickNode({ node, event }) {\n        if (!graph.getNodeAttribute(node, \"hidden\")) {\n          console.log(graph.getNodeAttribute(node, \"key\"))\n          const x = event.clientX\n          const y = event.clientY\n          dispatch(change({x: x, y: y}))\n          dispatch(changeObject(graph.getNodeAttribute(node, \"key\")))\n          dispatch(openPreview(true))\n        }\n      },\n      enterNode({ node }) {\n        setHoveredNode(node);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n\n        if (mouseLayer) mouseLayer.classList.add(\"mouse-pointer\");\n      },\n      leaveNode() {\n        setHoveredNode(null);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n        if (mouseLayer) mouseLayer.classList.remove(\"mouse-pointer\");\n      },\n      cameraUpdated(e) {\n        let point01 = sigma.viewportToGraph({x: 0, y: 0})\n        let dims = sigma.getDimensions()\n        let point00 = sigma.viewportToGraph({x: 0, y: dims.height})\n        let point11 = sigma.viewportToGraph({x: dims.width, y: dims.height})\n\n        let box = {\"x0\": point01.x,\n                   \"y1\": point01.y,\n                   \"y0\": point00.y,\n                   \"x1\": point11.x}\n        dispatch(setBox(box))\n        dispatch(setCamera(e))\n      },\n      enterEdge({edge}) {\n        setHoveredEdge(edge);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n        if (mouseLayer) mouseLayer.classList.add(\"mouse-pointer\");\n      },\n      leaveEdge() {\n        setHoveredEdge(null);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n        if (mouseLayer) mouseLayer.classList.remove(\"mouse-pointer\");\n      },\n    });\n  }, []);\n\n  return <>{children}</>;\n};\n\nexport default GraphEventsController;\n","import { useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\nimport { keyBy, omit } from \"lodash\";\n\nimport { Dataset, FiltersState } from \"../types\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getType} from \"@reduxjs/toolkit\";\nimport {getThreshold, setBox, setCamera} from \"../../../features/compare/compareSlice\";\n\nconst GraphDataController: FC<{ dataset: Dataset; filters: FiltersState }> = ({ dataset, filters, children }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n  let threshold = useSelector(getThreshold)\n\n\n  useEffect(() => {\n    if (!graph || !dataset) return;\n\n    const clusters = keyBy(dataset.clusters, \"key\");\n\n    dataset.nodes.forEach((node) => {\n      if (!graph.nodes().includes(node.key))\n          graph.addNode(node.key, {\n            ...node,\n            ...omit(clusters[node.cluster], \"key\"),\n          })\n        },\n    );\n    dataset.edges.forEach(([source, target, weight, show]) => {\n      if (!graph.hasEdge(source, target)) {\n          if (weight < threshold) {\n            graph.addEdge(source, target, {size: weight, label: weight.toFixed(4)})\n          }\n      }\n    });\n\n    // Use degrees as node sizes:\n    const scores = graph.nodes().map((node) => graph.getNodeAttribute(node, \"score\"));\n    const minDegree = Math.min(...scores);\n    const maxDegree = Math.max(...scores);\n    const MIN_NODE_SIZE = 20;\n    const MAX_NODE_SIZE = 30;\n    graph.forEachNode((node) =>\n      graph.setNodeAttribute(\n        node,\n        \"size\",\n        5\n        //((graph.getNodeAttribute(node, \"score\") - minDegree) / (maxDegree - minDegree)) *\n        //  (MAX_NODE_SIZE - MIN_NODE_SIZE) +\n        //  MIN_NODE_SIZE,\n      ),\n    );\n\n    graph.filterEdges((key, edgeAttributes, sourceId, targetId, sourcePosition, targetPosition) => {\n\n    })\n\n    return () => graph.clear();\n  }, [graph, dataset, threshold]);\n\n  /**\n   * Apply filters to graphology:\n   */\n  useEffect(() => {\n    const { clusters } = filters;\n    graph.forEachNode((node, { cluster }) =>\n      graph.setNodeAttribute(node, \"hidden\", !clusters[cluster] ),\n    );\n  }, [graph, filters]);\n\n  return <>{children}</>;\n};\n\nexport default GraphDataController;\n","import React, { useEffect, useState } from \"react\";\nimport { useSigma } from \"react-sigma-v2\";\nimport { BsSearch } from \"react-icons/bs\";\nimport {useSelector} from \"react-redux\";\nimport {getSearchFieldOpen} from \"../../../features/compare/compareSlice\";\nimport cx from \"classnames\"\n\n/**\n * This component is basically a fork from React-sigma-v2's SearchControl\n * component, to get some minor adjustments:\n * 1. We need to hide hidden nodes from results\n * 2. We need custom markup\n */\nconst SearchField = ({ filters }) => {\n  const sigma = useSigma();\n  const [search, setSearch] = useState(\"\");\n  const [values, setValues] = useState([]);\n  const [selected, setSelected] = useState(null);\n  let vis = useSelector(getSearchFieldOpen)\n\n  useEffect(() => {\n    const newValues = [];\n    const lcSearch = search.toLowerCase();\n    if (!selected && search.length > 1) {\n      sigma.getGraph().forEachNode((key, attributes) => {\n        if (!attributes.hidden && attributes.label && attributes.label.toLowerCase().indexOf(lcSearch) === 0)\n          newValues.push({ id: key, label: attributes.label });\n      });\n    }\n    setValues(newValues);\n  }, [search, selected, sigma]);\n\n  useEffect(() => {\n    if (!selected) return;\n    sigma.getGraph().setNodeAttribute(selected, \"highlighted\", true);\n    const nodeDisplayData = sigma.getNodeDisplayData(selected);\n\n    if (nodeDisplayData)\n      sigma.getCamera().animate(\n          { ...nodeDisplayData, ratio: 0.05 },\n          {\n            duration: 600,\n          },\n      );\n\n    return () => {\n      if (sigma.getGraph().hasNode(selected))\n        sigma.getGraph().setNodeAttribute(selected, \"highlighted\", false);\n    };\n  }, [selected, sigma]);\n\n  const onInputChange = (e) => {\n    const searchString = e.target.value;\n    const valueItem = values.find((value) => value.label === searchString);\n    console.log(values)\n    if (valueItem) {\n      setSearch(valueItem.label);\n      setValues([]);\n      setSelected(valueItem.id);\n    } else {\n      setSelected(null);\n      setSearch(searchString);\n    }\n  };\n\n  const onKeyPress = (e) => {\n    if (e.key === \"Enter\" && values.length) {\n      setSearch(values[0].label);\n      setSelected(values[0].id);\n    }\n  };\n\n  return (\n    <div className={cx(\"search-wrapper\", {\"open\": vis})}>\n      <input\n        type=\"search\"\n        placeholder=\"Search in nodes...\"\n        list=\"nodes\"\n        value={search}\n        onChange={onInputChange}\n        onKeyPress={onKeyPress}\n      />\n      <BsSearch className=\"icon\" />\n      <datalist id=\"nodes\">\n        {values.map((value) => (\n            <option key={value.id} value={value.label}>\n              {value.label}\n            </option>\n        ))}\n      </datalist>\n    </div>\n  );\n};\n\n\nexport default SearchField;\n","\n\nexport const toCartesian = (unitCell, point) => {\n    if (unitCell === null)\n        return point\n\n    console.log(\"unit cell is\")\n    console.log(unitCell)\n    //let res = multiplyMatrices(unitCell, [[point[0]], [point[1]], [point[2]]])\n    let res = multiplyMatrices([point], unitCell)\n    console.log(res)\n    return res[0]//[res[0], res[1], res[0]]\n}\n\nfunction multiplyMatrices(m1, m2) {\n    var result = [];\n    for (var i = 0; i < m1.length; i++) {\n        result[i] = [];\n        for (var j = 0; j < m2[0].length; j++) {\n            var sum = 0;\n            for (var k = 0; k < m1[0].length; k++) {\n                sum += m1[i][k] * m2[k][j];\n            }\n            result[i][j] = sum;\n        }\n    }\n    return result;\n}\n\nexport function addVecs(a,b){\n    return a.map((e,i) => e + b[i]);\n}\n\nexport function cellParamsToMatrix(a,b,c,alpha,beta,gamma) {\n    alpha = Math.PI * alpha / 180\n    beta = Math.PI * beta / 180\n    gamma = Math.PI * gamma / 180\n    let volume = cellVolume(a,b,c,alpha,beta,gamma)\n    console.log(\"volume is\")\n    console.log(volume)\n    //let row1 = [a, b*Math.cos(gamma), c*Math.cos(beta)]\n    //let row2 = [0, b*Math.sin(gamma), c*(Math.cos(alpha)-Math.cos(beta)*Math.cos(gamma))/(Math.sin(gamma))]\n    //let row3 = [0, 0, volume/(a*b*Math.sin(gamma))]\n    let row1 = [a, 0, 0]\n    let row2 = [b*Math.cos(gamma), b*Math.sin(gamma), 0]\n    let row3 = [c*Math.cos(beta), c*(Math.cos(alpha)-Math.cos(beta)*Math.cos(gamma))/(Math.sin(gamma)), volume/(a*b*Math.sin(gamma))]\n    return [row1, row2, row3]\n}\n\nfunction cellVolume(a,b,c,alpha,beta,gamma) {\n    return a * b * c * Math.sqrt(1 - Math.cos(alpha) ** 2 - Math.cos(beta) ** 2 - Math.cos(gamma) ** 2 + 2 * Math.cos(alpha) * Math.cos(beta) * Math.cos(gamma))\n}","import React, {useState, useEffect, useRef, useLayoutEffect} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../features/auth/authSlice\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport ListIcon from '@mui/icons-material/List';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport AddIcon from '@mui/icons-material/Add';\n\nimport {\n    getPreviewOpened,\n    getContent,\n    changeContent,\n    getObject,\n    closePreview,\n    getX,\n    getY,\n} from \"../features/preview/previewSlice\";\nimport { removeFromPreviewList, addToPreviewList, openPreviewList } from \"../features/compare/compareSlice\";\nimport { Canvas, useFrame, Color, useThree} from '@react-three/fiber'\nimport { OrbitControls, TransformControls, ContactShadows, useGLTF, useCursor } from '@react-three/drei'\nimport { proxy, useSnapshot } from 'valtio'\nimport * as THREE from \"three\";\nimport {LoadingCustom} from \"../Loading\";\nimport {addVecs, cellParamsToMatrix, toCartesian} from \"./base/geometry\";\n\n\n\n\nconst ELEMENT_COLOR = {\n    \"H\": \"red\",\n    \"O\": \"white\",\n    \"C\": \"black\",\n}\n\nconst H_SIZE = 0.2\n\nconst ELEMENT_SIZE = {\n    \"H\": H_SIZE,\n    \"O\": H_SIZE,\n    \"C\": H_SIZE,\n}\n\nconst getSize = (sym) => {\n    let s = ELEMENT_SIZE[sym]\n    if (s === undefined){\n        return H_SIZE\n    } else return s\n}\n\nconst CPK = {\n    h: [ 255, 255, 255 ],\n    he: [ 217, 255, 255 ],\n    li: [ 204, 128, 255 ],\n    be: [ 194, 255, 0 ],\n    b: [ 255, 181, 181 ],\n    c: [ 144, 144, 144 ],\n    n: [ 48, 80, 248 ],\n    o: [ 255, 13, 13 ],\n    f: [ 144, 224, 80 ],\n    ne: [ 179, 227, 245 ],\n    na: [ 171, 92, 242 ],\n    mg: [ 138, 255, 0 ],\n    al: [ 191, 166, 166 ],\n    si: [ 240, 200, 160 ],\n    p: [ 255, 128, 0 ],\n    s: [ 255, 255, 48 ],\n    cl: [ 31, 240, 31 ],\n    ar: [ 128, 209, 227 ],\n    k: [ 143, 64, 212 ],\n    ca: [ 61, 255, 0 ],\n    sc: [ 230, 230, 230 ],\n    ti: [ 191, 194, 199 ],\n    v: [ 166, 166, 171 ],\n    cr: [ 138, 153, 199 ],\n    mn: [ 156, 122, 199 ],\n    fe: [ 224, 102, 51 ],\n    co: [ 240, 144, 160 ],\n    ni: [ 80, 208, 80 ],\n    cu: [ 200, 128, 51 ],\n    zn: [ 125, 128, 176 ],\n    ga: [ 194, 143, 143 ],\n    ge: [ 102, 143, 143 ],\n    as: [ 189, 128, 227 ],\n    se: [ 255, 161, 0 ],\n    br: [ 166, 41, 41 ],\n    kr: [ 92, 184, 209 ],\n    rb: [ 112, 46, 176 ],\n    sr: [ 0, 255, 0 ],\n    y: [ 148, 255, 255 ],\n    zr: [ 148, 224, 224 ],\n    nb: [ 115, 194, 201 ],\n    mo: [ 84, 181, 181 ],\n    tc: [ 59, 158, 158 ],\n    ru: [ 36, 143, 143 ],\n    rh: [ 10, 125, 140 ],\n    pd: [ 0, 105, 133 ],\n    ag: [ 192, 192, 192 ],\n    cd: [ 255, 217, 143 ],\n    in: [ 166, 117, 115 ],\n    sn: [ 102, 128, 128 ],\n    sb: [ 158, 99, 181 ],\n    te: [ 212, 122, 0 ],\n    i: [ 148, 0, 148 ],\n    xe: [ 66, 158, 176 ],\n    cs: [ 87, 23, 143 ],\n    ba: [ 0, 201, 0 ],\n    la: [ 112, 212, 255 ],\n    ce: [ 255, 255, 199 ],\n    pr: [ 217, 255, 199 ],\n    nd: [ 199, 255, 199 ],\n    pm: [ 163, 255, 199 ],\n    sm: [ 143, 255, 199 ],\n    eu: [ 97, 255, 199 ],\n    gd: [ 69, 255, 199 ],\n    tb: [ 48, 255, 199 ],\n    dy: [ 31, 255, 199 ],\n    ho: [ 0, 255, 156 ],\n    er: [ 0, 230, 117 ],\n    tm: [ 0, 212, 82 ],\n    yb: [ 0, 191, 56 ],\n    lu: [ 0, 171, 36 ],\n    hf: [ 77, 194, 255 ],\n    ta: [ 77, 166, 255 ],\n    w: [ 33, 148, 214 ],\n    re: [ 38, 125, 171 ],\n    os: [ 38, 102, 150 ],\n    ir: [ 23, 84, 135 ],\n    pt: [ 208, 208, 224 ],\n    au: [ 255, 209, 35 ],\n    hg: [ 184, 184, 208 ],\n    tl: [ 166, 84, 77 ],\n    pb: [ 87, 89, 97 ],\n    bi: [ 158, 79, 181 ],\n    po: [ 171, 92, 0 ],\n    at: [ 117, 79, 69 ],\n    rn: [ 66, 130, 150 ],\n    fr: [ 66, 0, 102 ],\n    ra: [ 0, 125, 0 ],\n    ac: [ 112, 171, 250 ],\n    th: [ 0, 186, 255 ],\n    pa: [ 0, 161, 255 ],\n    u: [ 0, 143, 255 ],\n    np: [ 0, 128, 255 ],\n    pu: [ 0, 107, 255 ],\n    am: [ 84, 92, 242 ],\n    cm: [ 120, 92, 227 ],\n    bk: [ 138, 79, 227 ],\n    cf: [ 161, 54, 212 ],\n    es: [ 179, 31, 212 ],\n    fm: [ 179, 31, 186 ],\n    md: [ 179, 13, 166 ],\n    no: [ 189, 13, 135 ],\n    lr: [ 199, 0, 102 ],\n    rf: [ 204, 0, 89 ],\n    db: [ 209, 0, 79 ],\n    sg: [ 217, 0, 69 ],\n    bh: [ 224, 0, 56 ],\n    hs: [ 230, 0, 46 ],\n    mt: [ 235, 0, 38 ],\n    ds: [ 235, 0, 38 ],\n    rg: [ 235, 0, 38 ],\n    cn: [ 235, 0, 38 ],\n    uut: [ 235, 0, 38 ],\n    uuq: [ 235, 0, 38 ],\n    uup: [ 235, 0, 38 ],\n    uuh: [ 235, 0, 38 ],\n    uus: [ 235, 0, 38 ],\n    uuo: [ 235, 0, 38 ]\n};\n\nfunction rgbToHex(r, g, b) {\n    return \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n}\n\nconst modes = ['translate', 'rotate', 'scale']\nconst state = proxy({ current: null, mode: 0 })\n\nfunction ViewPanelSettings({}){\n    let dispatch = useDispatch()\n\n    return (\n        <div id=\"view-panel-settings\">\n\n        </div>\n    )\n}\n\n\nconst getElementColor = (e) => {\n    let rgb = CPK[e]\n    return rgbToHex(rgb[0], rgb[1], rgb[2])\n}\n\nfunction Atom(props) {\n    // This reference gives us direct access to the THREE.Mesh object\n    const ref = useRef()\n    // Hold state for hovered and clicked events\n    const [hovered, hover] = useState(false)\n    const [clicked, click] = useState(false)\n    // Subscribe this component to the render-loop, rotate the mesh every frame\n    //useFrame((state, delta) => {\n    //    ref.current.rotation.y += 0.005; ref.current.rotation.x += 0.01\n    // })\n\n    return (\n        <mesh\n            {...props}\n            ref={ref}\n            scale={clicked ? 1 : 1}\n            onClick={(event) => click(!clicked)}\n            onPointerOver={(event) => hover(true)}\n            onPointerOut={(event) => hover(false)}>\n            <sphereGeometry args={[getSize(props['symbol'])]} />\n            <meshBasicMaterial wireframe={false} color={getElementColor(props['symbol'].toLowerCase())} />\n        </mesh>\n    )\n}\n\n\nfunction Line({ start, end, color }) {\n    const ref = useRef()\n    useLayoutEffect(() => {\n        ref.current.geometry.setFromPoints([start, end].map((point) => new THREE.Vector3(...point)))\n    }, [start, end])\n    return (\n        <line ref={ref}>\n            <bufferGeometry />\n            <lineBasicMaterial color={color} />\n        </line>\n    )\n}\n\n\nexport function Controls() {\n    // Get notified on changes to state\n    const snap = useSnapshot(state)\n    const scene = useThree((state) => state.scene)\n    return (\n        <>\n            {/* As of drei@7.13 transform-controls can refer to the target by children, or the object prop */}\n            {snap.current && <TransformControls object={scene.getObjectByName(snap.current)} mode={modes[snap.mode]} />}\n            {/* makeDefault makes the controls known to r3f, now transform-controls can auto-disable them when active */}\n            <OrbitControls makeDefault minPolarAngle={0} maxPolarAngle={Math.PI / 1.75} />\n        </>\n    )\n}\n\nexport const UnitCell = ({dataset}) => {\n    let uc = cellParamsToMatrix(dataset.unitCell[\"A\"], dataset.unitCell[\"B\"], dataset.unitCell[\"C\"],\n        dataset.unitCell[\"Alpha\"], dataset.unitCell[\"Beta\"], dataset.unitCell[\"Gamma\"])\n\n    let s = [0,0,0]\n\n    return (\n        <group>\n            <Line start={s} end={uc[0]} color={\"red\"}/>\n            <Line start={s} end={uc[1]} color={\"blue\"}/>\n            <Line start={s} end={uc[2]} color={\"green\"}/>\n\n            <Line start={uc[1]} end={addVecs(uc[0], uc[1])} color={\"grey\"}/>\n            <Line start={uc[2]} end={addVecs(uc[2], uc[1])} color={\"grey\"}/>\n            <Line start={uc[2]} end={addVecs(uc[2], uc[1])} color={\"grey\"}/>\n            <Line start={uc[2]} end={addVecs(uc[2], uc[0])} color={\"grey\"}/>\n\n            <Line start={uc[0]} end={addVecs(uc[0], uc[1])} color={\"grey\"}/>\n            <Line start={uc[1]} end={addVecs(uc[1], uc[2])} color={\"grey\"}/>\n            <Line start={uc[0]} end={addVecs(uc[0], uc[2])} color={\"grey\"}/>\n            <Line start={addVecs(uc[0], uc[2])} end={addVecs(addVecs(uc[0], uc[2]), uc[1])} color={\"grey\"}/>\n            <Line start={addVecs(uc[1], uc[2])} end={addVecs(addVecs(uc[1], uc[2]), uc[0])} color={\"grey\"}/>\n            <Line start={addVecs(uc[0], uc[1])} end={addVecs(addVecs(uc[0], uc[2]), uc[1])} color={\"grey\"}/>\n\n        </group>\n    )\n}\n\n\nexport const Molecule = ({dataset, rotX, rotY, center}) => {\n    const ref = useRef()\n    let bondLocations = {}\n    let uc = null\n    if (dataset.unitCell) {\n        uc = cellParamsToMatrix(dataset.unitCell[\"A\"], dataset.unitCell[\"B\"], dataset.unitCell[\"C\"],\n            dataset.unitCell[\"Alpha\"], dataset.unitCell[\"Beta\"], dataset.unitCell[\"Gamma\"])\n    }\n    let c = [0,0,0]\n    if (center) {\n        c = toCartesian(uc, dataset.center)\n    }\n\n    useFrame((state, delta) => {\n        ref.current.rotation.y += rotY;\n        ref.current.rotation.x += rotX;\n    })\n\n    let atomSet = dataset[\"atoms\"].map((i) => {\n        let mp = toCartesian(uc, [i[\"X\"], i[\"Y\"], i[\"Z\"]])\n        mp[0] -= c[0]\n        mp[1] -= c[1]\n        mp[2] -= c[2]\n        bondLocations[i[\"Label\"]] = mp\n\n        return (\n            <Atom position={mp} symbol={i[\"Symbol\"]} />\n        )\n    })\n\n    let bondSet = dataset[\"bonds\"].map((i) => {\n        if (i.Label1 === null || i.Label2 === null) {\n            return\n        }\n        let s = bondLocations[i[\"Label1\"]]\n        let e = bondLocations[i[\"Label2\"]]\n\n        return (\n            <Line start={s}\n                  end={e}/>\n        )\n    })\n\n    return (\n        <group ref={ref}>\n            { atomSet }\n            { bondSet }\n        </group>\n    )\n}\n\n\nexport function MoleculeView({name}) {\n    let token = useSelector(getAccessToken)\n    console.log(\"inside molecule view\")\n    const [dataset, setDataset] = useState(null);\n    const [loading, setLoading] = useState(false)\n\n    useEffect(() => {\n        setLoading(true)\n        fetch(`/api/crystal/id/${name}`, {\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json'\n            }\n        }).then(data => data.json())\n            .then((d) => {\n                let id = d[\"id\"]\n                fetch(`/api/crystal/molecule/${id}`, {\n                    headers: {\n                        'Authorization': `Bearer:${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }).then(data => data.json())\n                    .then((d) => {\n                        setDataset(d)\n                        setLoading(false)\n                    })\n            })\n    }, [name])\n\n    if (loading) {\n        return <LoadingCustom width={\"100%\"} height={\"100%\"} innerHeight={\"95%\"} innerWidth={\"50px\"}/>\n    }\n\n    let atoms;\n    if (!loading) {\n        atoms = <div className=\"no-atom-geometry-content\">\n            <p>No Geometry found.</p>\n        </div>\n    }\n    console.log(\"Dataset: \")\n    console.log(dataset)\n    if (dataset != null && !loading && dataset.atoms) {\n\n        atoms =\n            <Canvas className=\"preview-panel-canvas\"\n                    camera={{ position: [7, 7, 7], fov: 62 }}>\n                <ambientLight />\n                <pointLight position={[1, 1, 1]} />\n                <Molecule dataset={dataset} rotX={0.001} rotY={0.005} center={true}/>\n                <Controls/>\n            </Canvas>\n\n    }\n    return (\n        <>\n            { atoms }\n        </>\n    )\n}\n\nexport const PreviewListItem = ({name}) => {\n    const dispatch = useDispatch()\n\n    return (\n        <div className=\"preview-list-item\">\n            <div className=\"top-container\">\n                <div className={\"left-content\"}>\n                    <p className=\"preview-title\">{name}</p>\n                </div>\n                <div className={\"right-content\"}>\n                    <a href={`https://www.ccdc.cam.ac.uk/structures/Search?Ccdcid=${name}&DatabaseToSearch=Published`}\n                       target={\"_blank\"}\n                       style={{\"color\": \"var(--default-text)\"}}>CCDC</a>\n                    <button onClick={() => dispatch(removeFromPreviewList(name))}>\n                        <CloseIcon fontSize={\"small\"}/>\n                    </button>\n                </div>\n            </div>\n            <MoleculeView name={name}/>\n        </div>\n    )\n}\n\n\nfunction PreviewPanel({}) {\n    let dispatch = useDispatch()\n\n    let modalOpened = useSelector(getPreviewOpened)\n    let currentContent = useSelector(getContent)\n    let x = useSelector(getX)\n    let y = useSelector(getY)\n    let currentObject = useSelector(getObject)\n\n\n    let vis  = 'none'\n    if (modalOpened)\n        vis = 'block'\n\n    let content = <div/>\n    if (modalOpened){\n        if (currentContent === \"settings\")\n            content = <ViewPanelSettings/>;\n        else if (currentContent === \"molecule\")\n            content = <MoleculeView name={currentObject}/>\n    }\n    return (\n        <div className=\"preview-panel\" style={{'display': vis, \"left\": `${x}px`, \"top\": `${y}px`}}>\n            <div className=\"top-container\">\n                <div className={\"left-content\"}>\n                    <p className=\"preview-title\">{currentObject}</p>\n                </div>\n                <div className={\"right-content\"}>\n                    <a href={`https://www.ccdc.cam.ac.uk/structures/Search?Ccdcid=${currentObject}&DatabaseToSearch=Published`}\n                       target={\"_blank\"}\n                       style={{\"color\": \"var(--default-text)\"}}>CCDC</a>\n                    <button onClick={() => {\n                        dispatch(addToPreviewList(currentObject))\n                        dispatch(openPreviewList(\"\"))\n                        dispatch(closePreview(false))\n                    }}>\n                        <AddIcon fontSize={\"small\"}/>\n                    </button>\n                    <button onClick={() => dispatch(closePreview(false))}>\n                        <CloseIcon fontSize={\"small\"}/>\n                    </button>\n                </div>\n            </div>\n            {content}\n        </div>\n    )\n\n}\n\nexport default PreviewPanel;","import \"./styles.css\";\n\nimport React, { useEffect, useState } from \"react\";\nimport {SigmaContainer, ZoomControl, FullScreenControl, ForceAtlasControl, useSigma} from \"react-sigma-v2\";\nimport getNodeProgramImage from \"sigma/rendering/webgl/programs/node.image\";\nimport { omit, mapValues, keyBy, constant } from \"lodash\";\nimport {ForceAtlas2} from 'react-sigma';\nimport GraphSettingsController from \"./GraphSettingsController\";\nimport GraphEventsController from \"./GraphEventsController\";\nimport GraphDataController from \"./GraphDataController\";\nimport DescriptionPanel from \"./DescriptionPanel\";\nimport ClustersPanel from \"./ClustersPanel\";\nimport SearchField from \"./SearchField\";\nimport drawLabel from \"../canvas-utils\";\nimport { CompareAppMenu } from \"../CompareAppMenu\";\nimport \"react-sigma-v2/lib/react-sigma-v2.css\";\nimport { GrClose } from \"react-icons/gr\";\nimport { BiRadioCircleMarked, BiBookContent } from \"react-icons/bi\";\nimport { BsArrowsFullscreen, BsFullscreenExit, BsZoomIn, BsZoomOut } from \"react-icons/bs\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    getBox, getBreakout,\n    getCamera,\n    getComp,\n    getGraphType,\n    getK,\n    getKx, getKy,\n    getMeasure,\n    getThreshold, setCamera,\n    setMaxThreshold, setRendering\n} from \"../../../features/compare/compareSlice\";\nimport {Loading} from \"../../../Loading\";\nimport PreviewPanel from \"../../PreviewPanel\";\nimport {getAccessToken} from \"../../../features/auth/authSlice\";\n\n\nfunction XYAxis() {\n    let box = useSelector(getBox)\n    let gt = useSelector(getGraphType)\n    let amdx = useSelector(getKx)\n    let amdy = useSelector(getKy)\n    let xlab = \"x\"\n    let ylab = \"y\"\n    if (gt === \"amd\") {\n        xlab = `AMD ${amdx}`\n        ylab = `AMD ${amdy}`\n    }\n    let dispatch = useDispatch()\n    let sigma = useSigma()\n\n    useEffect(() => {\n        console.log(\"inside request animation frame\")\n        let point01 = sigma.viewportToGraph({x: 0, y: 0})\n        let dims = sigma.getDimensions()\n        let point00 = sigma.viewportToGraph({x: 0, y: dims.height})\n        let point11 = sigma.viewportToGraph({x: dims.width, y: dims.height})\n\n        let box = {\"x0\": point01.x,\n            \"y1\": point01.y,\n            \"y0\": point00.y,\n            \"x1\": point11.x\n        }\n        dispatch(setCamera(box))\n    });\n    let axisNeeded = gt === \"amd\" || gt === \"mds\"\n    if (!axisNeeded)\n        return (\n            <div></div>\n        )\n\n    return (\n        <div id=\"xy-axis-outer\">\n            <div id=\"xy-axis-inner\">\n\n            </div>\n            <div id=\"tick-upper-left\" className=\"tick\">\n                <p>{box[\"y1\"].toFixed(2)}</p>\n            </div>\n            <div id={\"y-label\"}>\n                <p>{ylab}</p>\n            </div>\n            <div id=\"tick-lower-left\" className=\"tick\">\n                <p>{`(${box[\"x0\"].toFixed(2)}, ${box[\"y0\"].toFixed(2)})`}</p>\n            </div>\n            <div id={\"x-label\"}>\n                <p>{xlab}</p>\n            </div>\n            <div id=\"tick-lower-right\" className=\"tick\">\n                <p>{box[\"x1\"].toFixed(2)}</p>\n            </div>\n        </div>\n    )\n}\n\nconst Root = () => {\n    const dispatch = useDispatch()\n    let token = useSelector(getAccessToken)\n    let names = useSelector(getComp)\n    let graphType = useSelector(getGraphType)\n    let k = useSelector(getK)\n    let k_x = useSelector(getKx)\n    let k_y = useSelector(getKy)\n    let measure = useSelector(getMeasure)\n    let breakout = useSelector(getBreakout)\n\n    const [showContents, setShowContents] = useState(false);\n    const [dataReady, setDataReady] = useState(false);\n    const [loading, setLoading] = useState(false)\n    const [dataset, setDataset] = useState(null);\n    const [filtersState, setFiltersState] = useState({\n        clusters: {},\n        tags: {},\n    });\n    const [hoveredNode, setHoveredNode] = useState(null);\n    const [hoveredEdge, setHoveredEdge] = useState(null)\n\n    // Load data on mount:\n    useEffect(() => {\n        console.log(\"Hitting Python API\")\n        setLoading(true)\n        fetch('/api/compare/job', {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer: ${token}`,\n                'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>',\n                'Content-Length': '<calculated when request is sent>'\n            },\n            body: JSON.stringify({\"names\": names})\n        })\n            .then((data) => data.json())\n            .then((d) => {\n                let url = `/api/compare/${graphType}/${measure}/${k}?threshold=${5}&names=${d[\"callback\"]}&breakout=${breakout}`\n                if (graphType === \"amd\"){\n                    url = `/api/compare/${graphType}/${k_x}/${k_y}?names=${d[\"callback\"]}&breakout=${breakout}&edge_k=${k}`\n                }\n                return url\n            })\n            .then(url => {\n                fetch(url, {\n                    headers: {\n                        'Authorization': `Bearer: ${token}`,\n                    }\n                })\n                    .then((res) => res.json())\n                    .then((dataset) => {\n                        setDataset(dataset);\n                        dispatch(setMaxThreshold(dataset.max))\n                        setFiltersState({\n                            clusters: mapValues(keyBy(dataset.clusters, \"key\"), constant(true)),\n                            tags: mapValues(keyBy(dataset.tags, \"key\"), constant(true)),\n                        });\n                        requestAnimationFrame(() => {\n                            setDataReady(true)\n                            setLoading(false)\n                        });\n                    });\n            })\n\n    }, [breakout, dispatch, graphType, k, k_x, k_y, measure, names]);\n\n\n    if (loading)\n        return (\n            <Loading style={{\"display\": \"grid\",\n                             \"justify-content\": \"center\",\n                             \"align-content\": \"center\",\n                             \"height\": \"100vh\",\n                             \"background\": \"transparent\"}}/>\n        )\n    if (!dataReady)\n        return null;\n\n\n    return (\n        <div id=\"app-root\" className={showContents ? \"show-contents\" : \"\"}>\n            <SigmaContainer\n                graphOptions={{ type: \"undirected\" }}\n                initialSettings={{\n                    nodeProgramClasses: { image: getNodeProgramImage() },\n                    labelRenderer: drawLabel,\n                    defaultNodeType: \"image\",\n                    defaultEdgeType: \"line\",\n                    labelDensity: 0.07,\n                    labelGridCellSize: 60,\n                    labelRenderedSizeThreshold: 15,\n                    labelFont: \"Lato, sans-serif\",\n                    zIndex: false,\n                    minCameraRatio: 0.1,\n                    maxCameraRatio: 1,\n                    renderEdgeLabels: true,\n                }}\n                className=\"react-sigma\"\n            >\n                <GraphSettingsController hoveredNode={hoveredNode} hoveredEdge={hoveredEdge} />\n                <GraphEventsController setHoveredNode={setHoveredNode} setHoveredEdge={setHoveredEdge} />\n                <GraphDataController dataset={dataset} filters={filtersState} />\n                {dataReady && (\n                    <>\n                        <XYAxis/>\n                        <PreviewPanel/>\n                        <div className=\"contents\">\n                            <div className=\"ico\">\n                                <button\n                                    type=\"button\"\n                                    className=\"ico hide-contents\"\n                                    onClick={() => setShowContents(false)}\n                                    title=\"Show caption and description\"\n                                >\n                                    <GrClose />\n                                </button>\n                            </div>\n                            <div className={\"panels\"}>\n                                <SearchField filters={filtersState} />\n                                <ClustersPanel\n                                    clusters={dataset.clusters}\n                                    filters={filtersState}\n                                    setClusters={(clusters) =>\n                                        setFiltersState((filters) => ({\n                                            ...filters,\n                                            clusters,\n                                        }))\n                                    }\n                                    toggleCluster={(cluster) => {\n                                        setFiltersState((filters) => ({\n                                            ...filters,\n                                            clusters: filters.clusters[cluster]\n                                                ? omit(filters.clusters, cluster)\n                                                : { ...filters.clusters, [cluster]: true },\n                                        }));\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    </>\n                )}\n            </SigmaContainer>\n        </div>\n    );\n\n};\n\nexport default Root;\n","import React, {useEffect, useState, useCallback} from \"react\";\nimport ForceGraph2D from 'react-force-graph-2d';\nimport {\n    getBreakout,\n    getComp,\n    getK,\n    getMeasure,\n    getThreshold,\n    setMaxThreshold\n} from \"../../features/compare/compareSlice\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {Loading} from \"../../Loading\";\nimport {getHeight, getWidth, setSize} from \"../../features/app/appSlice\";\n\n\nconst ForceWrapper = ({data}) => {\n    let width = useSelector(getWidth)\n    let height = useSelector(getHeight)\n\n    console.log(width, height)\n\n    return (\n        <ForceGraph2D\n            id={\"my-force-graph\"}\n            width={width}\n            height={height}\n            graphData={data}\n            nodeAutoColorBy=\"group\"\n            nodeLabel=\"id\"\n        />\n    )\n}\n\n\nexport const ForceDirectedGraph = ({size}) => {\n    const [loading, setLoading] = useState(false)\n    const [data, setData] = useState(null)\n    const [dataReady, setDataReady] = useState(false)\n    const [highlightNodes, setHighlightNodes] = useState(new Set());\n    const [highlightLinks, setHighlightLinks] = useState(new Set());\n    const [hoverNode, setHoverNode] = useState(null);\n\n    let measure = useSelector(getMeasure)\n    let token = useSelector(getAccessToken)\n    let names = useSelector(getComp)\n    let breakout = useSelector(getBreakout)\n    let k = useSelector(getK)\n    let dispatch = useDispatch()\n    let threshold = useSelector(getThreshold)\n    dispatch(setSize({\"height\": size.height, \"width\": size.width}))\n\n\n    const NODE_R = 0\n\n    useEffect(() => {\n        console.log(\"Hitting Python API\")\n        setLoading(true)\n        fetch('/api/compare/job', {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer: ${token}`,\n                'Content-Type': 'multipart/form-data; boundary=<calculated when request is sent>',\n                'Content-Length': '<calculated when request is sent>'\n            },\n            body: JSON.stringify({\"names\": names})\n        })\n            .then((data) => data.json())\n            .then((d) => {\n                let url = `/api/compare/force/${measure}/${k}?threshold=${threshold}&names=${d[\"callback\"]}&breakout=${breakout}`\n                return url\n            })\n            .then(url => {\n                fetch(url, {\n                    headers: {\n                        'Authorization': `Bearer: ${token}`,\n                    }\n                })\n                    .then((res) => res.json())\n                    .then((dataset) => {\n                        setData(dataset);\n                        dispatch(setMaxThreshold(dataset.max))\n                        requestAnimationFrame(() => {\n                            setDataReady(true)\n                            setLoading(false)\n                        });\n                    });\n            })\n\n    }, [breakout, dispatch, k, measure, names]);\n\n\n    const updateHighlight = () => {\n        setHighlightNodes(highlightNodes);\n        setHighlightLinks(highlightLinks);\n    };\n\n    const handleNodeHover = node => {\n        highlightNodes.clear();\n        highlightLinks.clear();\n        if (node) {\n            highlightNodes.add(node);\n            node.neighbors.forEach(neighbor => highlightNodes.add(neighbor));\n            node.links.forEach(link => highlightLinks.add(link));\n        }\n\n        setHoverNode(node || null);\n        updateHighlight();\n    };\n\n    const handleLinkHover = link => {\n        highlightNodes.clear();\n        highlightLinks.clear();\n\n        if (link) {\n            highlightLinks.add(link);\n            highlightNodes.add(link.source);\n            highlightNodes.add(link.target);\n        }\n\n        updateHighlight();\n    };\n\n    const paintRing = useCallback((node, ctx) => {\n        // add ring just for highlighted nodes\n        ctx.beginPath();\n        ctx.arc(node.x, node.y, NODE_R * 1.4, 0, 2 * Math.PI, false);\n        ctx.fillStyle = node === hoverNode ? 'red' : 'orange';\n        ctx.fill();\n    }, [hoverNode]);\n\n\n\n    if (loading)\n        return (\n            <Loading style={{\"display\": \"grid\",\n                \"justify-content\": \"center\",\n                \"align-content\": \"center\",\n                \"height\": \"100vh\",\n                \"background\": \"transparent\"}}/>\n        )\n    if (!dataReady)\n        return null;\n\n\n    let filteredLinks = data.links.filter((link) => {\n        return link.value < threshold\n    })\n\n    let filteredData = {\n        nodes: data.nodes,\n        links: filteredLinks\n    }\n\n    console.log(filteredData)\n    return (\n        <div className={\"force-graph-wrapper\"}>\n            <ForceWrapper data={filteredData}/>\n        </div>\n    )\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport {getComp, getGraphType} from \"../../features/compare/compareSlice\";\nimport {OpenCompareMenu} from \"./CompareAppMenu\";\nimport {MyResponsiveCirclePacking} from \"./CirclePacking\";\nimport {MyResponsiveSunburst} from \"./Sunburst\";\nimport Root from \"./views/Root\";\nimport * as React from \"react\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ManageAccountsIcon from \"@mui/icons-material/ManageAccounts\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport {ForceDirectedGraph} from \"./ForceDirectedGraph\";\nimport { SizeMe } from 'react-sizeme'\nimport {setSize} from \"../../features/app/appSlice\";\n\n\nfunction CompareAppPlotPlaceHolder(props) {\n    return (\n        <div id=\"plot-app-placeholder\">\n            <div id=\"plot-app-placeholder-message\">\n                <ul>\n                    <li>\n                        <h1>\n                            Create new crystals using <AddIcon fontSize={\"large\"}/>\n                        </h1>\n                    </li>\n                    <li>\n                        <h1>\n                            Search for crystals using <SearchIcon fontSize={\"large\"}/>\n                        </h1>\n                    </li>\n                    <li>\n                        <h1>\n                            Change account settings with <ManageAccountsIcon fontSize={\"large\"}/>\n                        </h1>\n                    </li>\n                    <li>\n                        <h1>\n                            Logout using <LogoutIcon fontSize={\"large\"}/>\n                        </h1>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    )\n}\n\n\nexport function CompareAppPlot({size}) {\n\n    const graphType = useSelector(getGraphType)\n    const comp = useSelector(getComp)\n    let dispatch = useDispatch()\n\n    let graph = <CompareAppPlotPlaceHolder/>;\n\n    if (comp.length !== 0) {\n        if (graphType === \"circle\"){\n            graph = <>\n                <MyResponsiveCirclePacking/>\n            </>\n        } else if (graphType === \"sunburst\") {\n            graph = <>\n                <MyResponsiveSunburst/>\n            </>\n        } else if (graphType === \"force\") {\n            /*graph = <SizeMe\n                monitorHeight\n                refreshRate={32}\n                render={({ size }) => {\n                    console.log(size)\n                    return <ForceDirectedGraph size={size}/>\n                }}\n            />*/\n            graph = <ForceDirectedGraph size={size}/>\n        } else {\n            graph = <>\n                <Root/>\n            </>\n        }\n    }\n\n    return (\n        <>\n            <div className=\"compare-app-plot\">\n                { graph }\n            </div>\n        </>\n    )\n}","import {QueryResult} from \"./QueryResult\";\nimport React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {getResults} from \"../../features/search/searchSlice\";\nimport \"./search.scss\"\nimport {LoadingCustom} from \"../../Loading\";\n\n\nexport const SearchResults = () => {\n    let results = useSelector(getResults)\n\n    if (results.data === null || results.data === undefined || results.data.length === 0)\n        return <p style={{'text-align': 'center',\n            'color': 'var(--defaulttext)',\n            'position': 'relative', 'top': '45%', 'left':'20%', 'text-style':'italic'}}>No Results to show..</p>\n\n    return (\n        <>\n            {\n                results.loading &&\n                <div style={{\"display\": \"grid\", \"justify-content\": \"center\", \"align-content\": \"center\"}}>\n                    <LoadingCustom width={\"100%\"} height={\"100%\"} innerHeight={\"95%\"} innerWidth={\"100px\"}/>\n                </div>\n            }\n            {\n                results['data'].length > 0 && !results.loading &&\n                results.data.map((i) => <QueryResult data={i}/>)\n            }\n        </>\n    )\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport {change, getCompType, getFacet, getK, getNorm, getResultSize} from \"../../features/search/searchSlice\";\nimport React from \"react\";\nimport {SearchFacetSettings} from \"./SearchFacetSettings\";\n\nexport function SearchSettings({}){\n    let dispatch = useDispatch()\n    let k = useSelector(getK)\n    let resSize = useSelector(getResultSize)\n    let n = useSelector(getNorm)\n    let compType = useSelector(getCompType)\n\n\n    return (\n        <div id=\"search-panel-settings\">\n            <p>{`Result Size: ${resSize}`}</p>\n            <input type=\"range\" id=\"search-result-size\" name=\"search-result-size\" onChange={e => dispatch(change({\"resultSize\": e.target.value}))}\n                   min=\"10\" max=\"500\" value={resSize} step=\"10\" className={\"range-style\"}  />\n            <br/>\n            <h6>Distance</h6>\n            <p>{`Nearest Neighbors (Distance Only): ${k}`}</p>\n            <input type=\"range\" id=\"search-k\" name=\"search-k\" onChange={e => dispatch(change({\"k\": e.target.value}))}\n                   min=\"1\" max=\"100\" value={k} step=\"1\" className={\"range-style\"}  />\n            <p>{`Norm (Distance Only): ${n}`}</p>\n            <input type=\"range\" id=\"search-n\" name=\"search-n\" onChange={e => dispatch(change({\"n\": e.target.value}))}\n                   min=\"0\" max=\"10\" value={n} step=\"1\" className={\"range-style\"}  />\n            <br/>\n            <h6>Composition</h6>\n            <select name=\"Form:\" id=\"composition-facet\" value={compType}\n                    onChange={ e => dispatch(change({\"compType\": e.target.value}))}>\n                <option value=\"standard\">Standard</option>\n                <option value=\"coprime\">Prime</option>\n            </select>\n        </div>\n    )\n}","import React, {useState,useEffect} from 'react'\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    changeContent,\n    closeSearchPanel,\n    getContent,\n    getSearchPanelOpened,\n} from \"../../features/search/searchSlice\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport ListIcon from '@mui/icons-material/List';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport cx from \"classnames\";\nimport {SearchBar} from \"./SearchBar\";\nimport {SearchResults} from \"./SearchResults\";\nimport {SearchSettings} from \"./SearchSettings\";\n\n\nfunction SearchPanel({}) {\n    let dispatch = useDispatch()\n    let open = useSelector(getSearchPanelOpened)\n    let currentContent = useSelector(getContent)\n    let content = <SearchResults/>;\n\n    if (currentContent === \"settings\")\n        content = <SearchSettings/>;\n\n\n    console.log(`Search Panel: ${open}`)\n    return (\n        <div className={cx(\"search-panel\", {\"open\": open})}>\n            <div className=\"close-button-container\">\n                <button onClick={() => dispatch(closeSearchPanel(false))}>\n                    <CloseIcon fontSize={\"small\"}/>\n                </button>\n                <button onClick={() => dispatch(changeContent(\"settings\"))}>\n                    <SettingsIcon fontSize={\"small\"}/>\n                </button>\n                <button onClick={() => dispatch(changeContent(\"results\"))}>\n                    <ListIcon fontSize={\"small\"}/>\n                </button>\n\n            </div>\n            { content }\n        </div>\n    )\n\n}\n\nexport default SearchPanel;","import {useSelector} from \"react-redux\";\nimport {getPreviewList, getPreviewListOpen} from \"../../features/compare/compareSlice\";\nimport {QueryResult} from \"../search/QueryResult\";\nimport React from \"react\";\nimport {PreviewListItem} from \"../PreviewPanel\";\nimport cx from \"classnames\"\n\n\nexport const PreviewList = () => {\n    let pl = useSelector(getPreviewList)\n    let open = useSelector(getPreviewListOpen)\n    console.log(pl)\n    let previews = <>\n        {pl.map((i) => <PreviewListItem name={i}/>)}\n    </>\n    return (\n        <div className={cx(\"preview-list\", {\"open\": open})}>\n            {previews}\n        </div>\n    )\n}","import * as React from \"react\";\nimport './Compare.scss'\nimport  'csv-parser'\nimport {CompareAppPlot} from \"./CompareAppPlot\";\nimport SearchPanel from \"../search/SearchPanel\";\nimport PreviewPanel from \"../PreviewPanel\";\nimport {PreviewList} from \"./PreviewList\";\nimport ClustersPanel from \"./views/ClustersPanel\";\nimport {omit} from \"lodash\";\nimport SearchField from \"./views/SearchField\";\nimport {CompareAppMenu} from \"./CompareAppMenu\";\nimport {CrystalList} from \"../search/CrystalList\";\nimport { SizeMe } from 'react-sizeme'\n\n\nexport function CompareAppMain({}) {\n\n    return (\n        <div className=\"compare-app-main\">\n            <SearchPanel/>\n            <SizeMe\n                monitorHeight\n                refreshRate={32}\n                render={({ size }) => {\n                    return <CompareAppPlot size={size}/>\n                }}\n            />\n            <PreviewList/>\n            <CrystalList/>\n            <CompareAppMenu/>\n        </div>\n    )\n}\n","import * as React from \"react\";\nimport './Compare.scss'\nimport {CompareAppTopBar} from \"./CompareAppTopBar\";\nimport {CompareAppMain} from \"./CompareAppMain\";\nimport {useSelector} from \"react-redux\";\nimport {getOpenApp} from \"../../features/app/appSlice\";\nimport cx from \"classnames\"\n\n\nexport const CompareApp = () => {\n    const openApp = useSelector(getOpenApp)\n\n\n    return (\n        <div className={cx(\"compare-app\", {\"hidden\": openApp !== \"compare\"})}>\n            <CompareAppTopBar/>\n            <CompareAppMain/>\n        </div>\n    )\n}\n","import AddIcon from \"@mui/icons-material/Add\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ManageAccountsIcon from \"@mui/icons-material/ManageAccounts\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport * as React from \"react\";\nimport {Canvas,} from \"@react-three/fiber\";\nimport {Controls, } from \"../PreviewPanel\";\nimport * as THREE from \"three\";\nimport {MeshBasicMaterial} from \"three\";\n\n\nexport const Plane = () => {\n    const size = 10;\n    const divisions = 10;\n\n    const gridHelper = new THREE.GridHelper( 400, 40, 0x0000ff, 0x808080 );\n    const m = new THREE.Mesh(gridHelper, new MeshBasicMaterial())\n    return (\n        <primitive object={gridHelper} position={[-5, -5, -5]} />\n    );\n}\n\n\nexport function ViewAppPlaceHolder(props) {\n    return (\n        <div id=\"view-app-placeholder\">\n            <Canvas className=\"view-app-canvas\" style={{\"height\": \"100%\", \"width\": \"100%\"}}\n                    camera={{ position: [10, 10, 10], fov: 62 }}>\n                <ambientLight />\n                <pointLight position={[1, 1, 1]} />\n                <Plane/>\n                <Controls/>\n            </Canvas>\n        </div>\n    )\n}","\n\nexport const PeriodicTable = () => {\n    return (\n        <div className=\"periodic-table\">\n            <div id={\"Li\"} className=\"periodic-table__element periodic-table__element--alkali-metal li\">\n                <div className=\"name\">Lithium</div>\n                <div className=\"atomic-number\">3</div>\n                <div className=\"symbol\">Li</div>\n                <div className=\"atomic-weight\">6.94</div>\n            </div>\n            <div id={\"Na\"} className=\"periodic-table__element periodic-table__element--alkali-metal na\">\n                <div className=\"name\">Sodium</div>\n                <div className=\"atomic-number\">11</div>\n                <div className=\"symbol\">Na</div>\n                <div className=\"atomic-weight\">22.990</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkali-metal k\">\n                <div className=\"name\">Potassium</div>\n                <div className=\"atomic-number\">19</div>\n                <div className=\"symbol\">K</div>\n                <div className=\"atomic-weight\">39.098</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkali-metal rb\">\n                <div className=\"name\">Rubidium</div>\n                <div className=\"atomic-number\">37</div>\n                <div className=\"symbol\">Rb</div>\n                <div className=\"atomic-weight\">85.468</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkali-metal cs\">\n                <div className=\"name\">Caesium</div>\n                <div className=\"atomic-number\">55</div>\n                <div className=\"symbol\">Cs</div>\n                <div className=\"atomic-weight\">132.91</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkali-metal fr\">\n                <div className=\"name\">Francium</div>\n                <div className=\"atomic-number\">87</div>\n                <div className=\"symbol\">Fr</div>\n                <div className=\"atomic-weight\">[223]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal be\">\n                <div className=\"name\">Berilium</div>\n                <div className=\"atomic-number\">4</div>\n                <div className=\"symbol\">Be</div>\n                <div className=\"atomic-weight\">9.0122</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal mg\">\n                <div className=\"name\">Magnesium</div>\n                <div className=\"atomic-number\">12</div>\n                <div className=\"symbol\">Mg</div>\n                <div className=\"atomic-weight\">24.305</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal ca\">\n                <div className=\"name\">Calcium</div>\n                <div className=\"atomic-number\">20</div>\n                <div className=\"symbol\">Ca</div>\n                <div className=\"atomic-weight\">40.078</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal sr\">\n                <div className=\"name\">Stronium</div>\n                <div className=\"atomic-number\">38</div>\n                <div className=\"symbol\">Sr</div>\n                <div className=\"atomic-weight\">87.62</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal ba\">\n                <div className=\"name\">Barium</div>\n                <div className=\"atomic-number\">56</div>\n                <div className=\"symbol\">Ba</div>\n                <div className=\"atomic-weight\">137.33</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--alkaline-earth-metal ra\">\n                <div className=\"name\">Radium</div>\n                <div className=\"atomic-number\">88</div>\n                <div className=\"symbol\">Ra</div>\n                <div className=\"atomic-weight\">[226]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal sc\">\n                <div className=\"name\">Scandium</div>\n                <div className=\"atomic-number\">21</div>\n                <div className=\"symbol\">Sc</div>\n                <div className=\"atomic-weight\">44.956</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal y\">\n                <div className=\"name\">Yttrium</div>\n                <div className=\"atomic-number\">39</div>\n                <div className=\"symbol\">Y</div>\n                <div className=\"atomic-weight\">88.906</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ti\">\n                <div className=\"name\">Titanium</div>\n                <div className=\"atomic-number\">22</div>\n                <div className=\"symbol\">Ti</div>\n                <div className=\"atomic-weight\">47.867</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal zr\">\n                <div className=\"name\">Zirconium</div>\n                <div className=\"atomic-number\">40</div>\n                <div className=\"symbol\">Zr</div>\n                <div className=\"atomic-weight\">91.224</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal hf\">\n                <div className=\"name\">Hafnium</div>\n                <div className=\"atomic-number\">72</div>\n                <div className=\"symbol\">Hf</div>\n                <div className=\"atomic-weight\">178.49</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal rf\">\n                <div className=\"name\">Rutherfordium</div>\n                <div className=\"atomic-number\">104</div>\n                <div className=\"symbol\">Rf</div>\n                <div className=\"atomic-weight\">[267]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal v\">\n                <div className=\"name\">Vanadium</div>\n                <div className=\"atomic-number\">23</div>\n                <div className=\"symbol\">V</div>\n                <div className=\"atomic-weight\">50.942</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal nb\">\n                <div className=\"name\">Niobium</div>\n                <div className=\"atomic-number\">41</div>\n                <div className=\"symbol\">Nb</div>\n                <div className=\"atomic-weight\">92.906</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ta\">\n                <div className=\"name\">Tantalum</div>\n                <div className=\"atomic-number\">73</div>\n                <div className=\"symbol\">Ta</div>\n                <div className=\"atomic-weight\">180.95</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal db\">\n                <div className=\"name\">Dubnium</div>\n                <div className=\"atomic-number\">105</div>\n                <div className=\"symbol\">Db</div>\n                <div className=\"atomic-weight\">[268]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal cr\">\n                <div className=\"name\">Chromium</div>\n                <div className=\"atomic-number\">24</div>\n                <div className=\"symbol\">Cr</div>\n                <div className=\"atomic-weight\">51.996</div>\n            </div>\n\n            <div className=\"periodic-table__element periodic-table__element--transition-metal mo\">\n                <div className=\"name\">Molybdenum</div>\n                <div className=\"atomic-number\">42</div>\n                <div className=\"symbol\">Mo</div>\n                <div className=\"atomic-weight\">95.95</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal w\">\n                <div className=\"name\">Tungsten</div>\n                <div className=\"atomic-number\">74</div>\n                <div className=\"symbol\">W</div>\n                <div className=\"atomic-weight\">183.84</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal sg\">\n                <div className=\"name\">Seaborgium</div>\n                <div className=\"atomic-number\">106</div>\n                <div className=\"symbol\">Sg</div>\n                <div className=\"atomic-weight\">[268]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal mn\">\n                <div className=\"name\">Manganese</div>\n                <div className=\"atomic-number\">25</div>\n                <div className=\"symbol\">Mn</div>\n                <div className=\"atomic-weight\">54.938</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal tc\">\n                <div className=\"name\">Technetium</div>\n                <div className=\"atomic-number\">43</div>\n                <div className=\"symbol\">Tc</div>\n                <div className=\"atomic-weight\">[98]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal re\">\n                <div className=\"name\">Rhenium</div>\n                <div className=\"atomic-number\">75</div>\n                <div className=\"symbol\">Re</div>\n                <div className=\"atomic-weight\">186.21</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal bh\">\n                <div className=\"name\">Bohrium</div>\n                <div className=\"atomic-number\">107</div>\n                <div className=\"symbol\">Bh</div>\n                <div className=\"atomic-weight\">[270]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal fe\">\n                <div className=\"name\">Iron</div>\n                <div className=\"atomic-number\">26</div>\n                <div className=\"symbol\">Fe</div>\n                <div className=\"atomic-weight\">55.845</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ru\">\n                <div className=\"name\">Ruthenium</div>\n                <div className=\"atomic-number\">44</div>\n                <div className=\"symbol\">Ru</div>\n                <div className=\"atomic-weight\">101.07</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal os\">\n                <div className=\"name\">Osmium</div>\n                <div className=\"atomic-number\">76</div>\n                <div className=\"symbol\">Os</div>\n                <div className=\"atomic-weight\">190.23</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal hs\">\n                <div className=\"name\">Hassium</div>\n                <div className=\"atomic-number\">108</div>\n                <div className=\"symbol\">Hs</div>\n                <div className=\"atomic-weight\">[270]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal co\">\n                <div className=\"name\">Cobalt</div>\n                <div className=\"atomic-number\">27</div>\n                <div className=\"symbol\">Co</div>\n                <div className=\"atomic-weight\">58.933</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal rh\">\n                <div className=\"name\">Rhodium</div>\n                <div className=\"atomic-number\">45</div>\n                <div className=\"symbol\">Rh</div>\n                <div className=\"atomic-weight\">102.91</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ir\">\n                <div className=\"name\">Iridium</div>\n                <div className=\"atomic-number\">77</div>\n                <div className=\"symbol\">Ir</div>\n                <div className=\"atomic-weight\">192.22</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ni\">\n                <div className=\"name\">Nickel</div>\n                <div className=\"atomic-number\">28</div>\n                <div className=\"symbol\">Ni</div>\n                <div className=\"atomic-weight\">58.693</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal pd\">\n                <div className=\"name\">Palladium</div>\n                <div className=\"atomic-number\">46</div>\n                <div className=\"symbol\">Pd</div>\n                <div className=\"atomic-weight\">106.42</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal pt\">\n                <div className=\"name\">Platinum</div>\n                <div className=\"atomic-number\">78</div>\n                <div className=\"symbol\">Pt</div>\n                <div className=\"atomic-weight\">195.08</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal cu\">\n                <div className=\"name\">Copper</div>\n                <div className=\"atomic-number\">29</div>\n                <div className=\"symbol\">Cu</div>\n                <div className=\"atomic-weight\">63.546</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal ag\">\n                <div className=\"name\">Silver</div>\n                <div className=\"atomic-number\">47</div>\n                <div className=\"symbol\">Ag</div>\n                <div className=\"atomic-weight\">107.87</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--transition-metal au\">\n                <div className=\"name\">Gold</div>\n                <div className=\"atomic-number\">79</div>\n                <div className=\"symbol\">Au</div>\n                <div className=\"atomic-weight\">196.97</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal zn\">\n                <div className=\"name\">Zn</div>\n                <div className=\"atomic-number\">30</div>\n                <div className=\"symbol\">Zn</div>\n                <div className=\"atomic-weight\">65.38</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal cd\">\n                <div className=\"name\">Cadmium</div>\n                <div className=\"atomic-number\">48</div>\n                <div className=\"symbol\">Cd</div>\n                <div className=\"atomic-weight\">112.41</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal hg\">\n                <div className=\"name\">Mercury</div>\n                <div className=\"atomic-number atomic-number--green\">80</div>\n                <div className=\"symbol\">Hg</div>\n                <div className=\"atomic-weight\">200.59</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal cn\">\n                <div className=\"name\">Coppernicum</div>\n                <div className=\"atomic-number\">112</div>\n                <div className=\"symbol\">Cn</div>\n                <div className=\"atomic-weight\">[285]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal al\">\n                <div className=\"name\">Aluminium</div>\n                <div className=\"atomic-number\">13</div>\n                <div className=\"symbol\">Al</div>\n                <div className=\"atomic-weight\">26.982</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal ga\">\n                <div className=\"name\">Gallium</div>\n                <div className=\"atomic-number\">31</div>\n                <div className=\"symbol\">Ga</div>\n                <div className=\"atomic-weight\">69.723</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal in\">\n                <div className=\"name\">Indium</div>\n                <div className=\"atomic-number\">49</div>\n                <div className=\"symbol\">In</div>\n                <div className=\"atomic-weight\">114.82</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal tl\">\n                <div className=\"name\">Thallium</div>\n                <div className=\"atomic-number\">81</div>\n                <div className=\"symbol\">Tl</div>\n                <div className=\"atomic-weight\">204.38</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal sn\">\n                <div className=\"name\">Tin</div>\n                <div className=\"atomic-number\">50</div>\n                <div className=\"symbol\">Sn</div>\n                <div className=\"atomic-weight\">118.71</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal pb\">\n                <div className=\"name\">Lead</div>\n                <div className=\"atomic-number\">82</div>\n                <div className=\"symbol\">Pb</div>\n                <div className=\"atomic-weight\">207.2</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal bi\">\n                <div className=\"name\">Bismuth</div>\n                <div className=\"atomic-number\">83</div>\n                <div className=\"symbol\">Bi</div>\n                <div className=\"atomic-weight\">208.98</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--post-transition-metal po\">\n                <div className=\"name\">Polonium</div>\n                <div className=\"atomic-number\">84</div>\n                <div className=\"symbol\">Po</div>\n                <div className=\"atomic-weight\">[209]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid b\">\n                <div className=\"name\">Boron</div>\n                <div className=\"atomic-number\">5</div>\n                <div className=\"symbol\">B</div>\n                <div className=\"atomic-weight\">10.81</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid si\">\n                <div className=\"name\">Silicon</div>\n                <div className=\"atomic-number\">14</div>\n                <div className=\"symbol\">Si</div>\n                <div className=\"atomic-weight\">28.085</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid ge\">\n                <div className=\"name\">Germanium</div>\n                <div className=\"atomic-number\">32</div>\n                <div className=\"symbol\">Ge</div>\n                <div className=\"atomic-weight\">76.630</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid as\">\n                <div className=\"name\">Arsenic</div>\n                <div className=\"atomic-number\">33</div>\n                <div className=\"symbol\">As</div>\n                <div className=\"atomic-weight\">74.922</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid sb\">\n                <div className=\"name\">Antimony</div>\n                <div className=\"atomic-number\">51</div>\n                <div className=\"symbol\">Sb</div>\n                <div className=\"atomic-weight\">121.76</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid te\">\n                <div className=\"name\">Tellurium</div>\n                <div className=\"atomic-number\">52</div>\n                <div className=\"symbol\">Te</div>\n                <div className=\"atomic-weight\">127.60</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--metaloid at\">\n                <div className=\"name\">Astatine</div>\n                <div className=\"atomic-number\">82</div>\n                <div className=\"symbol\">At</div>\n                <div className=\"atomic-weight\">[210]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal\">\n                <div className=\"name\">Hydrogen</div>\n                <div className=\"atomic-number\">1</div>\n                <div className=\"symbol\">H</div>\n                <div className=\"atomic-weight\">1.008</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal c\">\n                <div className=\"name\">Carbon</div>\n                <div className=\"atomic-number\">6</div>\n                <div className=\"symbol\">C</div>\n                <div className=\"atomic-weight\">12.011</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal n\">\n                <div className=\"name\">Nitrogen</div>\n                <div className=\"atomic-number\">7</div>\n                <div className=\"symbol\">N</div>\n                <div className=\"atomic-weight\">14.007</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal o\">\n                <div className=\"name\">Oxygen</div>\n                <div className=\"atomic-number\">8</div>\n                <div className=\"symbol\">O</div>\n                <div className=\"atomic-weight\">15.999</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal f\">\n                <div className=\"name\">Fluorine</div>\n                <div className=\"atomic-number\">9</div>\n                <div className=\"symbol\">F</div>\n                <div className=\"atomic-weight\">18.998</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal p\">\n                <div className=\"name\">Phosphorus</div>\n                <div className=\"atomic-number\">15</div>\n                <div className=\"symbol\">P</div>\n                <div className=\"atomic-weight\">30.974</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal s\">\n                <div className=\"name\">Sulfur</div>\n                <div className=\"atomic-number\">16</div>\n                <div className=\"symbol\">S</div>\n                <div className=\"atomic-weight\">32.06</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal cl\">\n                <div className=\"name\">Chlorine</div>\n                <div className=\"atomic-number\">17</div>\n                <div className=\"symbol\">Cl</div>\n                <div className=\"atomic-weight\">35.45</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal se\">\n                <div className=\"name\">Selenium</div>\n                <div className=\"atomic-number\">34</div>\n                <div className=\"symbol\">Se</div>\n                <div className=\"atomic-weight\">78.971</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal br\">\n                <div className=\"name\">Bromine</div>\n                <div className=\"atomic-number\">35</div>\n                <div className=\"symbol\">Br</div>\n                <div className=\"atomic-weight\">79.904</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--reactive-nonmetal i\">\n                <div className=\"name\">Iodine</div>\n                <div className=\"atomic-number\">53</div>\n                <div className=\"symbol\">I</div>\n                <div className=\"atomic-weight\">126.90</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--lanthanide la\">\n                <div className=\"name\">Lanthanum</div>\n                <div className=\"atomic-number\">57</div>\n                <div className=\"symbol\">La</div>\n                <div className=\"atomic-weight\">138.91</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--actinide ac\">\n                <div className=\"name\">Actinium</div>\n                <div className=\"atomic-number\">89</div>\n                <div className=\"symbol\">Ac</div>\n                <div className=\"atomic-weight\">[227]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas he\">\n                <div className=\"name\">Helium</div>\n                <div className=\"atomic-number\">2</div>\n                <div className=\"symbol\">He</div>\n                <div className=\"atomic-weight\">4.0026</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas ne\">\n                <div className=\"name\">Neon</div>\n                <div className=\"atomic-number\">10</div>\n                <div className=\"symbol\">Ne</div>\n                <div className=\"atomic-weight\">20.180</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas he\">\n                <div className=\"name\">Argon</div>\n                <div className=\"atomic-number\">18</div>\n                <div className=\"symbol\">Ar</div>\n                <div className=\"atomic-weight\">39.948</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas he\">\n                <div className=\"name\">Krypton</div>\n                <div className=\"atomic-number\">36</div>\n                <div className=\"symbol\">Kr</div>\n                <div className=\"atomic-weight\">83.798</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas he\">\n                <div className=\"name\">Xenon</div>\n                <div className=\"atomic-number\">54</div>\n                <div className=\"symbol\">Xe</div>\n                <div className=\"atomic-weight\">131.29</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--noble-gas he\">\n                <div className=\"name\">Radon</div>\n                <div className=\"atomic-number\">86</div>\n                <div className=\"symbol\">Rn</div>\n                <div className=\"atomic-weight\">[222]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown og\">\n                <div className=\"name\">Ogannesson</div>\n                <div className=\"atomic-number\">118</div>\n                <div className=\"symbol\">Og</div>\n                <div className=\"atomic-weight\">[294]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown mt\">\n                <div className=\"name\">Meitnerium</div>\n                <div className=\"atomic-number\">109</div>\n                <div className=\"symbol\">Mt</div>\n                <div className=\"atomic-weight\">[278]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown ds\">\n                <div className=\"name\">Darmstadtium</div>\n                <div className=\"atomic-number\">110</div>\n                <div className=\"symbol\">Ds</div>\n                <div className=\"atomic-weight\">[281]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown rg\">\n                <div className=\"name\">Roentgenium</div>\n                <div className=\"atomic-number\">111</div>\n                <div className=\"symbol\">Rg</div>\n                <div className=\"atomic-weight\">[282]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown nh\">\n                <div className=\"name\">Nihonium</div>\n                <div className=\"atomic-number\">113</div>\n                <div className=\"symbol\">Nh</div>\n                <div className=\"atomic-weight\">[286]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown fl\">\n                <div className=\"name\">Flerovium</div>\n                <div className=\"atomic-number\">114</div>\n                <div className=\"symbol\">Fl</div>\n                <div className=\"atomic-weight\">[289]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown mc\">\n                <div className=\"name\">Moscovium</div>\n                <div className=\"atomic-number\">115</div>\n                <div className=\"symbol\">Mc</div>\n                <div className=\"atomic-weight\">[290]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown lv\">\n                <div className=\"name\">Livermorium</div>\n                <div className=\"atomic-number\">116</div>\n                <div className=\"symbol\">Lv</div>\n                <div className=\"atomic-weight\">[293]</div>\n            </div>\n            <div className=\"periodic-table__element periodic-table__element--unknown ts\">\n                <div className=\"name\">Tennessine</div>\n                <div className=\"atomic-number\">117</div>\n                <div className=\"symbol\">Ts</div>\n                <div className=\"atomic-weight\">[294]</div>\n            </div>\n        </div>\n\n    )\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport {getMenuOpen, setMenuOpen} from \"../../features/view/viewSlice\";\nimport cx from \"classnames\";\nimport {BiChevronLeft} from \"react-icons/bi\";\nimport * as React from \"react\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport {PeriodicTable} from \"./PeriodicTable\";\nimport {useState} from \"react\";\n\n\nconst ElementSettings = (elem) => {\n    return (\n        <div className={\"element-settings\"}>\n\n        </div>\n    )\n}\n\n\nexport const ViewAppElementSettings = ({}) => {\n    let open = useSelector(getMenuOpen) === \"element\"\n    let dispatch = useDispatch()\n    const [elem, setElem] = useState(\"\");\n\n    return (\n        <div className={cx(\"view-app-menu\", {\"open\": open})}>\n            <div className={\"view-app-menu-container\"}>\n                <h6>ELEMENT SETTINGS</h6>\n                <PeriodicTable/>\n            </div>\n        </div>\n    )\n}","import * as React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {getObject} from \"../../features/preview/previewSlice\";\nimport {useEffect, useState} from \"react\";\nimport {Canvas} from \"@react-three/fiber\";\nimport {Molecule, Controls, UnitCell} from \"../PreviewPanel\";\nimport {getComp} from \"../../features/compare/compareSlice\";\nimport {Plane, ViewAppPlaceHolder} from \"./ViewAppPlaceholder\";\nimport {Loading} from \"../../Loading\";\nimport \"./view.scss\"\nimport {getViewObject} from \"../../features/view/viewSlice\";\nimport { ViewAppElementSettings} from \"./ViewAppElementSettings\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\n\nexport const ViewAppCanvas = () => {\n    let currentObject = useSelector(getViewObject)\n    let token = useSelector(getAccessToken)\n\n    const [dataset, setDataset] = useState(null);\n    const [loading, setLoading] = useState(false)\n\n    useEffect(() => {\n        setLoading(true)\n        fetch(`/api/crystal/id/${currentObject}`, {\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json'\n            }\n        }).then(data => data.json())\n            .then((d) => {\n                let id = d[\"id\"]\n                fetch(`/api/crystal/molecule/${id}`, {\n                    headers: {\n                        'Authorization': `Bearer:${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }).then(data => data.json())\n                    .then((d) => {\n                        setDataset(d)\n                        setLoading(false)\n                    })\n            })\n    }, [currentObject])\n\n    if (currentObject === undefined) {\n        return (\n            <ViewAppPlaceHolder/>\n        )\n    }\n\n    if (loading)\n        return (\n            <Loading style={{\"display\": \"grid\",\n                \"justify-content\": \"center\",\n                \"align-content\": \"center\",\n                \"height\": \"100vh\",\n                \"background\": \"var(--defaultprimary)\"}}/>\n        )\n\n    let content = <div className=\"no-atom-geometry-content\">\n        <p>No Geometry found.</p>\n    </div>\n\n\n\n    if (dataset != null && !loading && dataset.atoms) {\n\n        content =\n            <>\n                <Canvas className=\"view-app-canvas\"\n                        camera={{ position: [10, 10, 10], fov: 62 }}>\n                    <ambientLight />\n                    <pointLight position={[1, 1, 1]} />\n                    <Molecule dataset={dataset} rotY={0.00} rotX={0.0} center={false}/>\n                    <UnitCell dataset={dataset}/>\n                    <Plane/>\n                    <Controls/>\n                </Canvas>\n                <ViewAppElementSettings/>\n            </>\n\n    }\n    return (\n        <div className={\"view-app-main-canvas\"}>\n            { content }\n        </div>\n    )\n}","import * as React from \"react\";\nimport './view.scss'\nimport  'csv-parser'\nimport SearchPanel from \"../search/SearchPanel\";\nimport {ViewAppCanvas} from \"./ViewAppCanvas\";\nimport {ViewAppElementSettings} from \"./ViewAppElementSettings\";\n\n\nexport function ViewAppMain({}) {\n\n    return (\n        <div className=\"view-app-main\">\n            <SearchPanel/>\n            <ViewAppCanvas/>\n            <ViewAppElementSettings/>\n        </div>\n    )\n}\n","import * as React from \"react\";\nimport './view.scss'\nimport {SearchBar} from \"../search/SearchBar\";\nimport {openSearchPanel, toggleSearchPanel} from \"../../features/search/searchSlice\";\nimport {useDispatch} from \"react-redux\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport ListIcon from \"@mui/icons-material/List\";\nimport SettingsIcon from \"@mui/icons-material/Settings\";\nimport PreviewIcon from \"@mui/icons-material/Preview\";\nimport DeleteIcon from \"@mui/icons-material/Delete\"\nimport WorkspacesIcon from \"@mui/icons-material/Workspaces\"\nimport ManageSearchIcon from \"@mui/icons-material/ManageSearch\"\nimport {toggleMenu} from \"../../features/view/viewSlice\";\nimport {SearchFacetSettings} from \"../search/SearchFacetSettings\";\nimport { DiAtom } from 'react-icons/di';\n\nexport function ViewAppTopBar() {\n    const dispatch = useDispatch()\n\n    const testOpen = () => {\n        console.log(\"opening panel\")\n    }\n\n    return (\n        <>\n            <div className=\"view-app-top-bar\">\n                <div className={\"left-content\"}>\n                    <button onClick={() => dispatch(toggleSearchPanel(\"\"))}>\n                        <SearchIcon/>\n                    </button>\n                    <SearchBar/>\n                    <p>by:</p>\n                    <SearchFacetSettings/>\n                </div>\n                <div className={\"right-content\"}>\n                    <button onClick={() => dispatch(toggleMenu(true))}>\n                        <DiAtom size={\"24\"}/>\n                    </button>\n                    <button >\n                        <DeleteIcon/>\n                    </button>\n                </div>\n            </div>\n        </>\n    )\n}\n","import * as React from \"react\";\nimport './view.scss'\nimport {ViewAppMain} from \"./ViewAppMain\";\nimport {ViewAppTopBar} from \"./ViewAppTopBar\";\nimport {useSelector} from \"react-redux\";\nimport {getOpenApp} from \"../../features/app/appSlice\";\nimport cx from \"classnames\";\n\nexport const ViewApp = () => {\n    const openApp = useSelector(getOpenApp)\n\n    return (\n        <div className={cx(\"view-app\", {\"hidden\": openApp !== \"view\"})}>\n            <ViewAppTopBar/>\n            <ViewAppMain/>\n        </div>\n    )\n}\n","import ScienceIcon from \"@mui/icons-material/Science\";\nimport ListIcon from \"@mui/icons-material/List\";\nimport StorageIcon from \"@mui/icons-material/Storage\";\nimport React, {useState} from \"react\";\nimport cx from \"classnames\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getCurrentTab, setTab} from \"../../features/create/createSlice\";\n\n\nexport const CreateAppTopBar = () => {\n    let dispatch = useDispatch()\n    let tab = useSelector(getCurrentTab)\n    const getClass = (currTab, thisTab) => {\n        return cx(\"create-app-tab-button\", {\"selected\": currTab === thisTab})\n    }\n\n    return (\n        <div className={\"create-app-top-bar\"}>\n            <div className={\"left-content\"}>\n                <div className=\"create-app-tabs\">\n                    <button className={getClass(\"crystal\", tab)} onClick={() => dispatch(setTab(\"crystal\"))}>\n                        <ScienceIcon fontSize={\"small\"}/>\n                        Crystal\n                    </button>\n                    <button className={getClass(\"subset\", tab)} onClick={() => dispatch(setTab(\"subset\"))}>\n                        <ListIcon fontSize={\"small\"}/>\n                        Subset\n                    </button>\n                    <button className={getClass(\"source\", tab)} onClick={() => dispatch(setTab(\"source\"))}>\n                        <StorageIcon fontSize={\"small\"}/>\n                        Source\n                    </button>\n                </div>\n            </div>\n            <div className={\"right-content\"}>\n\n            </div>\n        </div>\n    )\n}","import React, {useState} from \"react\";\n\n\nexport const InputField = ({label, ph, name, id}) => {\n    return (\n        <div className=\"form__group field\">\n            <input type=\"input\" className=\"form__field\" placeholder={ph} name={name} id={id} required/>\n            <label htmlFor={name} className=\"form__label\">{label}</label>\n        </div>\n    )\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport cx from 'classnames';\nimport {getCoordinateSystem, setCoordinateSystem} from \"../../features/create/createSlice\";\n\nexport const CreateAppCoordinateSwitch = () => {\n    let dispatch = useDispatch()\n    let coordSys = useSelector(getCoordinateSystem)\n    let useFract = coordSys === \"fract\"\n    let useCart = !useFract\n\n    return (\n        <div id={\"button-switch\"} className={\"button-switch\"}>\n            <button className={cx(\"switch-button\", {active: useFract})}\n                    onClick={() => dispatch(setCoordinateSystem(\"fract\"))}>Fractional</button>\n            <button className={cx(\"switch-button\", {active: useCart})}\n                    onClick={() => dispatch(setCoordinateSystem(\"cartn\"))}>Cartesian</button>\n        </div>\n    )\n}","\nexport function gcd(a, b) {\n    if (a === 0)\n        return b;\n    return gcd(b % a, a);\n}\n\nexport function findGCD(arr, n) {\n    let result = arr[0];\n    for (let i = 1; i < n; i++) {\n        result = gcd(arr[i], result);\n\n        if (result === 1) {\n            return 1;\n        }\n    }\n    return result;\n}\n\nexport const prime_comp = (composition) => {\n    if (composition) {\n        if (composition.includes(\".\"))\n            return composition\n        else {\n            let re = /[a-zA-Z]+\\d+[.]?/g\n            let matches = [...composition.matchAll(re)]\n            let counts = matches.map((x) => x[0])\n\n            let elems = counts.map((x) => {\n                const re = /[a-zA-Z]+/g\n                return [...x.matchAll(re)]\n            }).map((x) => x[0][0])\n\n            let elem_counts = counts.map((x) => {\n                const re = /[\\d]+/g\n                return [...x.matchAll(re)]\n            }).map((x) => parseInt(x[0]))\n            const gcd_counts = findGCD(elem_counts, elem_counts.length)\n            const prime_counts = elem_counts.map((x) => x / gcd_counts)\n            let prime_comp = \"\"\n            for (let i = 0; i < elems.length; i++){\n                prime_comp += elems[i] + prime_counts[i] + \" \"\n            }\n            return prime_comp.slice(0, -1)\n        }\n    } else {\n        return \"\"\n    }\n}\n\nexport const extractCrystalMetaData = (cifAsJson) => {\n    return {\n        \"MnemonicId\": 0,\n        \"Composition\": cifAsJson[\"_chemical_formula_sum\"] || \"\",\n        \"PrimeComposition\": prime_comp(cifAsJson[\"_chemical_formula_sum\"]) || \"\",\n        \"ChemicalName\": cifAsJson[\"_chemical_name_common\"] || \"\",\n        \"Has3dStructure\": cifAsJson[\"_atom_site\"] === undefined || true,\n        \"IsDisordered\": cifAsJson[\"_atom_site\"][\"_atom_site_disorder_group\"] || false,\n    }\n}\n\nconst removeTrailing = (str) => {\n    if (str)\n        return safeParse(str.split(\"(\")[0])\n    else\n        return undefined\n}\n\n// OK\nexport const extractAtoms = (cifAsJson) => {\n    if (cifAsJson[\"_atom_site\"]) {\n        return cifAsJson[\"_atom_site\"].map((atom) => {\n            return {\n                \"X\": removeTrailing(atom[\"_atom_site_fract_x\"]),\n                \"X_cart\": removeTrailing(atom[\"_atom_site_cartn_x\"]),\n                \"Y\": removeTrailing(atom[\"_atom_site_fract_y\"]),\n                \"Y_cart\": removeTrailing(atom[\"_atom_site_cartn_y\"]),\n                \"Z\": removeTrailing(atom[\"_atom_site_fract_z\"]),\n                \"Z_cart\": removeTrailing(atom[\"_atom_site_cartn_z\"]),\n                \"Label\": atom[\"_atom_site_label\"],\n                \"Symbol\": atom[\"_atom_site_type_symbol\"]\n            }\n        })\n    } else {\n        return []\n    }\n}\n\n// OK\nexport const extractBonds = (cifAsJson) => {\n    if (cifAsJson[\"_geom_bond\"]) {\n        return cifAsJson[\"_geom_bond\"].map((bond) => {\n            return {\n                \"Label1\": bond[\"_geom_bond_atom_site_label_1\"],\n                \"Label2\": bond[\"_geom_bond_atom_site_label_2\"],\n                \"Distance\": removeTrailing(bond[\"_geom_bond_distance\"]),\n            }\n        })\n    } else {\n        return []\n    }\n}\n\nconst safeParse = (val) => {\n    if (val)\n        return parseFloat(val)\n    else return undefined\n}\n\nexport const extractUnitCell = (cifAsJson) => {\n    let symm = \"(\"\n    if (cifAsJson._space_group_symop_operation_xyz) {\n        symm += cifAsJson._space_group_symop_operation_xyz.reduce((total, n) => \"'\" + n._space_group_symop_operation_xyz + \"',\" + total, \"\")\n    } else if (cifAsJson._symmetry_equiv_pos) {\n        symm += cifAsJson._symmetry_equiv_pos.reduce((total, n) => \"'\" + n._symmetry_equiv_pos_as_xyz + \"',\" + total, \"\")\n    }\n\n    let final_symm = symm.slice(0, -1) + \")\"\n\n    return {\n        \"A\": safeParse(cifAsJson[\"_cell_length_a\"]),\n        \"B\": safeParse(cifAsJson[\"_cell_length_b\"]),\n        \"C\": safeParse(cifAsJson[\"_cell_length_c\"]),\n        \"Alpha\": safeParse(cifAsJson[\"_cell_angle_alpha\"]),\n        \"Beta\": safeParse(cifAsJson[\"_cell_angle_beta\"]),\n        \"Gamma\": safeParse(cifAsJson[\"_cell_angle_gamma\"]),\n        \"CellVolume\": safeParse(cifAsJson[\"_cell_volume\"]),\n        \"SymmetryOperators\": final_symm\n    }\n}","import cx from \"classnames\"\nimport {InputField} from \"../base/InputField\";\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    setReadingFile,\n    setCurrentMessage,\n    getCurrentMessage,\n    getCoordinateSystem, getSource,\n    getStatus, setStatus\n} from \"../../features/create/createSlice\";\nimport { cifParser } from 'cif-to-json';\nimport {LoadingCustom} from \"../../Loading\";\nimport {\n    addAccessToken,\n    addRefreshToken,\n    getAccessToken,\n    getCurrentUser,\n    getRefreshToken\n} from \"../../features/auth/authSlice\";\nimport {refresh} from \"../base/refresh\";\nimport {CreateAppSourceDropdown} from \"./CreateAppSourceDropdown\";\nimport {CreateAppCoordinateSwitch} from \"./CreateAppCoordinateSwitch\";\nimport {BsCheckCircle, BsXCircle} from 'react-icons/bs'\nimport {findGCD, gcd, prime_comp} from \"../home/CIFHelpers\";\n\n\nexport const InputItem = ({id, label, onChange, value}) => {\n    return (\n        <div className={\"input-item\"}>\n            <label htmlFor={id}>{label}</label>\n            <br/>\n            <input type={\"text\"} id={id} onChange={onChange} value={value}/>\n        </div>\n    )\n}\n\n\nexport const DataItem = ({label, value}) => {\n    return (\n        <div className={\"data-item\"}>\n            <p>{label}</p>\n            <p>{value}</p>\n        </div>\n    )\n}\n\nexport const check = (item) => {\n    if (item === undefined)\n        return \"\"\n    else return item\n}\n\nexport const AtomRow = ({data}) => {\n    let coordinateSystem = useSelector(getCoordinateSystem)\n\n    return (\n        <tr>\n            <td>{check(data._atom_site_label)}</td>\n            <td>{check(data._atom_site_type_symbol)}</td>\n            <td>{check(data[`_atom_site_${coordinateSystem}_x`])}</td>\n            <td>{check(data[`_atom_site_${coordinateSystem}_y`])}</td>\n            <td>{check(data[`_atom_site_${coordinateSystem}_z`])}</td>\n        </tr>\n    )\n}\n\nconst BondRow = ({data}) => {\n    return (\n        <tr>\n            <td>{check(data._geom_bond_atom_site_label_1)}</td>\n            <td>{check(data._geom_bond_atom_site_label_2)}</td>\n            <td>{check(data._geom_bond_distance)}</td>\n        </tr>\n    )\n}\n\nconst SymmetryRow = ({data}) => {\n    return (\n        <tr>\n            <td>{check(data._symmetry_equiv_pos_site_id)}</td>\n            <td>{check(data._symmetry_equiv_pos_as_xyz)}</td>\n        </tr>\n    )\n}\n\nconst SymmetryRow2 = ({data}) => {\n    console.log(data._space_group_symop_operation_xyz)\n    return (\n        <tr>\n            <td>{check(data._space_group_symop_operation_xyz)}</td>\n        </tr>\n    )\n}\n\nconst CreationProgress = () => {\n    let message = useSelector(getCurrentMessage)\n    let status = useSelector(getStatus)\n    console.log(message)\n    return (\n        <div className={\"creation-progress\"}>\n            {!(status === \"complete\") || <BsCheckCircle size={60}/>}\n            {!(status === \"loading\") || <LoadingCustom width={\"100px\"} height={\"100px\"} />}\n            {!(status === \"failed\") || <BsXCircle size={60}/>}\n            <h4>{message}</h4>\n        </div>\n    )\n}\n\n\nconst extractCrystalMetaData = (cifAsJson) => {\n    console.log(\"inside extract cmd\")\n    console.log(cifAsJson)\n    return {\n        \"MnemonicId\": 0,\n        \"Composition\": cifAsJson[\"_chemical_formula_sum\"] || \"\",\n        \"PrimeComposition\": prime_comp(cifAsJson[\"_chemical_formula_sum\"]) || \"\",\n        \"ChemicalName\": cifAsJson[\"_chemical_name_common\"] || \"\",\n        \"Has3dStructure\": cifAsJson[\"_atom_site\"] === undefined || true,\n        \"IsDisordered\": cifAsJson[\"_atom_site\"][\"_atom_site_disorder_group\"] || false,\n    }\n}\n\nconst removeTrailing = (str) => {\n    if (str)\n        return safeParse(str.split(\"(\")[0])\n    else\n        return undefined\n}\n\nconst extractAtoms = (cifAsJson, id) => {\n    if (cifAsJson[\"_atom_site\"]) {\n        return cifAsJson[\"_atom_site\"].map((atom) => {\n            return {\n                \"CrystalID\": id,\n                \"X\": removeTrailing(atom[\"_atom_site_fract_x\"]),\n                \"X_cart\": removeTrailing(atom[\"_atom_site_cartn_x\"]),\n                \"Y\": removeTrailing(atom[\"_atom_site_fract_y\"]),\n                \"Y_cart\": removeTrailing(atom[\"_atom_site_cartn_y\"]),\n                \"Z\": removeTrailing(atom[\"_atom_site_fract_z\"]),\n                \"Z_cart\": removeTrailing(atom[\"_atom_site_cartn_z\"]),\n                \"Label\": atom[\"_atom_site_label\"],\n                \"Symbol\": atom[\"_atom_site_type_symbol\"]\n            }\n        })\n    } else {\n        return []\n    }\n}\n\nconst extractBonds = (cifAsJson, id) => {\n    if (cifAsJson[\"_geom_bond\"]) {\n        return cifAsJson[\"_geom_bond\"].map((bond) => {\n            return {\n                \"CrystalID\": id,\n                \"Label1\": bond[\"_geom_bond_atom_site_label_1\"],\n                \"Label2\": bond[\"_geom_bond_atom_site_label_2\"],\n                \"Distance\": removeTrailing(bond[\"_geom_bond_distance\"]),\n            }\n        })\n    } else {\n        return []\n    }\n}\n\nconst safeParse = (val) => {\n    if (val)\n        return parseFloat(val)\n    else return undefined\n}\n\nconst extractUnitCell = (cifAsJson, id) => {\n    let symm = \"(\"\n    if (cifAsJson._space_group_symop_operation_xyz) {\n        symm += cifAsJson._space_group_symop_operation_xyz.reduce((total, n) => \"'\" + n._space_group_symop_operation_xyz + \"',\" + total, \"\")\n    } else if (cifAsJson._symmetry_equiv_pos) {\n        symm += cifAsJson._symmetry_equiv_pos.reduce((total, n) => \"'\" + n._symmetry_equiv_pos_as_xyz + \"',\" + total, \"\")\n    }\n\n    let final_symm = symm.slice(0, -1) + \")\"\n\n    return {\n        \"CrystalID\": id,\n        \"A\": safeParse(cifAsJson[\"_cell_length_a\"]),\n        \"B\": safeParse(cifAsJson[\"_cell_length_b\"]),\n        \"C\": safeParse(cifAsJson[\"_cell_length_c\"]),\n        \"Alpha\": safeParse(cifAsJson[\"_cell_angle_alpha\"]),\n        \"Beta\": safeParse(cifAsJson[\"_cell_angle_beta\"]),\n        \"Gamma\": safeParse(cifAsJson[\"_cell_angle_gamma\"]),\n        \"CellVolume\": safeParse(cifAsJson[\"_cell_volume\"]),\n        \"SymmetryOperators\": final_symm\n    }\n}\n\n\n\n\nexport const CreateAppMainCrystal = ({open}) => {\n    let dispatch = useDispatch()\n    const [isFilePicked, setIsFilePicked] = useState(false);\n    const [isParsed, setIsParsed] = useState(false)\n    const [cifAsJson, setCifAsJson] = useState(null)\n    const [refCode, setRefCode] = useState(\"\")\n    const [polymorph, setPolymorph] = useState(\"\")\n    const [disabled, setDisabled] = useState(true)\n    const [family, setFamily] = useState(\"\")\n\n    let token = useSelector(getAccessToken)\n    let refreshToken = useSelector(getRefreshToken)\n    let user = useSelector(getCurrentUser)\n    let source = useSelector(getSource)\n\n    const parseCIF = (fileContents) => {\n        let result = cifParser(fileContents);\n        console.log(result)\n        return result\n    }\n\n    const changeHandler = async(event) => {\n        const file = event.target.files.item(0)\n        dispatch(setReadingFile(true))\n        const text = await file.text();\n        let parsed = parseCIF(text)\n        dispatch(setReadingFile(false))\n        setIsFilePicked(true)\n        setCifAsJson(parsed)\n        setIsParsed(true)\n        setDisabled(refCode === \"\" || false || family === \"\")\n    };\n\n    const createCrystal = async(event) => {\n        if (disabled)\n            return\n\n        dispatch(setStatus(\"loading\"))\n        fetch(\"/api/token/refresh\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\"refresh\": refreshToken})\n        })\n            .then((resp) => {\n                if (resp.status !== 200) {\n                    sessionStorage.clear()\n                    dispatch(addAccessToken(undefined))\n                    dispatch(addRefreshToken(undefined))\n                } else {\n                    resp.json()\n                        .then((r) => {\n                            console.log(r)\n                            let jwt = {\n                                \"access\": r.access,\n                                \"refresh\": r.refresh,\n                                \"user\": user\n                            }\n                            sessionStorage.setItem('token', JSON.stringify(jwt))\n                            dispatch(addAccessToken(jwt[\"access\"]))\n                            dispatch(addRefreshToken(jwt[\"refresh\"]))\n                        })\n                }\n            })\n\n        if (refCode === \"\") {\n            dispatch(setCurrentMessage(\"Please enter a Reference Code\"))\n            dispatch(setStatus(\"failed\"))\n            return\n        }\n\n        if (!isFilePicked) {\n            dispatch(setCurrentMessage(\"Please Select a CIF file\"))\n            dispatch(setStatus(\"failed\"))\n            return\n        }\n\n        dispatch(setCurrentMessage(\"Extracting meta data..\"))\n        let crystal = extractCrystalMetaData(cifAsJson)\n\n        fetch(`/api/crystal/`, {\n            method: \"POST\",\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                ...crystal,\n                \"Polymorph\": polymorph,\n                \"SourceID\": parseInt(source) || 0,\n                \"name\": refCode,\n                \"family\": family,\n            })\n        }).then((resp) => {\n            dispatch(setCurrentMessage(\"Adding Crystal Meta data..\"))\n            if (resp.status !== 200) {\n                dispatch(setCurrentMessage(\"Crystal Creation Failed.\"))\n                dispatch(setStatus(\"failed\"))\n            } else {\n                resp.json().then((data) => {\n                    console.log(data)\n                    let id = data[\"data\"][\"ID\"]\n                    dispatch(setCurrentMessage(\"Extracting atoms..\"))\n                    let atoms = extractAtoms(cifAsJson, id)\n                    dispatch(setCurrentMessage(\"Extracting bonds..\"))\n                    let bonds = extractBonds(cifAsJson, id)\n                    dispatch(setCurrentMessage(\"Extracting unit cell..\"))\n                    let unitCell = extractUnitCell(cifAsJson, id)\n                    dispatch(setCurrentMessage(\"Checking Reference Code..\"))\n                    fetch(`/api/crystal/${id}`, {\n                        method: 'POST',\n                        headers: {\n                            'Authorization': `Bearer:${token}`,\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({\n                            \"atoms\": atoms,\n                            \"bonds\": bonds,\n                            \"unitCell\": unitCell,\n                        })\n                    }).then((data) => {\n                        if (data.status !== 200) {\n                            dispatch(setCurrentMessage(\"Error occurred during crystal creation\"))\n                            dispatch(setStatus(\"failed\"))\n                        } else {\n                            dispatch(setStatus(\"complete\"))\n                            dispatch(setCurrentMessage(\"Crystal Creation Successful\"))\n                        }\n                    })\n                })\n            }\n        })\n    }\n\n    return (\n        <div className={cx(\"create-tab-content\", {\"open\": open})}>\n            <div className={\"create-tab-crystal-meta-panel\"}>\n                <h6>From CIF:</h6>\n                <input type=\"file\" id=\"myFile\" name=\"filename\" onChange={changeHandler}/>\n                <br/>\n                <CreateAppCoordinateSwitch/>\n                <div>\n                    <div className=\"create-crystal-options-meta\">\n                        <InputItem label={\"Reference Code:\"} id={\"new-crystal-refcode\"}\n                                   value={refCode}\n                                   onChange={(e) => {\n                                       setRefCode(e.target.value)\n                                       setFamily(e.target.value.replace(/\\d+$/, \"\"))\n                                       console.log(refCode)\n                                       console.log(family)\n                                       setDisabled(e.target.value === \"\" || !isFilePicked || e.target.value.replace(/\\d+$/, \"\") === \"\")\n                                       console.log(disabled)\n                                   }} />\n                        <InputItem label={\"Family:\"} id={\"new-crystal-family\"}\n                                   value={family}\n                                   onChange={(e) => {\n                                       setFamily(e.target.value)\n                                       setDisabled(refCode === \"\" || !isFilePicked || e.target.value === \"\")\n                                   }}\n                                    />\n                        <InputItem label={\"Polymorph: (Defaults to None)\"} id={\"new-crystal-polymorph\"}\n                                   onChange={(e) => setPolymorph(e.target.value)} />\n                    </div>\n                    <button className={cx(\"create-crystal-options-button\", {\"disabled\": disabled})} onClick={createCrystal}>Create</button>\n                </div>\n                <br/>\n                <CreationProgress/>\n            </div>\n            <div className={\"create-tab-crystal-cif-results-panel\"}>\n                <h3>Crystal Information</h3>\n                {isParsed && Object.keys(cifAsJson).map(function(key, index) {\n                    let v = cifAsJson[key]\n                    if (typeof v === \"string\" || v instanceof String){\n                        return <DataItem label={key} value={v}/>\n                    } else return undefined\n                })}\n                <h3>Symmetry Equivalence</h3>\n                <table>\n                    <thead>\n                    <tr>\n                        <th colSpan=\"1\">Position Site Id</th>\n                        <th colSpan=\"1\">Position X,Y,Z</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {isParsed && cifAsJson._symmetry_equiv_pos && cifAsJson._symmetry_equiv_pos.map(function (i) {\n                        return <SymmetryRow data={i}/>\n                    })}\n                    </tbody>\n                </table>\n                <table>\n                    <thead>\n                    <tr>\n                        <th colSpan=\"1\">Space Group Symmetry Operation</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {isParsed && cifAsJson._space_group_symop_operation_xyz && cifAsJson._space_group_symop_operation_xyz.map(function (i) {\n                        return <SymmetryRow2 data={i}/>\n                    })}\n                    </tbody>\n                </table>\n                <h3>Atom Information</h3>\n                <table>\n                    <thead>\n                    <tr>\n                        <th colSpan=\"1\">Label</th>\n                        <th colSpan=\"1\">Species</th>\n                        <th colSpan=\"1\">X</th>\n                        <th colSpan=\"1\">Y</th>\n                        <th colSpan=\"1\">Z</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {isParsed && cifAsJson._atom_site && cifAsJson._atom_site.map(function (i) {\n                        return <AtomRow data={i}/>\n                    })}\n                    </tbody>\n                </table>\n                <h3>Bond Information</h3>\n                <table>\n                    <thead>\n                    <tr>\n                        <th colSpan=\"1\">Bond Label 1</th>\n                        <th colSpan=\"1\">Bond Label 2</th>\n                        <th colSpan=\"1\">Distance</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {isParsed && cifAsJson._geom_bond && cifAsJson._geom_bond.map(function (i) {\n                        return <BondRow data={i}/>\n                    })}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    )\n}","import cx from \"classnames\";\nimport {InputItem} from \"./CreateAppMainCrystal\";\nimport React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {\n    getCurrentMessage,\n    getStatus,\n    getSubsetMessage,\n    getSubsetStatus,\n    setSubsetMessage, setSubsetStatus\n} from \"../../features/create/createSlice\";\nimport {LoadingCustom} from \"../../Loading\";\nimport {BsCheckCircle, BsXCircle} from \"react-icons/bs\";\n\nconst CreationProgress = () => {\n    let message = useSelector(getSubsetMessage)\n    let status = useSelector(getSubsetStatus)\n    return (\n        <div className={\"creation-progress\"}>\n            {!(status === \"complete\") || <BsCheckCircle size={60}/>}\n            {!(status === \"loading\") || <LoadingCustom width={\"100px\"} height={\"100px\"} />}\n            {!(status === \"failed\") || <BsXCircle size={60}/>}\n            <h4>{message}</h4>\n        </div>\n    )\n}\n\n\nexport const CreateAppMainSubset = ({open}) => {\n    const [name, setName] = useState(\"\")\n    const [refCodes, setRefCodes] = useState([])\n    const [refCodeText, setRefCodeText] = useState(\"\")\n    const [disabled, setDisabled] = useState(true)\n    const dispatch = useDispatch()\n    let token = useSelector(getAccessToken)\n\n    const createSubset = async() => {\n        if (!disabled) {\n            dispatch(setSubsetMessage(\"Creating Subset..\"))\n            dispatch(setSubsetStatus(\"loading\"))\n            fetch(`/api/subset/`, {\n                method: \"POST\",\n                headers: {\n                    'Authorization': `Bearer:${token}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    \"Name\": name,\n                    \"CrystalIds\": refCodes,\n                })\n            }).then((resp) => {\n                if (resp.status !== 200) {\n                    resp.json()\n                        .then((data) => {\n                            dispatch(setSubsetMessage(`Creation Failed: ${data[\"message\"] || \"\"}`))\n                            dispatch(setSubsetStatus(\"failed\"))\n                        })\n                } else {\n                    resp.json()\n                        .then((data) => {\n                            dispatch(setSubsetStatus(\"complete\"))\n                            dispatch(setSubsetMessage(\"Creation Successful.\"))\n                        })\n                }\n            })\n        }\n    }\n\n    return (\n        <div className={cx(\"create-tab-content\", {\"open\": open})}>\n            <div className={\"create-subset-panel\"}>\n                <InputItem label={\"Subset Name:\"} value={name} onChange={(e) => {\n                    setName(e.target.value)\n                    setDisabled(e.target.value === \"\" || refCodes.length === 0)\n                }}/>\n                <label>Reference Codes (Comma-Separated):</label>\n                <textarea className={\"create-panel-text-area\"}\n                    value={refCodeText} onChange={(e) => {\n                    setRefCodeText(e.target.value)\n                    let r  = e.target.value.split(\",\").map((x) => {\n                        return x.trim()\n                    })\n                    setRefCodes(r)\n                    setDisabled(e.target.value === \"\" || r.length === 0)\n                    console.log(refCodes)\n                }}/>\n                <button className={cx(\"create-crystal-options-button\", {\"disabled\": disabled})}\n                        onClick={createSubset}>Create</button>\n                <CreationProgress />\n            </div>\n        </div>\n    )\n}","import cx from \"classnames\";\nimport {InputItem} from \"./CreateAppMainCrystal\";\nimport React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {\n    getCurrentMessage,\n    getSourceMessage, getSourceStatus, setSourceMessage, setSourceStatus,\n} from \"../../features/create/createSlice\";\nimport {LoadingCustom} from \"../../Loading\";\nimport {BsCheckCircle, BsXCircle} from \"react-icons/bs\";\n\nconst CreationProgress = () => {\n    let message = useSelector(getSourceMessage)\n    let status = useSelector(getSourceStatus)\n    return (\n        <div className={\"creation-progress\"}>\n            {!(status === \"complete\") || <BsCheckCircle size={60}/>}\n            {!(status === \"loading\") || <LoadingCustom width={\"100px\"} height={\"100px\"} />}\n            {!(status === \"failed\") || <BsXCircle size={60}/>}\n            <h4>{message}</h4>\n        </div>\n    )\n}\n\n\nexport const CreateAppMainSource = ({open}) => {\n    const [name, setName] = useState(\"\")\n    const [urlRef, setURLRef] = useState(\"\")\n    const [disabled, setDisabled] = useState(true)\n\n    let token = useSelector(getAccessToken)\n    const dispatch = useDispatch()\n\n    const createSource = async() => {\n        if (!disabled) {\n            dispatch(setSourceMessage(\"Creating Source..\"))\n            dispatch(setSourceStatus(\"loading\"))\n            fetch(`/api/source/`, {\n                method: \"POST\",\n                headers: {\n                    'Authorization': `Bearer:${token}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    \"name\": name,\n                    \"url\": urlRef,\n                })\n            }).then((resp) => {\n                if (resp.status !== 200) {\n                    resp.json()\n                        .then((data) => {\n                            dispatch(setSourceMessage(`Creation Failed: ${data[\"message\"] || \"\"}`))\n                            dispatch(setSourceStatus(\"failed\"))\n                        })\n                } else {\n                    resp.json()\n                        .then((data) => {\n                            dispatch(setSourceMessage(\"Creation Successful.\"))\n                            dispatch(setSourceStatus(\"complete\"))\n                        })\n                }\n            })\n        }\n    }\n\n    return (\n        <div className={cx(\"create-tab-content\", {\"open\": open})}>\n            <div className={\"create-subset-panel\"}>\n                <InputItem label={\"Source Name:\"} value={name} onChange={(e) => {\n                    setName(e.target.value)\n                    setDisabled(e.target.value === \"\")\n                }}/>\n                <InputItem label={\"URL Reference:\"} value={urlRef} onChange={(e) => setURLRef(e.target.value)}/>\n                <button className={cx(\"create-crystal-options-button\", {\"disabled\": disabled})}\n                        onClick={createSource}>Create</button>\n                <CreationProgress />\n            </div>\n        </div>\n    )\n}","import {CreateAppMainCrystal} from \"./CreateAppMainCrystal\";\nimport {CreateAppMainSubset} from \"./CreateAppMainSubset\";\nimport {CreateAppMainSource} from \"./CreateAppMainSource\";\nimport {useSelector} from \"react-redux\";\nimport {getCurrentTab} from \"../../features/create/createSlice\";\n\n\nexport const CreateAppMain = () => {\n    let currentlyOpen = useSelector(getCurrentTab)\n\n    return (\n        <div className={\"create-app-main\"}>\n            <CreateAppMainCrystal open={currentlyOpen === \"crystal\"}/>\n            <CreateAppMainSubset open={currentlyOpen === \"subset\"}/>\n            <CreateAppMainSource open={currentlyOpen === \"source\"}/>\n        </div>\n    )\n}","import * as React from \"react\";\nimport './create.scss'\nimport {useSelector} from \"react-redux\";\nimport {getOpenApp} from \"../../features/app/appSlice\";\nimport cx from \"classnames\";\nimport {CreateAppTopBar} from \"./CreateAppTopBar\";\nimport {CreateAppMain} from \"./CreateAppMain\";\n\nexport const CreateApp = () => {\n    const openApp = useSelector(getOpenApp)\n\n    return (\n        <div className={cx(\"create-app\", {\"hidden\": openApp !== \"create\"})}>\n            <CreateAppTopBar/>\n            <CreateAppMain/>\n        </div>\n    )\n}\n","import React from \"react\";\n\n\nconst AtomRow = (data) => {\n    console.log(\"Atom row is\")\n    console.log(data.data)\n    return (\n        <tr>\n            <td>{data.data[\"Label\"]}</td>\n            <td>{data.data[\"Symbol\"]}</td>\n            <td>{data.data[\"X\"]}</td>\n            <td>{data.data[\"Y\"]}</td>\n            <td>{data.data[\"Z\"]}</td>\n        </tr>\n    )\n}\n\nexport const AtomTable = ({data}) => {\n    console.log(data)\n    return (\n        <div className={\"atom-info\"}>\n            <p>Atom Information</p>\n            <table className={\"atom-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">Label</th>\n                    <th colSpan=\"1\">Species</th>\n                    <th colSpan=\"1\">X</th>\n                    <th colSpan=\"1\">Y</th>\n                    <th colSpan=\"1\">Z</th>\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i) {\n                    return <AtomRow data={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from \"react\";\nimport {check} from \"../create/CreateAppMainCrystal\";\n\nconst BondRow = ({data}) => {\n    console.log(\"Bond Data is\")\n    console.log(data)\n    return (\n        <tr>\n            <td>{check(data.Label1)}</td>\n            <td>{check(data.Label2)}</td>\n            <td>{check(data.Distance)}</td>\n        </tr>\n    )\n}\n\nexport const BondTable = ({data}) => {\n    return (\n        <div className={\"bond-info\"}>\n            <p>Bond Information</p>\n            <table className={\"bond-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">Label 1</th>\n                    <th colSpan=\"1\">Label 2</th>\n                    <th colSpan=\"1\">Distance</th>\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i) {\n                    return <BondRow data={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from \"react\";\nimport {check} from \"../create/CreateAppMainCrystal\";\n\nconst UnitCellRow = ({data}) => {\n    console.log(\"Bond Data is\")\n    console.log(data)\n    return (\n        <tr>\n            <td>{check(data.A)}</td>\n            <td>{check(data.B)}</td>\n            <td>{check(data.C)}</td>\n            <td>{check(data.Alpha)}</td>\n            <td>{check(data.Beta)}</td>\n            <td>{check(data.Gamma)}</td>\n            <td>{check(data.CellVolume)}</td>\n        </tr>\n    )\n}\n\nexport const UnitCellTable = ({data}) => {\n    return (\n        <div className={\"unitcell-info\"}>\n            <p>Unit Cell Information</p>\n            <table className={\"unitcell-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">A</th>\n                    <th colSpan=\"1\">B</th>\n                    <th colSpan=\"1\">C</th>\n                    <th colSpan=\"1\">Alpha</th>\n                    <th colSpan=\"1\">Beta</th>\n                    <th colSpan=\"1\">Gamma</th>\n                    <th colSpan=\"1\">Cell Volume</th>\n                </tr>\n                </thead>\n                <tbody>\n                <UnitCellRow data={data}/>\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from \"react\";\n\n\nconst SymmetryRow = ({data}) => {\n    return (\n        <tr>\n            <td>{data}</td>\n        </tr>\n    )\n}\n\n\nexport const SymmetryTable = ({data}) => {\n    let splitSym = data.\n        replaceAll(\"(\", \"\").\n        replaceAll(\")\", \"\").\n        replaceAll(\" \", \"\").\n        replaceAll(\"\\\",\", \":\").\n        replaceAll(\"\\',\", \":\").\n        replaceAll(\"\\\"\", \"\").\n        replaceAll(\"'\", \"\").\n        split(\":\")\n\n    return (\n        <div className={\"symmetry-info\"}>\n            <p>Symmetry Information</p>\n            <table className={\"symmetry-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">Symmetry</th>\n                </tr>\n                </thead>\n                <tbody>\n                {\n                    splitSym.map((x) => <SymmetryRow data={x}/>)\n                }\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from \"react\";\nimport {check} from \"../create/CreateAppMainCrystal\";\n\nconst AMDRow = ({k, amd}) => {\n\n    return (\n        <tr>\n            <td>{k}</td>\n            <td>{amd.toFixed(6)}</td>\n        </tr>\n    )\n}\n\nexport const AMDTable = ({data}) => {\n    return (\n        <div className={\"amd-info\"}>\n            <p>Average-Minimum-Distance</p>\n            <table className={\"amd-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">Neighbor</th>\n                    <th colSpan=\"1\">AMD</th>\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i, ind) {\n                    return <AMDRow k={ind+1} amd={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}","import React from \"react\";\n\n\nconst PDDRow = ({pdd}) => {\n\n    return (\n        <tr>\n            {\n                pdd.map(function (x) {\n                    return <td>{x.toFixed(6)}</td>\n                })\n            }\n        </tr>\n    )\n}\n\nexport const PDDTable = ({data}) => {\n    return (\n        <div className={\"pdd-info\"}>\n            <p>Point-wise Distance Distribution</p>\n            <table className={\"pdd-table\"}>\n                <thead>\n                <tr>\n                    {\n                        data[0].map(function (i, ind) {\n                            if (ind === 0)\n                                return <th colSpan=\"1\">Weight</th>\n                            return <th colSpan=\"1\">{`Neighbor ${ind}`}</th>\n                        })\n                    }\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i, ind) {\n                    return <PDDRow pdd={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}","import cx from \"classnames\";\nimport React, {useState} from \"react\";\nimport {Controls, Molecule, MoleculeView} from \"../PreviewPanel\";\nimport {Canvas} from \"@react-three/fiber\";\nimport {AtomRow, DataItem} from \"../create/CreateAppMainCrystal\";\nimport {AtomTable} from \"./AtomTable\";\nimport {BondTable} from \"./BondTable\";\nimport {UnitCellTable} from \"./UnitCellTable\";\nimport {SymmetryTable} from \"./SymmetryTable\";\nimport {AMDTable} from \"./AMDTable\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {useSelector} from \"react-redux\";\nimport {PDDTable} from \"./PDDTable\";\n\n\nexport const CrystalAccordionBody = ({data}) => {\n    const [active, setActive] = useState(\"Crystal\")\n    const [metricsLoaded, setMetricsLoaded] = useState(false)\n    const [AMDs, setAMDs] = useState(null)\n    const [PDDs, setPDDs] = useState(null)\n    let token  = useSelector(getAccessToken)\n    console.log(`Data is ${data}`)\n    console.log(data)\n\n    const getMetrics = (e) => {\n        setActive(e)\n        if (!metricsLoaded) {\n            fetch(`/api/invariant/amd/${data.crystal.ID}/20`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer:${token}`,\n                },\n            })\n                .then(data => data.json())\n                .then((d) => {\n                    setAMDs(d.data)\n                    fetch(`/api/invariant/pdd/${data.crystal.ID}/20`, {\n                        method: 'GET',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Authorization': `Bearer:${token}`,\n                        },\n                    })\n                        .then(data => data.json())\n                        .then((d) => {\n                            setPDDs(d.data)\n                            setMetricsLoaded(true)\n                        })\n                })\n\n        }\n    }\n\n    return (\n        <>\n            <div className={\"part-1\"}>\n                <div className={\"top-bar\"}>\n                    <button className={cx(\"\", {\"active\": active === \"Crystal\"})} onClick={() => setActive(\"Crystal\")}>About</button>\n                    <button className={cx(\"\", {\"active\": active === \"Geometry\"})} onClick={() => setActive(\"Geometry\")}>Geometry</button>\n                    <button className={cx(\"\", {\"active\": active === \"UnitCell\"})} onClick={() => setActive(\"UnitCell\")}>Unit Cell</button>\n                    <button className={cx(\"\", {\"active\": active === \"AMD\"})} onClick={() => getMetrics(\"AMD\")}>AMD</button>\n                    <button className={cx(\"\", {\"active\": active === \"PDD\"})} onClick={() => getMetrics(\"PDD\")}>PDD</button>\n                </div>\n                { active === \"Crystal\" &&\n                    Object.keys(data.crystal).map(function(key, index) {\n                        let v = data.crystal[key]\n                        if (key === \"Source\") {\n                            return <DataItem label={key.charAt(0).toUpperCase() + key.slice(1) + \" name:\"} value={v.name}/>\n                        }\n\n                        if (typeof v === \"string\" || v instanceof String){\n                            return <DataItem label={key.charAt(0).toUpperCase() + key.slice(1) + \":\"} value={v}/>\n                        } else return undefined\n                    })\n                }\n                {\n                    active === \"Geometry\" &&\n                    <div className={\"tables\"}>\n                        <AtomTable data={data.atoms}/>\n                        <BondTable data={data.bonds}/>\n                    </div>\n                }\n                {\n                    active === \"UnitCell\" &&\n                    <div className={\"tables\"}>\n                        <UnitCellTable data={data.unitCell}/>\n                        <SymmetryTable data={data.unitCell.SymmetryOperators}/>\n                    </div>\n                }\n                {\n                    active === \"AMD\" && metricsLoaded &&\n                    <div className={\"tables\"}>\n                        <AMDTable data={AMDs}/>\n                    </div>\n                }\n                {\n                    active === \"PDD\" && metricsLoaded &&\n                    <div className={\"tables\"}>\n                        <PDDTable data={PDDs}/>\n                    </div>\n                }\n            </div>\n            <div className={\"part-2\"}>\n                <Canvas className=\"preview-panel-canvas\"\n                        camera={{ position: [7, 7, 7], fov: 62 }}>\n                    <ambientLight />\n                    <pointLight position={[1, 1, 1]} />\n                    <Molecule dataset={data} rotX={0.001} rotY={0.005} center={true}/>\n                    <Controls/>\n                </Canvas>\n            </div>\n        </>\n    )\n}","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    \"createCrystalOpen\": false,\n    \"createSourceOpen\": false,\n    \"createSubsetOpen\": false,\n    \"selected\": [],\n    \"activeAccordion\": \"recent\",\n    \"width\": 0,\n    \"height\": 0,\n    \"crystalSearchResults\": [],\n    \"subsetSearchResults\": [],\n    \"sourceSearchResults\": []\n}\n\nconst homeSlice = createSlice({\n    name: 'homeApplication',\n    initialState,\n    reducers: {\n        setCreatePanel(state, action) {\n            state[\"createPanelOpen\"] = action.payload\n            return state;\n        },\n        handleTickBox(state, action) {\n            if (!state.selected.includes(action.payload)) {\n                state.selected = state.selected.concat([action.payload])\n            } else {\n                state.selected = state.selected.filter(x => x !== action.payload)\n            }\n        },\n        setActiveAccordion(state, action) {\n            state[\"activeAccordion\"] = action.payload\n            return state\n        },\n        openCrystalCreate(state, action) {\n            state[\"createCrystalOpen\"] = true\n            return state\n        },\n        openSubsetCreate(state, action) {\n            state[\"createSubsetOpen\"] = true\n            return state\n        },\n        openSourceCreate(state, action) {\n            state[\"createSourceOpen\"] = true\n            return state\n        },\n        closeCrystalCreate(state, action) {\n            state[\"createCrystalOpen\"] = false\n            return state\n        },\n        closeSubsetCreate(state, action) {\n            state[\"createSubsetOpen\"] = false\n            return state\n        },\n        closeSourceCreate(state, action) {\n            state[\"createSourceOpen\"] = false\n            return state\n        },\n        setCrystalSearchResults(state, action) {\n            state[\"crystalSearchResults\"] = action.payload\n            return state\n        },\n        setSourceSearchResults(state, action) {\n            state[\"sourceSearchResults\"] = action.payload\n            return state\n        },\n        setSubsetSearchResults(state, action) {\n            state[\"subsetSearchResults\"] = action.payload\n            return state\n        },\n        flushCreateCrystal(state, action) {\n            state[\"crystalSearchResults\"] = action.payload.concat(state[\"crystalSearchResults\"])\n        },\n        flushCreateSubset(state, action) {\n            state[\"subsetSearchResults\"] = action.payload.concat(state[\"subsetSearchResults\"])\n        },\n        flushCreateSource(state, action) {\n            state[\"sourceSearchResults\"] = action.payload.concat(state[\"sourceSearchResults\"])\n        }\n\n    }\n})\n\nexport const { setCreatePanel, handleTickBox, setActiveAccordion, closeCrystalCreate, closeSourceCreate, closeSubsetCreate,\n               openSubsetCreate, openSourceCreate, openCrystalCreate, setCrystalSearchResults, setSourceSearchResults, setSubsetSearchResults,\n                flushCreateCrystal, flushCreateSource, flushCreateSubset    } = homeSlice.actions\n\nexport default homeSlice.reducer\n\nexport const getCreatePanelOpen = createSelector((state) => state.homeSlice, (p) =>\n    p[\"createPanelOpen\"]\n)\n\nexport const getSelected = createSelector((state) => state.homeSlice, (p) =>\n    p[\"selected\"]\n)\n\nexport const getActiveAccordion = createSelector((state) => state.homeSlice, (p) =>\n    p[\"activeAccordion\"]\n)\n\n\nexport const getCreateCrystalOpen = createSelector((state) => state.homeSlice, (p) =>\n    p[\"createCrystalOpen\"]\n)\n\nexport const getCreateSubsetOpen = createSelector((state) => state.homeSlice, (p) =>\n    p[\"createSubsetOpen\"]\n)\n\nexport const getCreateSourceOpen = createSelector((state) => state.homeSlice, (p) =>\n    p[\"createSourceOpen\"]\n)\n\nexport const getCrystalSearchResults = createSelector((state) => state.homeSlice, (p) =>\n    p[\"crystalSearchResults\"]\n)\n\nexport const getSubsetSearchResults = createSelector((state) => state.homeSlice, (p) =>\n    p[\"subsetSearchResults\"]\n)\nexport const getSourceSearchResults = createSelector((state) => state.homeSlice, (p) =>\n    p[\"sourceSearchResults\"]\n)\n\n\n","import cx from \"classnames\"\nimport React, {useState} from \"react\";\nimport {Button, Form} from \"react-bootstrap\"\nimport {BsChevronDown, BsChevronRight} from \"react-icons/all\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {LoadingCustom} from \"../../Loading\";\nimport {CrystalAccordionBody} from \"./CrystalAccordionBody\";\nimport {addComp} from \"../../features/compare/compareSlice\";\nimport {addView} from \"../../features/view/viewSlice\";\nimport {openCompareApp, openViewApp} from \"../../features/app/appSlice\";\nimport {handleTickBox} from \"../../features/home/homeSlice\";\n\n\nexport const CrystalAccordion = ({dataset}) => {\n    let dispatch = useDispatch()\n    const [open, setOpen] = useState(false)\n    const [loaded, setLoaded] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const [data, setData] = useState(null)\n    const [dataReady, setDataReady] = useState(false)\n    let token = useSelector(getAccessToken)\n\n\n    const handleClick = () => {\n        setOpen(!open)\n        if (!loaded) {\n            setLoading(true)\n            fetch(`/api/crystal/molecule/${dataset.ID}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer:${token}`,\n                },\n            })\n                .then(resp => {\n                    if (resp.status === 401)\n                        window.location.reload()\n                    else if (resp.status === 200) {\n                        resp.json().then((d) => {\n                            setLoading(false)\n                            setData(d)\n                            setDataReady(true)\n                            setLoaded(true)\n                        })\n                    }\n                })\n        }\n    }\n\n    return (\n        <div className={\"crystal-accordion\"}>\n            <div className={cx(\"crystal-accordion-header\", {\"open\": open})}>\n                <div className={\"group-1\"}>\n                    <button className={\"query-result-open-button\"} onClick={handleClick}>\n                        {open ? <BsChevronDown /> : <BsChevronRight/>}\n                    </button>\n                    <Form.Check aria-label=\"option 1\" onChange={() => dispatch(handleTickBox(dataset.name))}/>\n                    <p>{dataset.name}</p>\n                </div>\n                <p>{dataset.CreatedAt}</p>\n                <div className=\"button-set\">\n                    <Button size=\"sm\" onClick={() => {\n                        dispatch(openCompareApp(\"\"))\n                        dispatch(addComp(dataset.name))\n                    }} style={{\"fontSize\": \"12px\"}}>\n                        Compare\n                    </Button>\n                    <Button size=\"sm\" onClick={() => {\n                        dispatch(openViewApp(\"\"))\n                        dispatch(addView(dataset.name))\n                    }} style={{\"fontSize\": \"12px\"}}>\n                        View\n                    </Button>\n                </div>\n            </div>\n            <div className={cx(\"crystal-accordion-body\", {\"open\": open})}>\n                { loading && <LoadingCustom/> }\n                { dataReady && <CrystalAccordionBody data={data}/>}\n            </div>\n        </div>\n    )\n}","import React from \"react\";\n\nconst SimilarCrystalRow = ({datum}) => {\n\n    return (\n        <tr>\n            <td>{datum.name}</td>\n            <td>{datum.family}</td>\n            <td>{datum.Polymorph}</td>\n            <td>{datum.Source.name}</td>\n            <td>{datum.Distance.toFixed(6)}</td>\n        </tr>\n    )\n}\n\nexport const SimilarCrystalsTable = ({data}) => {\n    return (\n        <div>\n            <p style={{\"margin\": \"5px 25px\"}}>Similar Crystals</p>\n            <table className={\"amd-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">Reference Code</th>\n                    <th colSpan=\"1\">Family</th>\n                    <th colSpan=\"1\">Polymorph</th>\n                    <th colSpan=\"1\">Source</th>\n                    <th colSpan=\"1\">Distance</th>\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i) {\n                    return <SimilarCrystalRow datum={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}","import cx from \"classnames\"\nimport React, {useEffect, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    closeCrystalCreate,\n    flushCreateCrystal,\n    getCreateCrystalOpen\n} from \"../../features/home/homeSlice\";\nimport {Badge, Button, Form} from \"react-bootstrap\"\nimport {cifParser} from \"cif-to-json\";\nimport {setReadingFile} from \"../../features/create/createSlice\";\nimport {extractAtoms, extractBonds, extractCrystalMetaData, extractUnitCell} from \"./CIFHelpers\";\nimport {DataItem} from \"../create/CreateAppMainCrystal\";\nimport {AtomTable} from \"./AtomTable\";\nimport {BondTable} from \"./BondTable\";\nimport {UnitCellTable} from \"./UnitCellTable\";\nimport {SymmetryTable} from \"./SymmetryTable\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {SimilarCrystalsTable} from \"./SimilarCrystalsTable\";\n\n\nexport const CrystalCreateAccordion = () => {\n    let open = useSelector(getCreateCrystalOpen)\n    let dispatch = useDispatch()\n    let token = useSelector(getAccessToken)\n    const [bodyOpen, setBodyOpen] = useState(false)\n    const [pickedFile, setPickedFile] = useState(\"\")\n    const [refCode, setRefCode] = useState(\"\")\n    const [validRefCode, setValidRefCode] = useState(false)\n    const [isFilePicked, setIsFilePicked] = useState(false);\n    const [isParsed, setIsParsed] = useState(false)\n    const [cifAsJson, setCifAsJson] = useState(null)\n    const [disabled, setDisabled] = useState(true)\n    const [message, setMessage] = useState(\"\")\n    const [atoms, setAtoms] = useState([])\n    const [bonds, setBonds] = useState([])\n    const [crystal, setCrystal] = useState({})\n    const [unitCell, setUnitCell] = useState({})\n    const [polymorph, setPolymorph] = useState(\"\")\n    const [family, setFamily] = useState(\"\")\n    const [active, setActive] = useState(\"Crystal\")\n    const [sourceOptions, setSourceOptions] = useState([])\n    const [source, setSource] = useState(\"\")\n    const [similarCrystals, setSimilarCrystals] = useState([])\n\n    const createCrystal = () => {\n        setMessage(\"Creating Crystal..\")\n        fetch(`/api/create/crystal/`, {\n            method: \"POST\",\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                \"Crystal\": {\n                    ...crystal,\n                    \"Polymorph\": polymorph,\n                    \"SourceID\": parseInt(source) || 0,\n                    \"name\": refCode,\n                    \"family\": family,\n                },\n                \"Atoms\": atoms,\n                \"Bonds\": bonds,\n                \"UnitCell\": unitCell,\n            })\n        }).then((resp) => {\n            if (resp.status === 401)\n                window.location.reload()\n\n            if (resp.status !== 200) {\n                resp.json()\n                    .then((data) => {\n                        setMessage(`Creation Failed: ${data[\"message\"] || \"\"}`)\n                    })\n            } else {\n                resp.json()\n                    .then((data) => {\n                        setMessage(\"Creation Successful.\")\n                        fetch(`/api/search/crystal/name/${refCode}?match=exact`, {\n                            headers: {\n                                'Authorization': `Bearer:${token}`,\n                                'Content-Type': 'application/json',\n                            },\n                        }).then(data => data.json())\n                            .then(d => {\n                                setIsParsed(false)\n                                dispatch(flushCreateCrystal(d.data))\n                                setBodyOpen(false)\n                                setRefCode(\"\")\n                                setFamily(\"\")\n                                setMessage(\"\")\n                                setDisabled(true)\n                                setPolymorph(\"\")\n                                setSource(\"\")\n                                setAtoms([])\n                                setBonds([])\n                                setCrystal({})\n                                setUnitCell({})\n                                setSimilarCrystals([])\n                                dispatch(closeCrystalCreate(false))\n                            })\n                    })\n            }\n        })\n\n    }\n\n    // I need a way to check if the cif was parsed correctly\n    useEffect(() => {\n        if (!isParsed)\n            return\n\n        console.log(\"retrieving \")\n        fetch(`/api/search/preview/`, {\n            method: \"POST\",\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                \"Crystal\": {\n                    ...crystal,\n                    \"Polymorph\": polymorph,\n                    \"SourceID\": parseInt(source) || 0,\n                    \"name\": refCode,\n                    \"family\": family,\n                },\n                \"Atoms\": atoms,\n                \"Bonds\": bonds,\n                \"UnitCell\": unitCell,\n            })\n        }).then((data) => {\n            if (data.status === 401) {\n                window.location.reload()\n            } else if (data.status === 200) {\n                data.json().then((d) => {\n                    setSimilarCrystals(d.data)\n                })\n            }\n        })\n    }, [isParsed, pickedFile])\n\n    useEffect(() => {\n        let d = refCode.trim() !== \"\" && family.trim() !== \"\" && source !== \"\" && isParsed\n        console.log(`Running use effect, getting ${d}`)\n        setDisabled(!d)\n    }, [refCode, family, source, isParsed])\n\n    const checkReferenceCode = (refCode) => {\n        return false\n    }\n\n    const parseCIF = (fileContents) => {\n        return cifParser(fileContents)\n    }\n\n    const changeHandler = async(event) => {\n        const file = event.target.files.item(0)\n        setPickedFile(file)\n        dispatch(setReadingFile(true))\n        const text = await file.text();\n        let parsed = parseCIF(text)\n        dispatch(setReadingFile(false))\n        setIsFilePicked(true)\n        setCifAsJson(parsed)\n        setCrystal(extractCrystalMetaData(parsed))\n        setMessage(\"Extracting atoms..\")\n        setAtoms(extractAtoms(parsed))\n        setMessage(\"Extracting bonds..\")\n        setBonds(extractBonds(parsed))\n        setMessage(\"Extracting unit cell..\")\n        setUnitCell(extractUnitCell(parsed))\n        setMessage(\"Done.\")\n        setIsParsed(true)\n        setBodyOpen(true)\n    };\n\n    const getSources = (e) => {\n        setSource(e.target.value)\n        console.log(`source is ${e.target.value}`)\n        if (e.target.value === \"\") return\n        fetch(`/api/search/source/${e.target.value}?match=partial`, {\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            }\n        })\n            .then((resp) => {\n                if (resp.status === 200) {\n                    resp.json()\n                        .then((data) => {\n                            setSourceOptions(data[\"data\"])\n                            console.log(data[\"data\"])\n                        })\n                }\n            })\n    }\n\n    return (\n        <div className=\"home-app-create-accordion\">\n            <div className={cx(\"create-accordion-header\", {\"open\": open})}>\n                <div style={{\"display\": \"flex\",\"align-items\": \"center\"}}>\n                    <Badge bg=\"primary\">New</Badge>\n                </div>\n                <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlInput1\">\n                    <Form.Label>Reference Code</Form.Label>\n                    <Form.Control size=\"sm\" type=\"text\" placeholder=\"\" value={refCode} onChange={(e) => {\n                        setRefCode(e.target.value)\n                        setValidRefCode(checkReferenceCode(e.target.value))\n                        setFamily(e.target.value.replace(/\\d+$/, \"\"))\n                    }}/>\n                </Form.Group>\n                <Form.Group className=\"mb-1\" controlId=\"exampleForm.ControlInput2\">\n                    <Form.Label>Family</Form.Label>\n                    <Form.Control size=\"sm\" type=\"text\" placeholder=\"\" value={family} onChange={(e) => {\n                        setFamily(e.target.value)\n                    }}/>\n                </Form.Group>\n                <Form.Group controlId=\"formFileSm\" className=\"mb-3\">\n                    <Form.Label>Small file input example</Form.Label>\n                    <Form.Control type=\"file\" size=\"sm\" onChange={changeHandler}/>\n                </Form.Group>\n                <div style={{\"display\": \"flex\"}}>\n                    <Button size=\"sm\" variant=\"danger\" onClick={() => {\n                        dispatch(closeCrystalCreate(\"\"))\n                        setIsFilePicked(false)\n                        setIsParsed(false)\n                        setRefCode(\"\")\n                        setSimilarCrystals([])\n                    }} style={{\"margin\": \"0 10px\"}}>\n                        Discard\n                    </Button>\n                    {\n                        disabled && <Button variant=\"success\" size=\"sm\" disabled>\n                            Create\n                        </Button>\n                    }\n                    {\n                        !disabled && <Button size=\"sm\" variant=\"success\" onClick={createCrystal}>\n                            Create\n                        </Button>\n                    }\n                </div>\n            </div>\n            <div className={cx(\"create-accordion-body\", {\"open\": isFilePicked && isParsed && bodyOpen})}>\n                <div className={\"top-bar\"}>\n                    <button className={cx(\"\", {\"active\": active === \"Crystal\"})} onClick={() => setActive(\"Crystal\")}>About</button>\n                    <button className={cx(\"\", {\"active\": active === \"Geometry\"})} onClick={() => setActive(\"Geometry\")}>Geometry</button>\n                    <button className={cx(\"\", {\"active\": active === \"UnitCell\"})} onClick={() => setActive(\"UnitCell\")}>Unit Cell</button>\n                </div>\n                { active === \"Crystal\" && isParsed &&\n                    <div style={{\"display\": \"flex\"}}>\n                        <div style={{\"width\": \"50%\"}}>\n                            {\n                                Object.keys(crystal).map(function(key, index) {\n                                    let v = crystal[key]\n                                    if (typeof v === \"string\" || v instanceof String){\n                                        return <DataItem label={key.charAt(0).toUpperCase() + key.slice(1) + \":\"} value={v}/>\n                                    } else return undefined\n                                })\n                            }\n                            <div className=\"data-item\">\n                                <p>Polymorph</p>\n                                <Form.Control size=\"sm\" type=\"text\" placeholder=\"Polymorph Label\" value={polymorph}\n                                              style={{\"maxWidth\": \"30%\", \"background\": \"white\"}}\n                                              onChange={(e) => {\n                                                  setPolymorph(e.target.value)\n                                              }}/>\n                            </div>\n                            <div className=\"data-item\">\n                                <p>Source</p>\n                                <Form.Control size=\"sm\" id=\"accordion-sources-dropdown\" type=\"text\" list=\"accordion-sources-datalist\"\n                                              style={{\"maxWidth\": \"30%\", \"background\": \"white\"}} placeholder={\"Source name\"}\n                                              onChange={(e) => {\n                                                  getSources(e)\n                                              }}\n                                              value={source}/>\n                                <datalist id=\"accordion-sources-datalist\" onChange={(e) => {\n                                    getSources(e)\n                                }}>\n                                    <option value={0} label={\"User\"}>User</option>\n                                    { sourceOptions.map((x) => {\n                                        return <option value={x.ID} label={x.name }>{x.name}</option>\n                                    }) }\n                                </datalist>\n                            </div>\n                        </div>\n                        <div style={{\"width\": \"50%\"}}>\n                            <SimilarCrystalsTable data={similarCrystals}/>\n                        </div>\n                    </div>\n                }\n                {\n                    active === \"Geometry\" && isParsed &&\n                    <div className={\"tables\"}>\n                        <AtomTable data={atoms}/>\n                        <BondTable data={bonds}/>\n                    </div>\n                }\n                {\n                    active === \"UnitCell\" && isParsed &&\n\n                    <div className={\"tables\"}>\n                        <UnitCellTable data={unitCell}/>\n                        <SymmetryTable data={unitCell.SymmetryOperators}/>\n                    </div>\n                }\n            </div>\n        </div>\n    )\n}","import {useEffect, useState} from \"react\";\nimport {LoadingCustom} from \"../../Loading\";\nimport {CrystalAccordion} from \"./CrystalAccordion\";\nimport {useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {getActiveAccordion, getSelected} from \"../../features/home/homeSlice\";\nimport cx from \"classnames\"\nimport {CrystalCreateAccordion} from \"./CrystalCreateAccordion\";\n\nexport const SelectedCount = () => {\n    let selected = useSelector(getSelected)\n    return (\n        <h6 style={{\"padding\": \"10px 20px\", \"font-size\": \"13px\", \"font-style\": \"italic\"}}>\n            {`${selected.length} items selected`}</h6>\n    )\n}\n\nexport const RecentCrystalAccordionList = () => {\n    const [loading, setLoading] = useState(false)\n    const [dataReady, setDataReady] = useState(false)\n    const [dataset, setDataset] = useState(null)\n    let activeAccordion = useSelector(getActiveAccordion)\n    let token = useSelector(getAccessToken)\n\n    useEffect(() => {\n        setLoading(true)\n        fetch(`/api/search/recent`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer:${token}`,\n            },\n        })\n            .then(data => data.json())\n            .then((d) => {\n                setLoading(false)\n                setDataset(d.data)\n                setDataReady(true)\n            })\n    },[])\n\n    if (loading) {\n        return <LoadingCustom width={\"200px\"} height={\"300px\"}/>\n    }\n\n    if (!dataReady)\n        return <div></div>\n\n    return (\n        <div className={cx(\"crystal-accordion-list\", {\"hidden\": activeAccordion !== \"recent\"})}>\n            <SelectedCount/>\n            <CrystalCreateAccordion/>\n            {dataset.map((d) => {\n                return <CrystalAccordion dataset={d}/>\n            })}\n        </div>\n    )\n}","import cx from \"classnames\"\nimport React, {useState} from \"react\";\nimport {Button, Form} from \"react-bootstrap\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    getActiveAccordion,\n    setActiveAccordion,\n    setCrystalSearchResults, setSourceSearchResults,\n    setSubsetSearchResults\n} from \"../../features/home/homeSlice\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\n\n\nconst CrystalFacetOptions = () => {\n    return (\n        <>\n            <option value=\"name\">Reference Code</option>\n            <option value=\"family\">Family</option>\n            <option value=\"source\">Source</option>\n            <option value=\"subset\">Subset</option>\n            <option value=\"composition\">Composition</option>\n            <option value=\"primeComposition\">Prime Composition</option>\n            <option value=\"similarity\">Distance</option>\n        </>\n    )\n}\n\nconst SourceFacetOptions = () => {\n    return (\n        <>\n            <option value=\"name\">Name</option>\n        </>\n    )\n}\n\nconst SubsetFacetOptions = () => {\n    return (\n        <>\n            <option value=\"name\">Name</option>\n        </>\n    )\n}\n\nexport const SearchAccordion = ({}) => {\n    const [open, setOpen] = useState(false)\n    const [facet, setFacet] = useState(\"name\")\n    const [query, setQuery] = useState(\"\")\n    const [matchType, setMatchType] = useState(\"exact\")\n    const [orderBy, setOrderBy] = useState(\"none\")\n    const [loading, setLoading] = useState(false)\n    let activeAccordion = useSelector(getActiveAccordion)\n    let dispatch = useDispatch()\n    let token = useSelector(getAccessToken)\n\n    const handleSearch = () => {\n        setLoading(true)\n        let aa = activeAccordion\n        if (activeAccordion === \"recent\") {\n            dispatch(setActiveAccordion(\"crystals\"))\n            aa = \"crystals\"\n        }\n\n        let url = `/api/search/${aa.slice(0, -1)}/${facet}/${query}?match=${matchType}&order=${orderBy}`\n        if (aa !== \"crystals\")\n            url = `/api/search/${aa.slice(0, -1)}/${query}?match=${matchType}&order=${orderBy}&aggregate=true`\n        fetch(url, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer:${token}`,\n            },\n        })\n            .then(data => {\n                if (data.status !== 200) {\n                    if (data.status === 401) {\n                        window.location.reload()\n                    }\n                } else {\n                    data.json().then((d) => {\n                        setLoading(false)\n                        switch (activeAccordion) {\n                            case \"crystals\":\n                                dispatch(setCrystalSearchResults(d.data))\n                                break\n                            case \"recent\":\n                                dispatch(setCrystalSearchResults(d.data))\n                                break\n                            case \"subsets\":\n                                dispatch(setSubsetSearchResults(d.data))\n                                break\n                            case \"sources\":\n                                dispatch(setSourceSearchResults(d.data))\n                                break\n                        }\n                    })\n                }\n            })\n    }\n\n    return (\n        <div className=\"search-accordion\">\n            <div className=\"search-accordion-header\">\n                <div className={\"group\"}>\n                    <input className={\"search-query\"}  placeholder={\"Search\"}\n                           onChange={e => setQuery(e.target.value)}\n                           value={query}\n                    />\n                    <select name=\"By:\" className=\"search-facet\" value={facet} onChange={ e => setFacet(e.target.value)}>\n                        {\n                            (activeAccordion === \"crystals\" || activeAccordion === \"recent\") &&\n                            <CrystalFacetOptions/>\n                        }\n                        {\n                            activeAccordion === \"sources\" && <SourceFacetOptions/>\n                        }\n                        {\n                            activeAccordion === \"subsets\" && <SubsetFacetOptions/>\n                        }\n                    </select>\n                    <button className=\"search-accordion-button\" onClick={handleSearch}>\n                        {loading ? \"Loading..\" : \"Search\"}\n                    </button>\n                </div>\n                <div className=\"group\">\n                    <button id=\"advanced-search-button\" onClick={() => setOpen(!open)}>\n                        More Options\n                    </button>\n                </div>\n            </div>\n            <div className={cx(\"search-accordion-body\", {\"open\": open})}>\n                <div>\n                    <p>Match Type:</p>\n                    <div key={`inline-radio`} className=\"mb-3\">\n                        <Form.Check\n                            inline\n                            label=\"Exact\"\n                            name=\"group1\"\n                            type=\"radio\"\n                            id={`inline-radio-1`}\n                            onClick={() => setMatchType(\"exact\")}\n                        />\n                        <Form.Check\n                            inline\n                            label=\"Partial\"\n                            name=\"group1\"\n                            type=\"radio\"\n                            id={`inline-radio-2`}\n                            onClick={() => setMatchType(\"partial\")}\n                        />\n                    </div>\n                </div>\n                <div>\n                    <p>Order:</p>\n                    <select name=\"By:\" className=\"order-facet\" value={orderBy} onChange={ e => setOrderBy(e.target.value)}>\n                        <option value=\"none\">None</option>\n                        <option value=\"oldest\">Oldest</option>\n                        <option value=\"recent\">Most Recent</option>\n                        <option value=\"alphabetically\">Alpha</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n    )\n}","import React, {useState} from \"react\";\nimport cx from \"classnames\"\nimport {\n    Accordion,\n    Breadcrumb,\n    ButtonGroup,\n    Carousel,\n    DropdownButton,\n    Dropdown,\n    Form,\n    FloatingLabel, Button\n} from \"react-bootstrap\";\nimport {MoleculeCardRow} from \"./MoleculeCardRow\";\nimport {AiOutlineHome} from \"react-icons/all\";\nimport {RecentCrystalAccordionList} from \"./RecentCrystalAccordionList\";\nimport {openSearchPanel} from \"../../features/search/searchSlice\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    getActiveAccordion,\n    openCrystalCreate, openSourceCreate,\n    openSubsetCreate,\n    setActiveAccordion,\n    setCreatePanel\n} from \"../../features/home/homeSlice\";\nimport {SearchAccordion} from \"./SearchAccordion\";\n\nexport const HomeAppTopBar = () => {\n    let active = useSelector(getActiveAccordion)\n    const [index, setIndex] = useState(0);\n    let dispatch = useDispatch()\n\n    const handleSelect = (selectedIndex, e) => {\n        setIndex(selectedIndex);\n    };\n\n    const openCreateAccordion = () => {\n        console.log(`active is ${active}`)\n        switch (active) {\n            case \"recent\":\n                dispatch(openCrystalCreate(true))\n                break\n            case \"crystals\":\n                dispatch(openCrystalCreate(true))\n                break\n            case \"subsets\":\n                dispatch(openSubsetCreate(true))\n                break\n            case \"sources\":\n                console.log(\"dispatching correctly\")\n                dispatch(openSourceCreate(true))\n                break\n        }\n    }\n\n    return (\n        <>\n            <Breadcrumb style={{\"fontSize\": \"12px\", \"padding\": \"20px 20px 0\"}}>\n                <Breadcrumb.Item ><AiOutlineHome/></Breadcrumb.Item>\n                <Breadcrumb.Item>\n                    {active.at(0).toUpperCase() + active.slice(1)}\n                </Breadcrumb.Item>\n                <Breadcrumb.Item active>Data</Breadcrumb.Item>\n            </Breadcrumb>\n            <div className={\"top-bar\"}>\n                <div className={\"left-group\"}>\n                    <button className={cx(\"\", {\"active\": active === \"recent\"})}\n                            onClick={() => dispatch(setActiveAccordion(\"recent\"))}>Recent</button>\n                    <button className={cx(\"\", {\"active\": active === \"crystals\"})}\n                            onClick={() => dispatch(setActiveAccordion(\"crystals\"))}>Crystals</button>\n                    <button className={cx(\"\", {\"active\": active === \"subsets\"})}\n                            onClick={() => dispatch(setActiveAccordion(\"subsets\"))}>Subsets</button>\n                    <button className={cx(\"\", {\"active\": active === \"sources\"})}\n                            onClick={() => dispatch(setActiveAccordion(\"sources\"))}>Sources</button>\n                </div>\n                <div className={\"right-group\"}>\n                    <Button size=\"sm\" onClick={openCreateAccordion}>Create</Button>\n                </div>\n            </div>\n            <SearchAccordion />\n        </>\n    )\n}\n\n/*\n*             <Carousel activeIndex={index} onSelect={handleSelect} variant=\"dark\">\n                <Carousel.Item>\n                    <MoleculeCardRow ids={[\"CREATE01\", \"CREATE01\", \"CREATE01\"]}/>\n                </Carousel.Item>\n                <Carousel.Item>\n                    <MoleculeCardRow ids={[4,5,6]}/>\n                </Carousel.Item>\n                <Carousel.Item>\n                    <MoleculeCardRow ids={[7,8,9]}/>\n                </Carousel.Item>\n            </Carousel>\n* */","import cx from \"classnames\";\nimport {CrystalCreateAccordion} from \"./CrystalCreateAccordion\";\nimport {CrystalAccordion} from \"./CrystalAccordion\";\nimport {getActiveAccordion, getCrystalSearchResults} from \"../../features/home/homeSlice\";\nimport {useSelector} from \"react-redux\";\nimport {SelectedCount} from \"./RecentCrystalAccordionList\";\n\n\nexport const CrystalAccordionList = () => {\n    let activeAccordion = useSelector(getActiveAccordion)\n    let dataset = useSelector(getCrystalSearchResults)\n\n    return (\n        <div className={cx(\"crystal-accordion-list\", {\"hidden\": activeAccordion !== \"crystals\"})}>\n            <SelectedCount/>\n            <CrystalCreateAccordion/>\n            {dataset.map((d) => {\n                return <CrystalAccordion dataset={d}/>\n            })}\n        </div>\n    )\n}","\n\n\nexport const SourceAccordion = ({dataset}) => {\n    return (\n        <div className={\"accordion\"}>\n            <div className={\"accordion-header\"} >\n                <p>{`ID: ${dataset.ID}`}</p>\n                <p>{dataset.name}</p>\n                <p>{dataset.CreatedAt}</p>\n            </div>\n        </div>\n    )\n}","import cx from \"classnames\"\nimport React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {closeSourceCreate, flushCreateSource, getCreateSourceOpen} from \"../../features/home/homeSlice\";\nimport {Badge, Button, Form} from \"react-bootstrap\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\n\nexport const SourceCreateAccordion = () => {\n    let dispatch = useDispatch()\n    let open = useSelector(getCreateSourceOpen)\n    const [name, setName] = useState(\"\")\n    const [type, setType] = useState(\"public\")\n    const [message, setMessage] = useState(\"\")\n    let token = useSelector(getAccessToken)\n\n    const createSource = () => {\n        setMessage(\"Creating Source...\")\n        fetch(`/api/source/`, {\n            method: \"POST\",\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                \"name\": name,\n                \"type\": type,\n            })\n        }).then((resp) => {\n            if (resp.status !== 200) {\n                resp.json()\n                    .then((data) => {\n                        setMessage(`Creation Failed: ${data[\"message\"] || \"\"}`)\n                    })\n            } else {\n                resp.json()\n                    .then((data) => {\n                        setMessage(\"Creation Successful.\")\n                        fetch(`/api/search/source/${name}?match=exact`, {\n                            headers: {\n                                'Authorization': `Bearer:${token}`,\n                                'Content-Type': 'application/json',\n                            },\n                        }).then(data => data.json())\n                            .then(d => {\n                                dispatch(flushCreateSource(d.data))\n                                dispatch(closeSourceCreate(false))\n                            })\n                    })\n            }\n        })\n    }\n\n    return (\n        <>\n            <div className=\"home-app-create-accordion\">\n                <div className={cx(\"create-accordion-header\", {\"open\": open})}>\n                    <Badge bg=\"primary\">New</Badge>\n                    <Form.Group className=\"mb-0\" controlId=\"exampleForm.ControlInput1\">\n                        <Form.Label>Source Name</Form.Label>\n                        <Form.Control size=\"sm\" type=\"text\" placeholder=\"\" value={name} onChange={(e) => {\n                            setName(e.target.value)\n                        }}/>\n                    </Form.Group>\n                    <Form.Group className=\"mb-0\" >\n                        <Form.Label>Source Type</Form.Label>\n                        <div key={`inline-radio`} className=\"mb-3\">\n                            <Form.Check\n                                inline\n                                label=\"Public\"\n                                name=\"group1\"\n                                type=\"radio\"\n                                id={`source-create-inline-radio-1`}\n                                onClick={() => setType(\"public\")}\n                            />\n                            <Form.Check\n                                inline\n                                label=\"Private\"\n                                name=\"group1\"\n                                type=\"radio\"\n                                id={`source-create-inline-radio-2`}\n                                onClick={() => setType(\"private\")}\n                            />\n                        </div>\n                    </Form.Group>\n                    <p style={{\"fontSize\": \"11px\"}}>{message}</p>\n                    <div style={{\"display\": \"flex\"}}>\n                        <Button variant=\"danger\" style={{\"marginRight\": \"10px\"}} onClick={() => {\n                            setName(\"\")\n                            setType(\"public\")\n                            dispatch(closeSourceCreate(false))\n                        }}>\n                            Discard\n                        </Button>\n                        <Button variant=\"success\" style={{\"marginRight\": \"10px\"}} onClick={createSource}>\n                            Create\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}","import cx from \"classnames\";\nimport {getActiveAccordion, getSourceSearchResults} from \"../../features/home/homeSlice\";\nimport {useSelector} from \"react-redux\";\nimport {SelectedCount} from \"./RecentCrystalAccordionList\";\nimport {SourceAccordion} from \"./SourceAccordion\";\nimport {SourceCreateAccordion} from \"./SourceCreateAccordion\";\n\n\nexport const SourceAccordionList = () => {\n    let activeAccordion = useSelector(getActiveAccordion)\n    let dataset = useSelector(getSourceSearchResults)\n    console.log(\"dataset is \")\n    console.log(dataset)\n\n    return (\n        <div className={cx(\"crystal-accordion-list\", {\"hidden\": activeAccordion !== \"sources\"})}>\n            <SelectedCount/>\n            <SourceCreateAccordion/>\n            {dataset.map((d) => {\n                return <SourceAccordion dataset={d}/>\n            })}\n        </div>\n    )\n}","import {check} from \"../create/CreateAppMainCrystal\";\nimport React from \"react\";\n\nconst CrystalRow = ({data}) => {\n    return (\n        <tr>\n            <td>{check(data.name)}</td>\n            <td>{check(data.family)}</td>\n            <td>{check(data.Composition)}</td>\n            <td>{check(data.Polymorph)}</td>\n            <td>{check(data.Source.name)}</td>\n            <td>{check(data.CreatedAt)}</td>\n        </tr>\n    )\n}\n\nexport const CrystalTable = ({data}) => {\n    console.log(\"data is \")\n    console.log(data)\n    return (\n        <div className={\"crystal-info\"}>\n            <p style={{\"marginBottom\": \"5px\", \"fontSize\": \"14px\"}}>Crystals:</p>\n            <table className={\"crystal-table\"}>\n                <thead>\n                <tr>\n                    <th colSpan=\"1\">RefCode</th>\n                    <th colSpan=\"1\">Family</th>\n                    <th colSpan=\"1\">Composition</th>\n                    <th colSpan=\"1\">Polymorph</th>\n                    <th colSpan=\"1\">Source</th>\n                    <th colSpan=\"1\">Created</th>\n                </tr>\n                </thead>\n                <tbody>\n                {data.map(function (i) {\n                    return <CrystalRow data={i}/>\n                })}\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\n","import {Button, Form} from \"react-bootstrap\";\nimport {BsChevronDown, BsChevronRight} from \"react-icons/all\";\nimport {handleTickBox} from \"../../features/home/homeSlice\";\nimport React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport cx from \"classnames\"\nimport {CrystalTable} from \"./CrystalTable\";\n\n\nexport const SubsetAccordion = ({dataset}) => {\n    let dispatch = useDispatch()\n    const [open, setOpen] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const [data, setData] = useState([])\n    const [loaded, setLoaded] = useState(false)\n    let token = useSelector(getAccessToken)\n\n    const addSubset = () => {\n\n    }\n\n    const handleClick = () => {\n        setOpen(!open)\n        if (!loaded) {\n            setLoading(true)\n            fetch(`/api/search/crystal/subset/${dataset.Name}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer:${token}`,\n                },\n            })\n                .then(data => data.json())\n                .then((d) => {\n                    setLoading(false)\n                    setData(d.data)\n                    setLoaded(true)\n                })\n        }\n    }\n\n    if (loading)\n        return <div></div>\n\n    return (\n        <div className={\"accordion\"}>\n            <div className={\"accordion-header\"} >\n                <div className={\"group-1\"}>\n                    <button className={\"query-result-open-button\"} onClick={handleClick}>\n                        {open ? <BsChevronDown /> : <BsChevronRight/>}\n                    </button>\n                    <Form.Check aria-label=\"option 1\" onChange={() => dispatch(handleTickBox(dataset.name))}/>\n                    <p>{dataset.Name}</p>\n                </div>\n                <p>{`Size: ${dataset.Crystals}`}</p>\n                <Button onClick={addSubset}>\n                    Compare\n                </Button>\n            </div>\n            <div className={cx(\"accordion-body\", {\"open\": open})}>\n                <CrystalTable data={data} />\n            </div>\n        </div>\n    )\n}","import cx from \"classnames\"\nimport React, {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getAccessToken} from \"../../features/auth/authSlice\";\nimport {Badge, Button, Form} from \"react-bootstrap\";\nimport {\n    closeSubsetCreate, flushCreateSubset,\n    getCreateSubsetOpen\n} from \"../../features/home/homeSlice\";\nimport {CrystalTable} from \"./CrystalTable\";\n\nexport const SubsetCreateAccordion = () => {\n    const dispatch = useDispatch()\n    const [bodyOpen, setBodyOpen] = useState(false)\n    const [name, setName] = useState(\"\")\n    const [message, setMessage] = useState(\"\")\n    const [refCodes, setRefCodes] = useState([])\n    const [refCodeText, setRefCodeText] = useState(\"\")\n    const [disabled, setDisabled] = useState(true)\n    const [previewData, setPreviewData] = useState([])\n    let open = useSelector(getCreateSubsetOpen)\n\n    let token = useSelector(getAccessToken)\n    \n    const getPreview = () => {\n        if (refCodes.length > 0) {\n            fetch(`/api/crystal/by/refcode`, {\n                method: \"POST\",\n                headers: {\n                    'Authorization': `Bearer:${token}`,\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    \"RefCodes\": refCodes,\n                })\n            }).then((data) => {\n                if (data.status === 401) {\n                    window.location.reload()\n                } else if (data.status === 200) {\n                    data.json().then((d) => {\n                        setPreviewData(d[\"data\"])\n                    })\n                }\n            })\n        }\n    }\n\n\n    const createSubset = () => {\n        setMessage(\"Creating Subset..\")\n        fetch(`/api/subset/`, {\n            method: \"POST\",\n            headers: {\n                'Authorization': `Bearer:${token}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                \"Name\": name,\n                \"CrystalIds\": refCodes,\n            })\n        }).then((resp) => {\n            if (resp.status !== 200) {\n                resp.json()\n                    .then((data) => {\n                        setMessage(`Creation Failed: ${data[\"message\"] || \"\"}`)\n                    })\n            } else {\n                resp.json()\n                    .then((data) => {\n                        setMessage(\"Creation Successful.\")\n                        fetch(`/api/search/subset/${name}?match=exact&aggregate=true`, {\n                            headers: {\n                                'Authorization': `Bearer:${token}`,\n                                'Content-Type': 'application/json',\n                            },\n                        }).then(data => data.json())\n                            .then(d => {\n                                dispatch(flushCreateSubset(d.data))\n                                setBodyOpen(false)\n                                setRefCodeText(\"\")\n                                setRefCodes([])\n                                setName(\"\")\n                                setMessage(\"\")\n                                setDisabled(true)\n                                dispatch(closeSubsetCreate(false))\n                            })\n                    })\n            }\n        })\n    }\n\n\n    return (\n        <>\n            <div className=\"home-app-create-accordion\">\n                <div className={cx(\"create-accordion-header\", {\"open\": open})}>\n                    <Badge bg=\"primary\">New</Badge>\n                    <Form.Group className=\"mb-0\" controlId=\"exampleForm.ControlInput1\">\n                        <Form.Label>Subset Name</Form.Label>\n                        <Form.Control size=\"sm\" type=\"text\" placeholder=\"\" value={name} onChange={(e) => {\n                            setName(e.target.value)\n                            setBodyOpen(true)\n                        }}/>\n                    </Form.Group>\n                    <p style={{\"fontSize\": \"11px\"}}>{message}</p>\n                    <div style={{\"display\": \"flex\"}}>\n                        <Button variant=\"danger\" size=\"sm\" style={{\"marginRight\": \"10px\"}} onClick={() => {\n                            setName(\"\")\n                            setBodyOpen(false)\n                            setRefCodeText(\"\")\n                            setRefCodes([])\n                            dispatch(closeSubsetCreate(false))\n                        }}>\n                            Discard\n                        </Button>\n                        {\n                            disabled && <Button variant=\"success\" size=\"sm\" disabled>\n                                Create\n                            </Button>\n                        }\n                        {\n                            !disabled && <Button size=\"sm\" variant=\"success\" onClick={createSubset}>\n                                Create\n                            </Button>\n                        }\n                    </div>\n                </div>\n                <div className={cx(\"create-accordion-body\", {\"open\": bodyOpen})} style={{\"display\": \"flex\", \"alignItems\":\"stretch\"}}>\n                    <div style={{\"width\": \"40%\"}}>\n                        <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\" style={{\"height\": \"80%\"}}>\n                            <Form.Label>Reference Codes (comma-seperated)</Form.Label>\n                            <Form.Control as=\"textarea\" rows={3} value={refCodeText} style={{\"height\": \"90%\", \"fontSize\": \"13px\"}}\n                                          onChange={(e) => {\n                                              setRefCodeText(e.target.value)\n                                              let r  = e.target.value.split(\",\").map((x) => {\n                                                  return x.trim()\n                                              })\n                                              setRefCodes(r)\n                                              setDisabled(e.target.value === \"\" || r.length === 0)\n                                              console.log(refCodes)\n                                          }}/>\n                        </Form.Group>\n                        <Button style={{\"width\": \"100%\"}} onClick={getPreview}>Preview</Button>\n                    </div>\n                    <div style={{\"flexGrow\": 1, \"padding\": \"10px 20px\", \"maxWidth\": \"60%\"}}>\n                        <CrystalTable data={previewData}/>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}","import cx from \"classnames\";\nimport {getActiveAccordion, getSubsetSearchResults} from \"../../features/home/homeSlice\";\nimport {useSelector} from \"react-redux\";\nimport {SelectedCount} from \"./RecentCrystalAccordionList\";\nimport {SubsetAccordion} from \"./SubsetAccordion\";\nimport {SubsetCreateAccordion} from \"./SubsetCreateAccordion\";\n\n\nexport const SubsetAccordionList = () => {\n    let activeAccordion = useSelector(getActiveAccordion)\n    let dataset = useSelector(getSubsetSearchResults)\n    console.log(\"dataset is \")\n    console.log(dataset)\n\n    return (\n        <div className={cx(\"subset-accordion-list\", {\"hidden\": activeAccordion !== \"subsets\"})}>\n            <SelectedCount/>\n            <SubsetCreateAccordion/>\n            {dataset.map((d) => {\n                return <SubsetAccordion dataset={d}/>\n            })}\n        </div>\n    )\n}","import {HomeAppTopBar} from \"./HomeAppTopBar\";\nimport * as React from \"react\";\nimport {RecentCrystalAccordionList} from \"./RecentCrystalAccordionList\";\nimport {useSelector} from \"react-redux\";\nimport {getActiveAccordion} from \"../../features/home/homeSlice\";\nimport {CrystalAccordionList} from \"./CrystalAccordionList\";\nimport {SourceAccordionList} from \"./SourceAccordionList\";\nimport {SubsetAccordionList} from \"./SubsetAccordionList\";\n\n\nexport const HomeAppMain = ({}) => {\n    let activeAccordion = useSelector(getActiveAccordion)\n    console.log(`active accordion ${activeAccordion}`)\n\n    return (\n        <div className=\"home-app-main\">\n            <HomeAppTopBar/>\n            <RecentCrystalAccordionList/>\n            <CrystalAccordionList/>\n            <SubsetAccordionList/>\n            <SourceAccordionList/>\n        </div>\n    )\n}","import {useSelector} from \"react-redux\";\nimport {getOpenApp} from \"../../features/app/appSlice\";\nimport cx from \"classnames\";\nimport * as React from \"react\";\nimport \"./home.scss\"\nimport {HomeAppTopBar} from \"./HomeAppTopBar\";\nimport {HomeAppMain} from \"./HomeAppMain\";\n\n\nexport const HomeApp = () => {\n    const openApp = useSelector(getOpenApp)\n\n    return (\n        <div className={cx(\"home-app\", {\"hidden\": openApp !== \"home\"})}>\n            <HomeAppMain/>\n        </div>\n    )\n}","import * as React from \"react\";\nimport { CompareApp } from \"./compare/CompareApp\"\nimport { ViewApp} from \"./view/ViewApp\";\nimport {CreateApp} from \"./create/CreateApp\";\nimport {HomeApp} from \"./home/HomeApp\";\n\nfunction ApplicationBay() {\n    return (\n        <div className=\"application-bay\">\n            <HomeApp/>\n            <CreateApp/>\n            <CompareApp/>\n            <ViewApp/>\n        </div>\n    )\n}\n\nexport default ApplicationBay;","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    settingsModalOpened: false,\n    potentialBackend: \"\",\n    backend: \"\"\n};\n\nconst settingsModalSlice = createSlice({\n    name: 'settingsModalOpened',\n    initialState,\n    reducers: {\n        openSettingsModal(state, action) {\n            //  This \"mutating\" code is okay inside of createSlice!\n            state[\"settingsModalOpened\"] = true;\n            return state;\n        },\n        closeSettingsModal(state, action) {\n            //  This \"mutating\" code is okay inside of createSlice!\n            state[\"settingsModalOpened\"] = false;\n            return state;\n        },\n        changePotentialBackend(state, action) {\n            let url = action.payload\n            console.log(\"Potential url is \" + url)\n            state[\"potentialBackend\"] = url\n            return state;\n        },\n        setNewBackend(state, action) {\n            let url = action.payload\n            state['backend'] = url\n            return state\n        }\n    }\n})\n\nexport const { openSettingsModal, closeSettingsModal, changePotentialBackend, setNewBackend } = settingsModalSlice.actions\n\nexport default settingsModalSlice.reducer\n\nexport const getSettingsModalOpened = createSelector((state) => state.settingsModalSlice, (p) =>\n    p[\"settingsModalOpened\"]\n)\n\nexport const getPotentialBackend = createSelector((state) => state.settingsModalSlice, (p) =>\n    p[\"potentialBackend\"]\n)\n\nexport const getBackend = createSelector((state) => state.settingsModalSlice, (p) =>\n    p[\"backend\"]\n)","import * as React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {openSettingsModal} from \"../features/settings/settingsFooterSlice\";\nimport {addToken, setLoggedIn} from \"../features/auth/authSlice\";\nimport {getSearchPanelOpened, openSearchPanel, toggleSearchPanel} from \"../features/search/searchSlice\";\nimport useToken from \"../useToken\";\nimport {getOpenApp, openCompareApp, openCreateApp, openHomeApp, openViewApp} from \"../features/app/appSlice\";\nimport cx from \"classnames\"\nimport {OverlayTrigger, Tooltip} from \"react-bootstrap\";\n\n\n\nconst LeftSideBarButton = ({ id, buttonIcon, onClick }) => {\n    let openApp = useSelector(getOpenApp)\n\n    const renderTooltip = (props) => (\n        <Tooltip id=\"button-tooltip\" {...props}>\n            {id.replace(\"-button\", \"\")}\n        </Tooltip>\n    );\n\n    return (\n        <>\n            <OverlayTrigger\n                placement=\"right\"\n                delay={{ show: 100, hide: 100 }}\n                overlay={renderTooltip}\n            >\n                <button onClick={onClick} className={cx(\"left-side-bar-button\", {\"selected\": openApp === id.replace(\"-button\", \"\").toLowerCase()})}>\n                    { buttonIcon }\n                </button>\n            </OverlayTrigger>\n        </>\n    )\n}\n\nexport default LeftSideBarButton;","import ReactDOM from 'react-dom'\nimport React, { useRef, useState } from 'react'\nimport { Canvas, useFrame, Color } from '@react-three/fiber'\n\nexport default function Ball(props) {\n    // This reference gives us direct access to the THREE.Mesh object\n    const ref = useRef()\n    // Hold state for hovered and clicked events\n    const [hovered, hover] = useState(false)\n    const [clicked, click] = useState(false)\n    // Subscribe this component to the render-loop, rotate the mesh every frame\n    useFrame((state, delta) => {\n        ref.current.rotation.y += 0.005; ref.current.rotation.x += 0.01\n    })\n    // Return the preview, these are regular Threejs elements expressed in JSX\n    return (\n        <mesh\n            {...props}\n            ref={ref}\n            scale={clicked ? 1.2 : 1}\n            onClick={(event) => click(!clicked)}\n            onPointerOver={(event) => hover(true)}\n            onPointerOut={(event) => hover(false)}>\n            <octahedronGeometry args={[2, 0]} />\n            <meshBasicMaterial wireframe={true} color={hovered ? '#9ca3af' : '#9ca3af'} />\n        </mesh>\n    )\n}\n","import * as React from \"react\";\nimport Ball from \"../Logo\";\nimport {Canvas} from \"@react-three/fiber\";\n\n\nexport const SideBarLogo = () => {\n    return (\n        <div id=\"side-bar-logo\">\n            <Canvas style={{'height': '50px', 'width': '50px'}}>\n                <ambientLight />\n                <pointLight position={[2, 2, 2]} />\n                <Ball position={[0, 0, 0]} />\n            </Canvas>\n            <div style={{\"margin-left\": \"5px\"}}>\n                <p style={{\"font-size\": \"x-small\", \"margin-bottom\": \"-3px\", \"font-family\": \"monospace\"}}>Open</p>\n                <p style={{\"font-size\": \"x-small\", \"margin-left\":\"8px\", \"font-family\": \"monospace\"}}>Crystal</p>\n            </div>\n        </div>\n    )\n}","import * as React from \"react\";\nimport LeftSideBarButton from \"./LeftSideBarButton\";\nimport AddIcon from '@mui/icons-material/Add';\nimport SearchIcon from '@mui/icons-material/Search';\nimport ManageAccountsIcon from '@mui/icons-material/ManageAccounts';\nimport {SideBarLogo} from \"./SideBarLogo\";\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport HelpIcon from '@mui/icons-material/Help';\nimport InfoIcon from '@mui/icons-material/Info';\nimport PreviewIcon from '@mui/icons-material/Preview';\nimport CompareIcon from '@mui/icons-material/Compare';\nimport HomeIcon from '@mui/icons-material/Home'\nimport {openCreateApp, openHomeApp, openCompareApp, openViewApp} from \"../features/app/appSlice\";\nimport {useDispatch} from \"react-redux\";\n\n\nconst LeftSideBar = () => {\n    const dispatch = useDispatch()\n\n    return (\n        <div  id=\"left-side-bar\">\n            <div className={\"top-buttons\"}>\n                <LeftSideBarButton id=\"Home-button\" buttonIcon={<HomeIcon/>} onClick={() => dispatch(openHomeApp(\"\"))}/>\n                <LeftSideBarButton id=\"Create-button\" buttonIcon={<AddIcon/>} onClick={() => dispatch(openCreateApp(\"\"))}/>\n                <LeftSideBarButton id=\"Compare-button\" buttonIcon={<CompareIcon/>} onClick={() => dispatch(openCompareApp(\"\"))}/>\n                <LeftSideBarButton id=\"View-button\" buttonIcon={<PreviewIcon/>} onClick={() => dispatch(openViewApp(\"\"))}/>\n            </div>\n            <div className={\"bottom-buttons\"}>\n                <LeftSideBarButton id=\"Info-button\" buttonIcon={<InfoIcon/>}/>\n            </div>\n        </div>\n    )\n\n}\n\nexport default LeftSideBar;","import './Dashboard.scss'\nimport {BrowserRouter, Route} from \"react-router-dom\";\nimport * as React from \"react\";\nimport '@trendmicro/react-sidenav/dist/react-sidenav.css';\nimport ApplicationBay from \"./ApplicationBay\";\nimport SearchPanel from \"./search/SearchPanel\";\nimport PreviewPanel from \"./PreviewPanel\";\nimport LeftSideBar from \"./LeftSideBar\";\n\n\nfunction Dashboard() {\n\n    return (\n        <div className=\"dashboard\">\n            <LeftSideBar/>\n            <ApplicationBay/>\n        </div>\n    )\n}\n\nexport default Dashboard;","import {useDispatch, useSelector} from \"react-redux\";\nimport {\n    closeCreateModal,\n    getCreateModalOpened,\n} from \"../../features/create/createSlice\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport React, {useState} from \"react\";\nimport ScienceIcon from '@mui/icons-material/Science';\nimport ListIcon from '@mui/icons-material/List';\nimport StorageIcon from '@mui/icons-material/Storage';\nimport cx from 'classnames';\nimport {InputField} from '../base/InputField';\nimport {retry} from \"@reduxjs/toolkit/query\";\n\n\n\n\nfunction CreateCrystalPanel(props) {\n    return (\n        <div id=\"create-crystal-panel\" className=\"create-crystal-panel\">\n            <h6>From CIF:</h6>\n            <input type=\"file\" id=\"myFile\" name=\"filename\"/>\n            <div className=\"create-crystal-options\">\n                <div className=\"create-crystal-options-meta\">\n                    <InputField label={\"Name\"} ph={\"Name\"} name={\"name-input\"} id={\"name-input\"} />\n                </div>\n                <div className=\"create-crystal-options-geometry\">\n\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction CreateSourcePanel(props) {\n    return (\n        <div id=\"create-source-panel\">\n\n        </div>\n    )\n}\n\nfunction CreateSubsetPanel(props) {\n    return (\n        <div id=\"create-subset-panel\">\n\n        </div>\n    )\n}\n\nfunction CreateModal({}) {\n    const dispatch = useDispatch()\n    const modalOpened = useSelector(getCreateModalOpened)\n\n    const [tab, setTab] = useState('crystal')\n    const getClass = (currentTab, thisTab) => {\n        return cx(\"create-modal-tab-button\", {\"selected\": currentTab === thisTab})\n    }\n\n    const getTabContent = (currentTab) => {\n        if (currentTab === \"crystal\")\n            return <CreateCrystalPanel/>\n        else if (currentTab === \"source\")\n            return <CreateSourcePanel/>\n        else if (currentTab === \"subset\")\n            return <CreateSubsetPanel/>\n    }\n\n    return (\n        <div className={cx(\"create-modal\", {\"open\": modalOpened})} >\n            <div className=\"create-modal-content\">\n                <div className=\"close-button-container\">\n                    <button onClick={() => dispatch(closeCreateModal(false))}>\n                        <CloseIcon fontSize={\"small\"}/>\n                    </button>\n                </div>\n                <div id=\"create-modal-tabs\">\n                    <button className={getClass(\"crystal\", tab)} onClick={() => setTab(\"crystal\")}>\n                        <ScienceIcon fontSize={\"small\"}/>\n                        Crystal\n                    </button>\n                    <button className={getClass(\"subset\", tab)} onClick={() => setTab(\"subset\")}>\n                        <ListIcon fontSize={\"small\"}/>\n                        Subset\n                    </button>\n                    <button className={getClass(\"source\", tab)} onClick={() => setTab(\"source\")}>\n                        <StorageIcon fontSize={\"small\"}/>\n                        Source\n                    </button>\n                </div>\n                { getTabContent(tab) }\n            </div>\n        </div>\n    )\n}\n\nexport default CreateModal;","import {useDispatch, useSelector} from \"react-redux\";\nimport {\n    changePotentialBackend,\n    closeSettingsModal,\n    getPotentialBackend,\n    getSettingsModalOpened, setNewBackend\n} from \"../features/settings/settingsFooterSlice\";\n\n\nfunction SettingsModal({}) {\n    let vis  = 'none'\n    const modalOpened = useSelector(getSettingsModalOpened)\n    console.log(modalOpened)\n    if (modalOpened)\n        vis = 'block'\n\n    const dispatch = useDispatch()\n\n    const handleCloseButtonClick = () => {\n        console.log(\"Close Modal button\")\n        dispatch(closeSettingsModal(vis))\n    }\n    let potentialEndpoint = useSelector(getPotentialBackend)\n\n    const handleConnectButtonClick = () => {\n\n        const healthCheck = async () => {\n            console.log(\"Using endpoint: \" + potentialEndpoint)\n\n            fetch(potentialEndpoint)\n                .then(async response => {\n                    const resp = await response;\n                    console.log(resp)\n                    const data = resp.json();\n\n                    // check for error response\n                    if (!response.ok) {\n                        // get error message from body or default to response statusText\n                        const error = (data && data.message) || response.statusText;\n                        return Promise.reject(error);\n                    }\n                    return true;\n                })\n                .catch(error => {\n                    console.error('There was an error!', error);\n                    return false;\n                });\n        }\n\n        healthCheck().then(function (result) {\n            if (result)\n                setNewBackend(potentialEndpoint)\n        })\n    }\n\n    const handleURLChange = (e) => {\n        console.log(\"Changing Potential Backend\")\n        console.log(e.target.value)\n        dispatch(changePotentialBackend(e.target.value))\n    }\n\n    return (\n        <div className=\"settings-modal\" style={{'display': vis}}>\n            <div className=\"settings-modal-content\">\n                <div>\n                    <p>Server Address:</p>\n                    <input type=\"text\" onChange={e => handleURLChange(e)}/>\n                </div>\n                <div className=\"settings-modal-footer\">\n                    <button id=\"close-settings-modal-button\" className=\"settings-modal-button\" onClick={handleConnectButtonClick}>Connect</button>\n                    <button className=\"settings-modal-button\" onClick={handleCloseButtonClick}>Close</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default SettingsModal;","import '../App.scss';\nimport * as React from \"react\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport HelpIcon from '@mui/icons-material/Help';\n\nimport AccountCircleIcon from \"@mui/icons-material/AccountCircle\"\nimport {Canvas} from \"@react-three/fiber\";\nimport Ball from \"../Logo\";\nimport {useDispatch} from \"react-redux\";\nimport {addAccessToken, addRefreshToken} from \"../features/auth/authSlice\";\n\n\nexport const AppHeader = () => {\n    const dispatch = useDispatch()\n\n    return (\n        <div className={\"app-header\"}>\n            <div className={\"content-left\"}>\n                <Canvas style={{'height': '50px', 'width': '50px'}}>\n                    <ambientLight />\n                    <pointLight position={[2, 2, 2]} />\n                    <Ball position={[0, 0, 0]} />\n                </Canvas>\n                <div style={{\"margin-left\": \"5px\"}}>\n                    <p style={{\"font-size\": \"x-small\", \"margin-bottom\": \"-3px\", \"padding-top\":\"5px\", \"font-family\": \"monospace\"}}>Open</p>\n                    <p style={{\"font-size\": \"x-small\", \"margin-left\":\"8px\", \"font-family\": \"monospace\"}}>Crystal</p>\n                </div>\n            </div>\n            <div className={\"content-right\"}>\n                <button className={\"header-button\"} onClick={() => sessionStorage.clear() }>\n                    <AccountCircleIcon/>\n                    <p>Account</p>\n                </button>\n                <button className={\"header-button\"} onClick={() => sessionStorage.clear() }>\n                    <HelpIcon/>\n                    <p>Help</p>\n                </button>\n                <button className={\"header-button\"} onClick={() => {\n                    sessionStorage.clear()\n                    dispatch(addAccessToken(undefined))\n                    dispatch(addRefreshToken(undefined))\n                    window.location.reload()\n                } }>\n                    <LogoutIcon/>\n                </button>\n            </div>\n        </div>\n    )\n}","import './App.scss';\nimport Dashboard from './components/Dashboard';\nimport * as React from \"react\";\nimport LeftSideBar from \"./components/LeftSideBar\"\nimport CreateModal from \"./components/create/CreateModal\";\nimport SettingsModal from \"./components/SettingsModal\";\nimport {AppHeader} from \"./components/AppHeader\";\n\nfunction App() {\n\n    return (\n        <div className=\"App\">\n            <AppHeader/>\n            <CreateModal/>\n            <SettingsModal/>\n            <Dashboard/>\n        </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createSlice, createSelector } from '@reduxjs/toolkit'\n\nconst initialState = {\n    \"openOptionsPanel\": \"NONE\",\n    \"openApplicationBay\": \"View-app\"\n}\n\nconst openOptionsPanelSlice = createSlice({\n    name: 'openApplication',\n    initialState,\n    reducers: {\n        viewToggled(state, action) {\n            //  This \"mutating\" code is okay inside of createSlice!\n            if (state[\"openOptionsPanel\"] === \"View-panel\")\n                state[\"openOptionsPanel\"] = \"NONE\"\n            else {\n                state[\"openOptionsPanel\"] = \"View-panel\"\n                state[\"openApplicationBay\"] = \"View-app\"\n            }\n\n            return state;\n        },\n        compareToggled(state, action) {\n            if (state[\"openOptionsPanel\"] === \"Compare-panel\")\n                state[\"openOptionsPanel\"] = \"NONE\"\n            else {\n                state[\"openOptionsPanel\"] = \"Compare-panel\"\n                state[\"openApplicationBay\"] = \"Compare-app\"\n            }\n\n            return state;\n        },\n        databaseToggled(state, action) {\n            if (state[\"openOptionsPanel\"] === \"Database-panel\")\n                state[\"openOptionsPanel\"] = \"NONE\"\n            else {\n                state[\"openOptionsPanel\"] = \"Database-panel\"\n                state[\"openApplicationBay\"] = \"Database-app\"\n            }\n            return state;\n        },\n        settingsToggled(state, action) {\n            if (state[\"openOptionsPanel\"] === \"Settings-panel\")\n                state[\"openOptionsPanel\"] = \"NONE\"\n            else {\n                state[\"openOptionsPanel\"] = \"Settings-panel\"\n                state[\"openApplicationBay\"] = \"Settings-app\"\n            }\n            return state;\n        }\n    }\n})\n\nexport const { viewToggled, compareToggled, databaseToggled, settingsToggled } = openOptionsPanelSlice.actions\n\nexport default openOptionsPanelSlice.reducer\n\nexport const getOpenOptionsPanel = createSelector((state) => state.openOptionsPanelSlice, (p) =>\n    p[\"openOptionsPanel\"]\n)\n\nexport const getOpenApplicationBay = createSelector((state) => state.openOptionsPanelSlice, (p) =>\n    p[\"openApplicationBay\"]\n)","import {configureStore} from '@reduxjs/toolkit'\n\nimport optionsReducer from './features/options/optionsSlice'\nimport settingsReducer from './features/settings/settingsFooterSlice'\nimport authReducer from './features/auth/authSlice'\nimport compareReducer from './features/compare/compareSlice'\nimport createReducer from './features/create/createSlice'\nimport searchReducer from './features/search/searchSlice'\nimport previewReducer from './features/preview/previewSlice'\nimport appReducer from './features/app/appSlice'\nimport viewReducer from './features/view/viewSlice'\nimport homeReducer from './features/home/homeSlice'\n\nconst store = configureStore({\n    reducer: {\n        // Define a top-level state field named `todos`, handled by `todosReducer`\n        openOptionsPanelSlice: optionsReducer,\n        settingsModalSlice: settingsReducer,\n        authSlice: authReducer,\n        compareSlice: compareReducer,\n        createModalSlice: createReducer,\n        searchPanelSlice: searchReducer,\n        previewSlice: previewReducer,\n        appSlice: appReducer,\n        viewSlice: viewReducer,\n        homeSlice: homeReducer,\n    }\n})\n\nexport default store","import * as React from 'react';\n\nexport const TabSelector = ({\n                                isActive,\n                                children,\n                                onClick,\n                            }) => (\n    <button\n        className={`mr-8 group inline-flex items-center px-2 py-4 border-b-2 font-medium text-sm leading-5 cursor-pointer whitespace-nowrap ${\n            isActive\n                ? 'border-indigo-500 text-indigo-600 focus:outline-none focus:text-indigo-800 focus:border-indigo-700'\n                : 'border-transparent text-gray-500 hover:text-gray-600 hover:border-gray-300 focus:text-gray-600 focus:border-gray-300'\n        }`}\n        onClick={onClick}\n    >\n        {children}\n    </button>\n);","import './index.scss'\nimport {useReducer, useState} from \"react\";\nimport * as React from \"react\";\nimport PropTypes from 'prop-types';\nimport { useTabs, TabPanel } from \"react-headless-tabs\"\nimport {TabSelector} from \"./components/TabSelector\";\nimport 'tailwindcss/tailwind.css';\nimport {addAccessToken, addRefreshToken, addToken, refreshToken, setLoggedIn} from \"./features/auth/authSlice\";\nimport {useDispatch} from \"react-redux\";\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport Ball from \"./Logo\";\n\n\nasync function loginUser(credentials) {\n    console.log(\"doing something\")\n    return fetch('/api/token/', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n    })\n        .then(data => data.json())\n}\n\nasync function createUser(credentials) {\n    return fetch('/api/user/', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n    })\n        .then(data => data.json())\n}\n\n\nexport function LoginPage({setToken}) {\n    //const [formData, setFormData] = useReducer(formReducer, {});\n    const [selectedTab, setSelectedTab] = useTabs([\n        'Login',\n        'New Account',\n    ]);\n\n    const [submitting, setSubmitting] = useState(false);\n    const [username, setUserName] = useState();\n    const [password, setPassword] = useState();\n    const [newusername, setNewUserName] = useState();\n    const [newpassword, setNewPassword] = useState();\n    const [email, setEmail] = useState()\n    let dispatch = useDispatch()\n\n    const handleSubmit = async e => {\n        e.preventDefault();\n        const token = await loginUser({\n            username,\n            password\n        });\n\n        console.log(token)\n        if (token !== undefined) {\n            token['user'] = username;\n            setToken(token)\n            dispatch(setLoggedIn({\"loggedIn\": true}))\n            dispatch(addAccessToken(token[\"access\"]))\n            dispatch(addRefreshToken(token[\"refresh\"]))\n        }\n    }\n\n    const handleCreation = async e => {\n        e.preventDefault();\n        const token = await createUser({\n            'username': newusername,\n            'email': email,\n            'password': newpassword\n        });\n        //sessionStorage.setItem('jwtToken', token);\n        token['user'] = username;\n        setToken(token)\n        dispatch(setLoggedIn({\"loggedIn\": true}))\n        dispatch(addAccessToken(token[\"access\"]))\n        dispatch(addRefreshToken(token[\"refresh\"]))\n    }\n\n    return (\n        <div id=\"login-page\">\n            <div id=\"login-tabs\">\n                <nav className=\"flex border-b border-gray-300\">\n                    <TabSelector\n                        isActive={selectedTab === 'Login'}\n                        onClick={() => setSelectedTab('Login')}\n                    >\n                        Login\n                    </TabSelector>\n                    <TabSelector\n                        isActive={selectedTab === 'New Account'}\n                        onClick={() => setSelectedTab('New Account')}\n                    >\n                        New Account\n                    </TabSelector>\n                </nav>\n                <div className=\"p-4\">\n                    <TabPanel hidden={selectedTab !== 'Login'}>\n                        <Canvas style={{'height': '80px'}}>\n                            <ambientLight />\n                            <pointLight position={[2, 2, 2]} />\n                            <Ball position={[0, 0, 0]} />\n                        </Canvas>\n                        <h1 id=\"main-title\">OpenCrystal</h1>\n                        <form onSubmit={handleSubmit}>\n                            <fieldset>\n                                <p>Username:</p>\n                                <input type=\"text\" placeholder=\"Username\" id=\"username-input\"\n                                       onChange={e => setUserName(e.target.value)}/>\n                                <p>Password:</p>\n                                <input type=\"password\" placeholder=\"Password\" id=\"password-input\"\n                                       onChange={e => setPassword(e.target.value)}/>\n                            </fieldset>\n                            <button type=\"submit\" id=\"submit-login-button\">Submit</button>\n                        </form>\n                    </TabPanel>\n                    <TabPanel hidden={selectedTab !== 'New Account'}>\n                        <form onSubmit={handleCreation}>\n                            <fieldset>\n                                <p>Email:</p>\n                                <input type=\"text\" placeholder=\"Email\" id=\"new-email-input\"\n                                       onChange={e => setEmail(e.target.value)}/>\n                                <p>Username:</p>\n                                <input type=\"text\" placeholder=\"Username\" id=\"new-username-input\"\n                                       onChange={e => setNewUserName(e.target.value)}/>\n                                <p>Password:</p>\n                                <input type=\"password\" placeholder=\"Password\" id=\"new-password-input\"\n                                       onChange={e => setNewPassword(e.target.value)}/>\n                                <p>Repeat Password:</p>\n                                <input type=\"password\" placeholder=\"Password\" id=\"repeat-password-input\"\n                                       onChange={e => setNewPassword(e.target.value)}/>\n                            </fieldset>\n                            <button type=\"submit\" id=\"submit-create-button\">Create</button>\n                        </form>\n                    </TabPanel>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nLoginPage.propTypes = {\n    setToken: PropTypes.func.isRequired\n}\n\n","import React, {useEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { createStore } from 'redux';\nimport store from './store';\nimport {Provider, useDispatch, useSelector} from 'react-redux';\nimport {LoginPage} from './Login';\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport {\n    addAccessToken,\n    addRefreshToken,\n    getAccessToken,\n    getCurrentUser,\n    getLoggedIn,\n    getRefreshToken\n} from \"./features/auth/authSlice\";\nimport useToken from \"./useToken\";\n\n\nfunction Index({}) {\n    const { token, setToken, clearToken } = useToken()\n    const [tokenChecked, setTokenChecked] = useState(false)\n    let dispatch = useDispatch()\n    let user = useSelector(getCurrentUser)\n\n\n    useEffect(() => {\n        if (!token)\n            return\n\n        if (!token.access || !token.refresh) {\n            return\n        }\n\n        fetch(\"/api/token/refresh\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer:${token[\"access\"]}`,\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\"refresh\": token[\"refresh\"]})\n        })\n            .then((resp) => {\n                if (resp.status !== 200) {\n                    sessionStorage.clear()\n                    dispatch(addAccessToken(undefined))\n                    dispatch(addRefreshToken(undefined))\n                } else {\n                    resp.json()\n                        .then((r) => {\n                            console.log(r)\n                            let jwt = {\n                                \"access\": r.access,\n                                \"refresh\": r.refresh,\n                                \"user\": user\n                            }\n                            sessionStorage.setItem('token', JSON.stringify(jwt))\n                            setTokenChecked(true)\n                        })\n                }\n            })\n    })\n\n\n    if(!token || !tokenChecked) {\n        return <LoginPage  setToken={setToken}/>\n    }\n    dispatch(addAccessToken(token[\"access\"]))\n    dispatch(addRefreshToken(token[\"refresh\"]))\n\n    return (\n        <div className=\"wrapper\">\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/\">\n                        <App />\n                    </Route>\n                </Switch>\n            </BrowserRouter>\n        </div>\n    );\n}\n\nReactDOM.render(\n  <React.StrictMode>\n      <Provider store={store}>\n          <Index/>\n      </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {useState} from 'react';\n\nexport default function useToken() {\n    const getToken = () => {\n        const tokenString = sessionStorage.getItem('token');\n        return JSON.parse(tokenString)\n    };\n\n    const [token, setToken] = useState(getToken());\n\n    const saveToken = userToken => {\n        sessionStorage.setItem('token', JSON.stringify(userToken));\n        setToken(userToken);\n    };\n\n    const clearToken = () => {\n        sessionStorage.removeItem('token')\n        setToken(undefined)\n    }\n\n    return {\n        setToken: saveToken,\n        token,\n        clearToken: clearToken,\n    }\n}\n"],"sourceRoot":""}